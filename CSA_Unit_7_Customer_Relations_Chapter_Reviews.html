<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA Unit 7 - Building as a System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .logo {
            width: 120px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .education-logo {
            width: 100%;
            height: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .final-exam-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            grid-column: 1 / -1;
            font-size: 18px;
            padding: 25px;
        }

        .quiz-container {
            display: none;
        }

        .quiz-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .quiz-title {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-button {
            background: #6c757d;
            color: white;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .quit-button {
            background: #dc3545;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #00a085); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .score-poor { background: linear-gradient(135deg, #e17055, #d63031); }

        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .results-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .answers-review {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }

        .review-header {
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-review {
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
            margin-bottom: 15px;
        }

        .question-review:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .review-question-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .answer-comparison {
            display: grid;
            gap: 8px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .user-answer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .user-answer.correct {
            background: #d4edda;
            border: 1px solid #74b816;
            color: #155724;
        }

        .user-answer.incorrect {
            background: #f8d7da;
            border: 1px solid #e74c3c;
            color: #721c24;
        }

        .correct-answer {
            background: #d1ecf1;
            border: 1px solid #74b816;
            color: #0c5460;
        }

        .answer-label {
            font-weight: 600;
            margin-right: 10px;
            min-width: 80px;
        }

        .answer-text {
            flex: 1;
        }

        .answer-icon {
            margin-left: 10px;
            font-weight: bold;
        }

        .toggle-review {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .toggle-review:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lark-logo {
            height: 30px;
            width: auto;
        }

        .created-by {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Navigation -->
        <div id="mainMenu">
            <div class="logo">
                <svg class="education-logo" viewBox="0 0 1024 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- Educational Theme Logo -->
                    <rect x="50" y="150" width="300" height="300" fill="#1565C0" rx="20"/>
                    <!-- Book/Learning symbol -->
                    <path d="M 100 200 L 300 200 L 300 400 L 100 400 Z" fill="white"/>
                    <path d="M 120 220 L 280 220 M 120 250 L 280 250 M 120 280 L 280 280 M 120 310 L 280 310 M 120 340 L 280 340 M 120 370 L 280 370" stroke="#1565C0" stroke-width="3"/>
                    
                    <!-- Learning Text -->
                    <text x="400" y="280" font-family="Arial, sans-serif" font-size="90" font-weight="bold" fill="#1565C0">LEARNING</text>
                    
                    <!-- Educational Text -->
                    <text x="50" y="550" font-family="Arial, sans-serif" font-size="60" font-weight="bold" fill="#7CB342">EDUCATIONAL RESOURCES</text>
                </svg>
            </div>
            <h1>Unit 7 - Building as a System</h1>
            <p class="subtitle">Gas Trade Training - Chapter Questions</p>
            
            <!-- Educational Disclaimer -->
            <div style="background: #e74c3c; color: white; border-radius: 10px; padding: 15px; margin: 20px 0; text-align: center; font-size: 14px;">
                <strong>⚠️ Independent Educational Content</strong><br>
                This content is provided by LARK Labs as an independent educational resource. We are not affiliated with CSA Group or any regulatory body. These materials complement official training but do not replace certified instruction.
            </div>
            
            <div class="button-grid">
                <button class="nav-button" onclick="startQuiz('chapter1')">
                    Chapter 1<br>
                    <small>Customer Relations - Dealing with Customers</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter2')">
                    Chapter 2<br>
                    <small>Preventing Property Damage</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter3')">
                    Chapter 3<br>
                    <small>Dealing with Difficult Customers</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter4')">
                    Chapter 4<br>
                    <small>Understanding Cultural Differences</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('finalExam')">
                    CSA Unit 7 Final Review<br>
                    <small>Building as a System - All Chapters</small>
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <h2 id="quizTitle" class="quiz-title"></h2>
                <div id="progressInfo"></div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="questionCard" class="question-card">
                <div id="questionNumber" class="question-number"></div>
                <div id="questionText" class="question-text"></div>
                <div id="answerOptions"></div>
            </div>

            <div class="quiz-controls">
                <button id="prevButton" class="control-button prev-button" onclick="previousQuestion()">Previous</button>
                <button id="quitButton" class="control-button quit-button">Quit Quiz</button>
                <button id="nextButton" class="control-button next-button" onclick="nextQuestion()">Next</button>
            </div>

            <!-- Footer for Quiz -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- HVAC Unit Main Body -->
                        <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                        
                        <!-- Fan/Blower Circle -->
                        <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                        <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                        <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                        
                        <!-- Fan Blades -->
                        <g transform="translate(90,80)">
                            <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                            <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                        </g>
                        
                        <!-- Control Panel Lines -->
                        <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                        <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                        <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                        <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                        
                        <!-- Status Light -->
                        <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                        
                        <!-- Unit Feet -->
                        <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        
                        <!-- LARK text -->
                        <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                        <!-- Subtitle -->
                        <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="results-container">
            <div id="scoreCircle" class="score-circle">
                <span id="scorePercentage"></span>
            </div>
            <h2 class="results-title">Quiz Complete!</h2>
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span id="totalQuestions"></span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span id="correctAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span id="incorrectAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Final Score:</span>
                    <span id="finalScore"></span>
                </div>
            </div>
            
            <button class="toggle-review" onclick="toggleAnswerReview()">Show Answer Review</button>
            
            <div id="answersReview" class="answers-review" style="display: none;">
                <div class="review-header">Answer Review</div>
                <div id="reviewContent"></div>
            </div>
            
            <button class="control-button next-button" onclick="returnToMenu()">Return to Menu</button>

            <!-- Footer for Results -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- HVAC Unit Main Body -->
                        <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                        
                        <!-- Fan/Blower Circle -->
                        <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                        <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                        <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                        
                        <!-- Fan Blades -->
                        <g transform="translate(90,80)">
                            <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                            <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                        </g>
                        
                        <!-- Control Panel Lines -->
                        <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                        <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                        <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                        <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                        
                        <!-- Status Light -->
                        <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                        
                        <!-- Unit Feet -->
                        <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        
                        <!-- LARK text -->
                        <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                        <!-- Subtitle -->
                        <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <span class="created-by">Created by</span>
                <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- HVAC Unit Main Body -->
                    <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                    
                    <!-- Fan/Blower Circle -->
                    <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                    <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                    <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                    
                    <!-- Fan Blades -->
                    <g transform="translate(90,80)">
                        <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                        <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                    </g>
                    
                    <!-- Control Panel Lines -->
                    <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                    <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                    <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                    <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                    
                    <!-- Status Light -->
                    <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                    
                    <!-- Unit Feet -->
                    <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                    <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                    
                    <!-- LARK text -->
                    <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                    <!-- LABS text -->
                    <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                    <!-- Subtitle -->
                    <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Quiz data based on CSA Unit 7 materials
        const quizData = {
            chapter1: {
                title: "Chapter 1: Customer Relations - Dealing with Customers",
                questions: [
                    {
                        question: "Which of the following methods is used to project a professional attitude?",
                        options: [
                            "Drive a clean vehicle",
                            "Give easily understood explanations of problems",
                            "Always carry a toolbox"
                        ],
                        correct: 1
                    },
                    {
                        question: "Why is a neat, well-groomed appearance important when dealing with a customer?",
                        options: [
                            "It indicates to a customer that your work will reflect the same care and consideration",
                            "It indicates to a customer that you are a supervisor",
                            "It represents the values of the company to the customer"
                        ],
                        correct: 0
                    },
                    {
                        question: "What should be done before using water, power etc., in a customer's home?",
                        options: [
                            "Ask permission",
                            "Check the source for any safety issues and report",
                            "Advise the customer you cannot complete the work unless you have access to the utilities"
                        ],
                        correct: 0
                    },
                    {
                        question: "What should be done after hearing the customer's explanation of a problem or request?",
                        options: [
                            "Tell the customer you are the expert and you will figure it out for yourself.",
                            "Advise the customer they should learn how to operate the equipment properly.",
                            "Clarify by recapping or paraphrasing the customer's explanation to assure them that they have communicated it accurately to you"
                        ],
                        correct: 2
                    },
                    {
                        question: "Why is asking the right question in the right way important when dealing with customer concerns?",
                        options: [
                            "It can shorten the time it takes to analyze the problem and will save them money.",
                            "It can not only help to isolate the problem, but it can also make the customer feel he/she is part of the process",
                            "It can prevent you from having to go back to the vehicle to get extra tools."
                        ],
                        correct: 1
                    },
                    {
                        question: "After solving a service problem, what should be done to allay further concerns of the customer?",
                        options: [
                            "The customer should be advised how the last person who worked on the system was incompetent.",
                            "The customer should be advised to read the instructions that came with the appliance and try and fix it first before calling.",
                            "A brief explanation of the problem and its solution should be given to the customer."
                        ],
                        correct: 2
                    }
                ]
            },
            chapter2: {
                title: "Chapter 2: Preventing Property Damage",
                questions: [
                    {
                        question: "What is a good way to ensure your footwear is clean and dry when entering a customer's home?",
                        options: [
                            "Bring an extra pair of shoes for inside",
                            "Wear overshoes",
                            "Wipe your shoes on the customers doormat"
                        ],
                        correct: 1
                    },
                    {
                        question: "Where should you park your service vehicle when arriving at a customer's location?",
                        options: [
                            "On the street",
                            "Customers driveway",
                            "Both the street and driveway are acceptable"
                        ],
                        correct: 2
                    },
                    {
                        question: "What electrical appliance(s) should never be unplugged in order to obtain power?",
                        options: [
                            "Television",
                            "Washer or Dryer",
                            "Any appliance connected with an extension cord",
                            "Refrigerator or freezer"
                        ],
                        correct: 3
                    },
                    {
                        question: "What should be done before moving an appliance into a customer's home?",
                        options: [
                            "Take measurements to ensure it can fit in the space provided.",
                            "Ask the customer to leave and they will see the appliance after it is installed.",
                            "Ask the customer if they know if the appliance will fit in the space provided."
                        ],
                        correct: 0
                    },
                    {
                        question: "What should be done if a customer's property is damaged?",
                        options: [
                            "Assess the damage and touch up any small marks before the customer has an opportunity to see it.",
                            "Immediately report all damage to the customer and your supervisor.",
                            "Advise the customer the damage was there before you started."
                        ],
                        correct: 1
                    }
                ]
            },
            chapter3: {
                title: "Chapter 3: Dealing with Difficult Customers",
                questions: [
                    {
                        question: "What should be done after a customer's problem has been solved and the work is complete?",
                        options: [
                            "Nothing",
                            "Produce an invoice for the work and demand payment",
                            "Perform a follow-up to ensure the customer is still satisfied"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of the following is a better choice of words than, \"I know how you feel,\" when responding to a customer's complaint?",
                        options: [
                            "You are overreacting",
                            "I can understand why you feel that way",
                            "It's not that bad"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which is the better choice of words than, \"You are not making any sense\" when responding to a customer's concerns?",
                        options: [
                            "That is definitely wrong",
                            "Maybe I am not understanding you correctly",
                            "You're way off base",
                            "Did you really say...."
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the best policy regarding arguments with a customer?",
                        options: [
                            "Listen, but make sure the customer agrees with you by the end",
                            "Advise the customer you are the expert",
                            "Avoiding arguments is the best policy"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of the following non-verbal communication techniques can be used to diffuse a customer's anger?",
                        options: [
                            "Facial expression (calm, sincere, concerned, interested expression)",
                            "Turn your back to the customer",
                            "Say nothing and leave without fixing the problem"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is an appropriate response to a customer who is demanding something unreasonable or impossible?",
                        options: [
                            "Calmly leave the location and mark it on the work order",
                            "Calmly and patiently tell them what you are able to do, not what you cannot do",
                            "Calmly leave without saying anything"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is a poor response when dealing with a rude customer?",
                        options: [
                            "Do you want this fixed or not?",
                            "What would you like me to do to solve the problem you are having?",
                            "I am not meeting your expectations. What can I do?"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is a good response to an abusive customer?",
                        options: [
                            "You are rude, and I do not have to take this abuse, I am leaving",
                            "Say nothing, turn around and leave",
                            "I am sorry, but if you cannot speak to me on a professional basis, I will have to leave"
                        ],
                        correct: 2
                    },
                    {
                        question: "What should you do when a customer becomes unruly or threatening?",
                        options: [
                            "Seek assistance. If violence is threatened, call the police",
                            "Shut off the fuel supply and mark the work order that the system has been tagged",
                            "Lock the meter or shut off the fuel supply and lock it"
                        ],
                        correct: 0
                    }
                ]
            },
            chapter4: {
                title: "Chapter 4: Understanding Cultural Differences",
                questions: [
                    {
                        question: "Which is the better way of communicating with a person who speaks little English?",
                        options: [
                            "Speaking slower",
                            "Speaking louder",
                            "Speaking louder and slower"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is a possible alternative to speaking when you are trying to communicate with a customer who has heavily accented English?",
                        options: [
                            "Advise the customer someone else will attend.",
                            "Have the customer try to write his/her request.",
                            "Point and speak loudly."
                        ],
                        correct: 1
                    },
                    {
                        question: "How may cultural differences affect work schedules?",
                        options: [
                            "Someone who is of the same background would have to attend.",
                            "Cultural differences don't affect work schedules.",
                            "Work may have to be scheduled around religious or cultural practices."
                        ],
                        correct: 2
                    }
                ]
            },
            finalExam: {
                title: "CSA Unit 7 Final Review - Building as a System",
                questions: []  // Will be populated with randomized questions from all chapters
            }
        };

        // Function to shuffle an array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Initialize final exam with randomized questions from all chapters
        function initializeFinalExam() {
            const allQuestions = [];
            
            // Collect all questions from all chapters
            Object.keys(quizData).forEach(key => {
                if (key !== 'finalExam') {
                    allQuestions.push(...quizData[key].questions);
                }
            });
            
            // Shuffle and assign to final exam
            quizData.finalExam.questions = shuffleArray(allQuestions);
        }

        // Initialize the final exam questions when the page loads
        initializeFinalExam();

        // Quiz state
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function startQuiz(quizType) {
            currentQuiz = quizData[quizType];
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            // If it's the final exam, re-randomize the questions
            if (quizType === 'finalExam') {
                initializeFinalExam();
                currentQuiz = quizData[quizType];
            }

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';

            document.getElementById('quizTitle').textContent = currentQuiz.title;
            
            // Set up quit button event listener
            const quitButton = document.getElementById('quitButton');
            if (quitButton) {
                quitButton.onclick = function() {
                    returnToMenu();
                };
            }
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressInfo').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            
            // Show question
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Show options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option';
                button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                button.onclick = () => selectAnswer(index);
                
                // Restore previous selection
                if (userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').textContent = 
                currentQuestionIndex === totalQuestions - 1 ? 'Finish Quiz' : 'Next';
        }

        function selectAnswer(answerIndex) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuiz.questions.length; i++) {
                if (userAnswers[i] === currentQuiz.questions[i].correct) {
                    score++;
                }
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('incorrectAnswers').textContent = totalQuestions - score;
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set score circle color based on performance
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
            } else if (percentage >= 80) {
                scoreCircle.classList.add('score-good');
            } else if (percentage >= 70) {
                scoreCircle.classList.add('score-fair');
            } else {
                scoreCircle.classList.add('score-poor');
            }
            
            // Generate answer review
            generateAnswerReview();
        }

        function generateAnswerReview() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            
            currentQuiz.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-review';
                
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = question.correct;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question-text';
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionDiv.appendChild(questionText);
                
                // Answer comparison
                const answerComparison = document.createElement('div');
                answerComparison.className = 'answer-comparison';
                
                // User's answer
                const userAnswerDiv = document.createElement('div');
                userAnswerDiv.className = `answer-row user-answer ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const userAnswerLabel = document.createElement('span');
                userAnswerLabel.className = 'answer-label';
                userAnswerLabel.textContent = 'Your answer:';
                
                const userAnswerText = document.createElement('span');
                userAnswerText.className = 'answer-text';
                
                if (userAnswerIndex !== undefined) {
                    const optionLetter = String.fromCharCode(65 + userAnswerIndex);
                    userAnswerText.textContent = `${optionLetter}) ${question.options[userAnswerIndex]}`;
                } else {
                    userAnswerText.textContent = 'No answer selected';
                }
                
                const userAnswerIcon = document.createElement('span');
                userAnswerIcon.className = 'answer-icon';
                userAnswerIcon.textContent = isCorrect ? '✓' : '✗';
                
                userAnswerDiv.appendChild(userAnswerLabel);
                userAnswerDiv.appendChild(userAnswerText);
                userAnswerDiv.appendChild(userAnswerIcon);
                
                // Correct answer (only show if user was wrong)
                if (!isCorrect) {
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'answer-row correct-answer';
                    
                    const correctAnswerLabel = document.createElement('span');
                    correctAnswerLabel.className = 'answer-label';
                    correctAnswerLabel.textContent = 'Correct:';
                    
                    const correctAnswerText = document.createElement('span');
                    correctAnswerText.className = 'answer-text';
                    const correctOptionLetter = String.fromCharCode(65 + correctAnswerIndex);
                    correctAnswerText.textContent = `${correctOptionLetter}) ${question.options[correctAnswerIndex]}`;
                    
                    const correctAnswerIcon = document.createElement('span');
                    correctAnswerIcon.className = 'answer-icon';
                    correctAnswerIcon.textContent = '✓';
                    
                    correctAnswerDiv.appendChild(correctAnswerLabel);
                    correctAnswerDiv.appendChild(correctAnswerText);
                    correctAnswerDiv.appendChild(correctAnswerIcon);
                    
                    answerComparison.appendChild(userAnswerDiv);
                    answerComparison.appendChild(correctAnswerDiv);
                } else {
                    answerComparison.appendChild(userAnswerDiv);
                }
                
                questionDiv.appendChild(answerComparison);
                reviewContent.appendChild(questionDiv);
            });
        }

        function toggleAnswerReview() {
            const reviewDiv = document.getElementById('answersReview');
            const button = document.querySelector('.toggle-review');
            
            if (reviewDiv.style.display === 'none') {
                reviewDiv.style.display = 'block';
                button.textContent = 'Hide Answer Review';
            } else {
                reviewDiv.style.display = 'none';
                button.textContent = 'Show Answer Review';
            }
        }

        function returnToMenu() {
            // Hide all containers
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const mainMenu = document.getElementById('mainMenu');
            
            if (quizContainer) {
                quizContainer.style.display = 'none';
            }
            if (resultsContainer) {
                resultsContainer.style.display = 'none';
            }
            if (mainMenu) {
                mainMenu.style.display = 'block';
            }
            
            // Reset quiz state
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            // Reset the answer review toggle
            const reviewDiv = document.getElementById('answersReview');
            const toggleButton = document.querySelector('.toggle-review');
            if (reviewDiv) {
                reviewDiv.style.display = 'none';
            }
            if (toggleButton) {
                toggleButton.textContent = 'Show Answer Review';
            }
        }
    </script>
</body>
</html>