<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Trade Unit 4/4a - Codes & Ontario Regulations | TSSA G3 Exam Prep | CSA B149.1-25</title>
    <meta name="description" content="Free Gas Trade Unit 4 and 4a practice questions for TSSA G3 certification. Study CSA B149.1-25 code structure and Ontario Regulation 215/01. Ontario gas technician G3 exam prep.">
    <meta name="keywords" content="TSSA G3 Unit 4, CSA B149.1-25, Ontario Regulation 215/01, TSSA Act, gas code Ontario, G3 certification codes">

    <link rel="stylesheet" href="assets/css/unit-pages-seo.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            text-align: center;
        }

        .logo {
            width: 120px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .education-logo {
            width: 100%;
            height: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .unit4a-button {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }

        .final-exam-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            grid-column: 1 / -1;
            font-size: 18px;
            padding: 25px;
        }

        .quiz-container {
            display: none;
        }

        .quiz-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .quiz-title {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
            text-align: left;
        }

        .answer-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-button {
            background: #6c757d;
            color: white;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .quit-button {
            background: #dc3545;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #00a085); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .score-poor { background: linear-gradient(135deg, #e17055, #d63031); }

        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .results-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .answers-review {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }

        .review-header {
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-review {
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
            margin-bottom: 15px;
        }

        .question-review:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .review-question-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
            text-align: left;
        }

        .answer-comparison {
            display: grid;
            gap: 8px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .user-answer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .user-answer.correct {
            background: #d4edda;
            border: 1px solid #74b816;
            color: #155724;
        }

        .user-answer.incorrect {
            background: #f8d7da;
            border: 1px solid #e74c3c;
            color: #721c24;
        }

        .correct-answer {
            background: #d1ecf1;
            border: 1px solid #74b816;
            color: #0c5460;
        }

        .answer-label {
            font-weight: 600;
            margin-right: 10px;
            min-width: 80px;
        }

        .answer-text {
            flex: 1;
            text-align: left;
        }

        .answer-icon {
            margin-left: 10px;
            font-weight: bold;
        }

        .toggle-review {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .toggle-review:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lark-logo {
            height: 30px;
            width: auto;
        }

        .created-by {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ============================================ -->
        <!-- SEO-OPTIMIZED UNIT HEADER SECTION -->
        <!-- ============================================ -->
        <div class="unit-header-section">
            <!-- Breadcrumb Navigation -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <a href="/">Home</a> &gt;
                <a href="/tssa-g3-exam-prep.html">TSSA G3 Exam Prep</a> &gt;
                <span>Gas Trade Unit 4/4a: Codes & Ontario Regulations</span>
            </nav>

            <!-- Training Navigation Menu -->
            <nav class="training-nav" aria-label="Training navigation">
                <a href="/">🏠 Home</a>
                <a href="/tssa-g3-exam-prep.html">📚 G3 Prep</a>
                <a href="/tssa-g2-exam-prep.html">📘 G2 Prep</a>
                <a href="/tssa-g3-units-index.html">📑 All Units</a>
                <a href="/csa-code-search.html">🔍 Code Search</a>
            </nav>

            <!-- Unit Title and Introduction -->
            <h1>Gas Trade Unit 4 & 4a: Codes & Ontario Regulations</h1>
            <h2 class="unit-subtitle">TSSA G3 Certification - Practice Questions & Chapter Reviews</h2>

            <!-- Certification Level Badge -->
            <div class="certification-badge">
                <strong>📋 Certification Level:</strong> TSSA G3 (Gas Technician 3 - Basic)
            </div>

            <!-- Introduction Text -->
            <p class="lead-text">
                Master Gas Trade Units 4 and 4a with free CSA B149.1-25 compliant practice questions for the TSSA G3 certification exam. These units cover CSA B149.1-25 code structure, Ontario Regulation 215/01, and TSSA Act requirements essential for gas technician work in Ontario.
            </p>

            <!-- Unit Coverage -->
            <div class="unit-coverage-box">
                <h3>📖 What These Units Cover</h3>
                <p>Gas Trade Units 4 and 4a cover the essential codes and regulations governing gas work in Ontario:</p>
                <ul class="chapter-list">
                    <li><strong>Unit 4 - Chapter 1:</strong> CSA Code Structure - Organization, sections, and how to navigate B149.1-25</li>
                    <li><strong>Unit 4 - Chapter 2:</strong> Scope and Definitions - Understanding code applicability and terminology</li>
                    <li><strong>Unit 4 - Chapter 3:</strong> General Requirements - Universal code requirements for gas installations</li>
                    <li><strong>Unit 4a - Chapter 1:</strong> Ontario Regulation 215/01 - Provincial fuel regulations</li>
                    <li><strong>Unit 4a - Chapter 2:</strong> TSSA Act - Technical Standards and Safety Authority requirements</li>
                    <li><strong>Unit 4a - Chapter 3:</strong> Licensing and Certification - G3, G2, G1 certification requirements</li>
                    <li><strong>Unit 4a - Chapter 4:</strong> Inspection and Compliance - TSSA inspection procedures and enforcement</li>
                </ul>
            </div>

            <!-- TSSA Exam Relevance -->
            <div class="exam-relevance-box">
                <h3>🎯 TSSA G3 Exam Relevance</h3>
                <p><strong>CSA Code Reference:</strong> CSA B149.1-25 (All Sections), Ontario Regulation 215/01, TSSA Act</p>
                <p><strong>Exam Coverage:</strong> Code and regulations knowledge appears throughout the entire G3 exam. Approximately 25-30% of questions directly test code knowledge, with additional questions requiring code application.</p>
            </div>

            <!-- Study Tips -->
            <div class="study-tips-box">
                <h3>💡 Study Tips for Units 4 & 4a</h3>
                <ul>
                    <li>Become familiar with navigating the CSA B149.1-25 code structure and section organization</li>
                    <li>Understand the relationship between CSA codes, Ontario regulations, and the TSSA Act</li>
                    <li>Know the certification levels (G3, G2, G1) and their scope of work</li>
                    <li>Study TSSA inspection procedures and compliance requirements</li>
                    <li>Practice using the code to answer scenario-based questions</li>
                </ul>
            </div>
        </div>
        <!-- ============================================ -->
        <!-- END UNIT HEADER SECTION -->
        <!-- ============================================ -->
        <!-- Main Navigation -->
        <div id="mainMenu">
            <div class="logo">
                <svg class="education-logo" viewBox="0 0 1024 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- Educational Theme Logo -->
                    <rect x="50" y="150" width="300" height="300" fill="#1565C0" rx="20"/>
                    <!-- Book/Learning symbol -->
                    <path d="M 100 200 L 300 200 L 300 400 L 100 400 Z" fill="white"/>
                    <path d="M 120 220 L 280 220 M 120 250 L 280 250 M 120 280 L 280 280 M 120 310 L 280 310 M 120 340 L 280 340 M 120 370 L 280 370" stroke="#1565C0" stroke-width="3"/>
                    
                    <!-- Learning Text -->
                    <text x="400" y="280" font-family="Arial, sans-serif" font-size="90" font-weight="bold" fill="#1565C0">LEARNING</text>
                    
                    <!-- Educational Text -->
                    <text x="50" y="550" font-family="Arial, sans-serif" font-size="60" font-weight="bold" fill="#7CB342">EDUCATIONAL RESOURCES</text>
                </svg>
            </div>
            <h1>Unit 4 & 4a - Codes and Regulations</h1>
            <p class="subtitle">Gas Trade Training - Chapter Questions</p>
            
            <!-- Educational Disclaimer -->
            <div style="background: #e74c3c; color: white; border-radius: 10px; padding: 15px; margin: 20px 0; text-align: center; font-size: 14px;">
                <strong>⚠️ Independent Educational Content</strong><br>
                This content is provided by LARK Labs as an independent educational resource. We are not affiliated with CSA Group or any regulatory body. These materials complement official training but do not replace certified instruction.
            </div>
            
            <div class="button-grid">
                <!-- Unit 4 Buttons -->
                <button class="nav-button" onclick="startQuiz('unit4chapter1')">
                    Unit 4 - Chapter 1<br>
                    <small>Utilization Codes, Acts and Regulations</small>
                </button>
                <button class="nav-button" onclick="startQuiz('unit4chapter2')">
                    Unit 4 - Chapter 2<br>
                    <small>Policies Governing Gas Technicians</small>
                </button>
                <button class="nav-button" onclick="startQuiz('unit4chapter3')">
                    Unit 4 - Chapter 3<br>
                    <small>Additional Codes, Acts and Regulations</small>
                </button>
                
                <!-- Unit 4a Buttons -->
                <button class="nav-button unit4a-button" onclick="startQuiz('unit4achapter1')">
                    Unit 4a - Chapter 1<br>
                    <small>Laws Governing the Gas Industry</small>
                </button>
                <button class="nav-button unit4a-button" onclick="startQuiz('unit4achapter2')">
                    Unit 4a - Chapter 2<br>
                    <small>Technical Standards and Safety Act</small>
                </button>
                <button class="nav-button unit4a-button" onclick="startQuiz('unit4achapter3')">
                    Unit 4a - Chapter 3<br>
                    <small>Ontario Supplement - Regulations</small>
                </button>
                <button class="nav-button unit4a-button" onclick="startQuiz('unit4achapter4')">
                    Unit 4a - Chapter 4<br>
                    <small>Reading and Interpreting the Code</small>
                </button>
                
                <!-- Final Exams -->
                <button class="nav-button final-exam-button" onclick="startQuiz('unit4finalExam')">
                    Unit 4 Final Exam<br>
                    <small>Codes, Acts and Regulations</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('unit4aFinalExam')">
                    Unit 4a Final Exam<br>
                    <small>Ontario Supplement</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('comprehensiveExam')">
                    Comprehensive Final Exam<br>
                    <small>Units 4 & 4a Combined</small>
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <h2 id="quizTitle" class="quiz-title"></h2>
                <div id="progressInfo"></div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="questionCard" class="question-card">
                <div id="questionNumber" class="question-number"></div>
                <div id="questionText" class="question-text"></div>
                <div id="answerOptions"></div>
            </div>

            <div class="quiz-controls">
                <button id="prevButton" class="control-button prev-button" onclick="previousQuestion()">Previous</button>
                <button id="quitButton" class="control-button quit-button">Quit Quiz</button>
                <button id="nextButton" class="control-button next-button" onclick="nextQuestion()">Next</button>
            </div>

            <!-- Footer for Quiz -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- HVAC Unit Main Body -->
                        <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                        
                        <!-- Fan/Blower Circle -->
                        <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                        <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                        <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                        
                        <!-- Fan Blades -->
                        <g transform="translate(90,80)">
                            <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                            <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                        </g>
                        
                        <!-- Control Panel Lines -->
                        <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                        <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                        <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                        <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                        
                        <!-- Status Light -->
                        <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                        
                        <!-- Unit Feet -->
                        <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        
                        <!-- LARK text -->
                        <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                        <!-- Subtitle -->
                        <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="results-container">
            <div id="scoreCircle" class="score-circle">
                <span id="scorePercentage"></span>
            </div>
            <h2 class="results-title">Quiz Complete!</h2>
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span id="totalQuestions"></span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span id="correctAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span id="incorrectAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Final Score:</span>
                    <span id="finalScore"></span>
                </div>
            </div>
            
            <button class="toggle-review" onclick="toggleAnswerReview()">Show Answer Review</button>
            
            <div id="answersReview" class="answers-review" style="display: none;">
                <div class="review-header">Answer Review</div>
                <div id="reviewContent"></div>
            </div>
            
            <button class="control-button next-button" onclick="returnToMenu()">Return to Menu</button>

            <!-- Footer for Results -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- HVAC Unit Main Body -->
                        <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                        
                        <!-- Fan/Blower Circle -->
                        <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                        <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                        <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                        
                        <!-- Fan Blades -->
                        <g transform="translate(90,80)">
                            <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                            <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                        </g>
                        
                        <!-- Control Panel Lines -->
                        <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                        <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                        <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                        <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                        
                        <!-- Status Light -->
                        <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                        
                        <!-- Unit Feet -->
                        <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        
                        <!-- LARK text -->
                        <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                        <!-- Subtitle -->
                        <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <span class="created-by">Created by</span>
                <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- HVAC Unit Main Body -->
                    <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                    
                    <!-- Fan/Blower Circle -->
                    <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                    <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                    <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                    
                    <!-- Fan Blades -->
                    <g transform="translate(90,80)">
                        <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                        <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                    </g>
                    
                    <!-- Control Panel Lines -->
                    <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                    <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                    <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                    <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                    
                    <!-- Status Light -->
                    <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                    
                    <!-- Unit Feet -->
                    <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                    <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                    
                    <!-- LARK text -->
                    <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                    <!-- LABS text -->
                    <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                    <!-- Subtitle -->
                    <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Quiz data based on CSA Unit 4 and 4a materials
        const quizData = {
            unit4chapter1: {
                title: "Unit 4 - Chapter 1: Utilization Codes, Acts and Regulations",
                questions: [
                    {
                        question: "Match the definition: Acceptable to the authority having jurisdiction",
                        options: ["Approved", "Certified", "Validated", "Authorized"],
                        correct: 0
                    },
                    {
                        question: "A primarily vertical shaft that encloses at least one flue for conducting flue gases outdoors is called a:",
                        options: ["Vent", "Chimney", "Stack", "Flue pipe"],
                        correct: 1
                    },
                    {
                        question: "An appliance constructed so that all the combustion air is supplied directly from, and the products of combustion are vented directly to, the outdoors by independent enclosed passageways connected directly to the appliance is called a:",
                        options: ["Natural-vent appliance", "Direct-vent appliance", "Power-vent appliance", "Fan-assisted appliance"],
                        correct: 1
                    },
                    {
                        question: "A device, either adjustable or non-adjustable, for controlling and maintaining, within acceptable limits, a uniform outlet pressure is called a:",
                        options: ["Flow controller", "Pressure regulator", "Gas valve", "Shut-off valve"],
                        correct: 1
                    },
                    {
                        question: "True or False: A venting system removes flue gases to the outdoors by means of a chimney, vent connector vent, or a natural or mechanical exhaust system.",
                        options: ["True", "False"],
                        correct: 0
                    },
                    {
                        question: "Which of the following describes a continuous pilot?",
                        options: [
                            "A pilot that is automatically lighted each time there is a call for heat, and that is cut off automatically at the end of the trial-for-ignition period of the main burner",
                            "A pilot that burns without turndown throughout the entire time the burner is in service, whether the main burner is firing or not",
                            "A pilot that is automatically lighted each time there is a call for heat, and that burns during the entire period that the main burner is firing"
                        ],
                        correct: 1
                    },
                    {
                        question: "True or False: An enclosed structure is the entire building in which an appliance is installed.",
                        options: ["True", "False"],
                        correct: 1
                    },
                    {
                        question: "What type of burner is not equipped with a mechanical device for supplying combustion air?",
                        options: ["Forced-draft burner", "Fan-assisted burner", "Natural-draft burner"],
                        correct: 2
                    },
                    {
                        question: "What is the maximum gas pressure (in psig) permitted inside one- and two-family dwellings and row housing?",
                        options: ["2 psi (14kPa)", "5 psig (35 kPa)", "20 psig (140 kPa)", "66 psig (450 kPa)"],
                        correct: 0
                    },
                    {
                        question: "Where can you determine the volume of gas to be used for sizing pipe systems to an appliance?",
                        options: [
                            "The appliance rating plate or the appliance manufacturer",
                            "The back of the Codebook",
                            "In the Regulation"
                        ],
                        correct: 0
                    },
                    {
                        question: "According to Table 6.1, what is the maximum allowable pressure drop when a natural gas piping and tubing system supply pressure is less than 7 inches w.c.?",
                        options: [
                            "1 inch w.c. (0.250 kPa)",
                            "There is no maximum allowable pressure drop",
                            "0.5 inches w.c. (0.125 kPa)"
                        ],
                        correct: 2
                    },
                    {
                        question: "Can a gas pipe be supported by another gas pipe?",
                        options: [
                            "Yes, if it is a smaller diameter",
                            "Yes, if it is a larger diameter",
                            "No"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the minimum depth of cover required on an underground gas line for residential installations?",
                        options: ["12 inches (300 mm)", "15 inches (400 mm)", "18 inches (450 mm)", "24 inches (610 mm)"],
                        correct: 1
                    },
                    {
                        question: "Can gas piping be passed under a building?",
                        options: [
                            "Yes, if it is at least 24 inches (610 mm) below the footings",
                            "Yes, if it is at least 15 inches (400 mm) below the footings",
                            "No"
                        ],
                        correct: 2
                    },
                    {
                        question: "When piping is extended from one building to another, where must the shut-off valves be located?",
                        options: [
                            "At the point of exit of the first building and the point of entry of the second building",
                            "At the appliance",
                            "At the meter"
                        ],
                        correct: 0
                    }
                ]
            },
            unit4chapter2: {
                title: "Unit 4 - Chapter 2: Policies Governing Gas Technicians/Fitters' Scope of Responsibilities and Limitations",
                questions: [
                    {
                        question: "This chapter covers policies that vary by province and jurisdiction. Questions would be customized based on local regulations, bulletins, and acts for your specific area.",
                        options: [
                            "Understood - local regulations apply",
                            "Questions need regional customization",
                            "Contact local authority for specific requirements"
                        ],
                        correct: 0
                    }
                ]
            },
            unit4chapter3: {
                title: "Unit 4 - Chapter 3: Additional Codes, Acts and Regulations",
                questions: [
                    {
                        question: "Where would you find requirements governing the construction of chimneys?",
                        options: [
                            "Applicable UL Canada Standard",
                            "Applicable CSA Group Standard",
                            "National Energy Code of Canada for Buildings (NECB)",
                            "National Building Code of Canada (NBCC)"
                        ],
                        correct: 3
                    },
                    {
                        question: "What Code would you refer to for information on the electrical circuits of gas-fired equipment?",
                        options: [
                            "CSA B149.1",
                            "Canadian Electrical Code, Part I",
                            "CSA B149.3",
                            "National Energy Code of Canada for Buildings (NECB)"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which regulation describes the legal requirements of employers and suppliers of hazardous materials?",
                        options: [
                            "Occupational Health and Safety Act",
                            "Occupational Health and Safety Code",
                            "WHMIS 2015",
                            "Provincial Safety Authority"
                        ],
                        correct: 2
                    },
                    {
                        question: "Who publishes the standard Installation Requirements for Gas-burning Appliances in Manufactured Homes?",
                        options: [
                            "CSA Group",
                            "Provincial Safety Authority",
                            "UL Canada",
                            "Standards Council of Canada (SCC)"
                        ],
                        correct: 0
                    }
                ]
            },
            unit4achapter1: {
                title: "Unit 4a - Chapter 1: Laws Governing the Gas Industry and Due Diligence",
                questions: [
                    {
                        question: "What do the letters 'TSSA' stand for?",
                        options: [
                            "Technical Safety and Standards Authority",
                            "Technical Standards and Safety Association",
                            "Technical Standards and Safety Authority",
                            "Technical Safety and Standards Association"
                        ],
                        correct: 2
                    },
                    {
                        question: "Name the title (including date) of the Code that deals with propane storage and handling that is currently accepted into law in Ontario.",
                        options: [
                            "CSA B149.2-15 Propane Storage and Handling Code",
                            "CSA B149.1-15 Natural Gas and Propane Installation Code",
                            "CAN/CSA-B149.3-15 Code for the Field Approval of Fuel-Related Components on Appliances and Equipment"
                        ],
                        correct: 0
                    },
                    {
                        question: "What legal document is the least specific but contains the most powerful set of rules?",
                        options: ["A Regulation", "An Act", "A Code"],
                        correct: 1
                    },
                    {
                        question: "What regulates Manufacturer's instructions?",
                        options: ["The Act", "Standards", "Regulations", "Codes"],
                        correct: 1
                    },
                    {
                        question: "Correctly complete the following sentence: Codes provide ____________________.",
                        options: [
                            "general principles, duties, and responsibilities, as well as define the administrative powers for monitoring, enforcing, and creating regulations",
                            "specific information on materials or components that you can use and how you are to use and test them",
                            "general requirements and directions on what can be used and how to use it"
                        ],
                        correct: 2
                    },
                    {
                        question: "Does TSSA have regulatory authority over the safety of both natural gas and propane?",
                        options: ["Yes", "No"],
                        correct: 0
                    },
                    {
                        question: "Are the appliance manufacturer's installation instructions legal documents?",
                        options: ["Yes", "No"],
                        correct: 0
                    },
                    {
                        question: "Is TSSA a part of the government?",
                        options: ["Yes", "No"],
                        correct: 1
                    },
                    {
                        question: "_____________ allows TSSA to accept and amend codes and standards without a regulatory change.",
                        options: [
                            "Technical Standards and Safety Act",
                            "Regulation 215/01 Fuel Industry Certificates",
                            "Regulation 223/01 Codes and Standards Adopted by Reference",
                            "Regulation 211/01 Propane Storage and Handling"
                        ],
                        correct: 2
                    },
                    {
                        question: "Who does TSSA report to?",
                        options: [
                            "Ministry of Government and Consumer Services (MGCS)",
                            "Ministry of Energy (ME)",
                            "The Attorney General",
                            "Their shareholders"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of the following best describes due diligence?",
                        options: [
                            "Knowing and Understanding all of the Regulations before working in the industry",
                            "Knowing who the local TSSA Inspector is and advising him/her of ongoing work",
                            "Actions that are reasonable in the circumstances expected from a reasonable person"
                        ],
                        correct: 2
                    }
                ]
            },
            unit4achapter2: {
                title: "Unit 4a - Chapter 2: The Technical Standards and Safety Act, 2000",
                questions: [
                    {
                        question: "What is the maximum fine that can be charged against a corporate body that is found guilty of obstructing an inspector?",
                        options: ["$1,000,000", "$100,000", "There is no maximum"],
                        correct: 2
                    },
                    {
                        question: "How can one recognize an inspector?",
                        options: [
                            "By their TSSA jacket",
                            "By their inspectors' certificate",
                            "By their identification badge or card"
                        ],
                        correct: 2
                    },
                    {
                        question: "Who has the authority to issue an Order banning the use of an unsafe gas appliance model?",
                        options: ["An inspector", "A regional manager", "A director", "A service technician"],
                        correct: 2
                    },
                    {
                        question: "Who has the authority to remove a suspected faulty gas valve and take it away for further examination?",
                        options: ["A private investigator", "An inspector", "An engineer", "A service technician"],
                        correct: 1
                    },
                    {
                        question: "Name the Ontario Act directly related to safety and standards within the fuels industry.",
                        options: [
                            "Technical Standards and Safety Act, 2000",
                            "The Energy Act",
                            "Occupational Health and Safety Act (OHSA)"
                        ],
                        correct: 0
                    },
                    {
                        question: "Can someone, other than a certificate holder, service gas equipment if under the direct supervision of a certificate holder?",
                        options: ["Yes, as long as it is inspected before activation", "No"],
                        correct: 1
                    },
                    {
                        question: "True or False: In addition to the gas technician's responsibilities to acquire training prior to conducting work, the gas technician's employer also shares this responsibility.",
                        options: ["True", "False"],
                        correct: 0
                    },
                    {
                        question: "Who has the authority to seal off an appliance?",
                        options: ["A technician", "An Engineer", "An inspector"],
                        correct: 2
                    },
                    {
                        question: "Who is the designated administrative authority in the province of Ontario?",
                        options: [
                            "Technical Standards and Safety Authority (TSSA)",
                            "The Fuels Safety Branch",
                            "Ontario Ministry of Government and Consumer Services (MGCS)"
                        ],
                        correct: 0
                    },
                    {
                        question: "The term _____________ can refer to a person's certificate, identification, license or registration.",
                        options: ["Documentation", "Authorization", "Credentials", "Permit"],
                        correct: 1
                    }
                ]
            },
            unit4achapter3: {
                title: "Unit 4a - Chapter 3: Ontario Supplement - Regulations",
                questions: [
                    {
                        question: "What is one correct action that a holder of a certificate or ROT must take if he or she finds that an appliance is in an unacceptable condition but does not constitute an immediate hazard? (Notice to distributor)",
                        options: [
                            "Immediately give written notice",
                            "Immediately give oral notice",
                            "Within 5 business days send a registered letter with return receipt",
                            "Ask the user of the appliance to shut off the gas and have them provide details"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is one correct action that a holder of a certificate or ROT must take if he or she finds that an appliance is in an unacceptable condition but does not constitute an immediate hazard? (Notice to user)",
                        options: [
                            "Immediately give oral notice",
                            "Within 14 calendar days send a registered letter with return receipt",
                            "Within 5 business days send a registered letter with return receipt",
                            "Immediately give written notice"
                        ],
                        correct: 3
                    },
                    {
                        question: "What must be done with the appliance when an unacceptable condition is found that does not constitute an immediate hazard?",
                        options: [
                            "Shut off the supply of gas and affix a notice",
                            "Call the appliance user then affix a notice",
                            "Affix a warning label",
                            "Affix a notice"
                        ],
                        correct: 3
                    },
                    {
                        question: "Who is authorized to work on liquid propane systems?",
                        options: [
                            "Gas technician 3 (G.3 certificate holder)",
                            "Liquid propane fitter (LP certificate holder)",
                            "Gas technician 2 (G.2 certificate holder)",
                            "Gas piping fitter (GP certificate holder)"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is one step a certificate holder does when it appears that there has been a CO poisoning incident?",
                        options: [
                            "Immediately shut off the supply of gas to the appliance or work",
                            "Immediately ask the gas supplier to shut off the supply of gas to the appliance or work",
                            "Immediately ask the user of the appliance to contact the gas supplier to shut off the supply of gas to the appliance or work",
                            "Immediately call the local fire department of the municipality to shut off the supply of gas to the appliance or work"
                        ],
                        correct: 0
                    },
                    {
                        question: "How does one identify an appliance that has been approved?",
                        options: [
                            "On the appliance is a recognized certification mark or TSSA Field Approval label",
                            "If it is sold in Canada it is considered approved and no mark is required",
                            "It has an Energy rating label affixed",
                            "Look up on Standard Council of Canada web site for the most current list of appliances approved for sale in Canada"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the certificate that has as its main focus the installation of gas piping and tubing systems?",
                        options: [
                            "Gas technician 3 (G.3 certificate)",
                            "Gas technician 2 (G.2 certificate)",
                            "A gas piping fitter (GP certificate)",
                            "Gas technician 1 (G.1 certificate)"
                        ],
                        correct: 2
                    },
                    {
                        question: "What must be done before an appliance is activated in a building that has just been connected to natural gas for the first time?",
                        options: [
                            "A provincial fuels inspector must first examine the installation of the appliance and be satisfied that the installation and use of the appliance are in compliance with the Regulation",
                            "The distributor must first examine the installation of the appliance and be satisfied that the installation and use of the appliance are in compliance with the Regulation",
                            "The installer's direct supervisor must first examine the installation of the appliance and be satisfied that the installation and use of the appliance are in compliance with the Regulation",
                            "The installer's general supervisor must first examine the installation of the appliance and be satisfied that the installation and use of the appliance are in compliance with the Regulation"
                        ],
                        correct: 1
                    },
                    {
                        question: "Who can remove a 'DO NOT USE' notice that has been affixed to an appliance?",
                        options: ["Owner", "Distributor", "User", "Regulator", "Certificate holder"],
                        correct: 4
                    }
                ]
            },
            unit4achapter4: {
                title: "Unit 4a - Chapter 4: Ontario Supplement - Reading and Interpreting the Code",
                questions: [
                    {
                        question: "Are the provisions outlined in a CSA B149 Annex mandatory?",
                        options: ["Yes", "No", "Sometimes"],
                        correct: 1
                    },
                    {
                        question: "Explain why a '∆' appears in the margin of some of the clauses contained in the CSA B149 Codes.",
                        options: [
                            "Those clauses are not mandatory",
                            "Those clauses are under review",
                            "Those clauses are new or significantly different from the previous edition of the subject Code"
                        ],
                        correct: 2
                    },
                    {
                        question: "What Code requirements apply to an installation where the appliance was installed many years ago?",
                        options: [
                            "The requirements that were in effect at the time of the installation",
                            "The most current requirements"
                        ],
                        correct: 0
                    },
                    {
                        question: "What CSA B149 Code contains requirements for propane appliances in recreational vehicles?",
                        options: [
                            "CSA B149.1-15 Natural Gas and Propane Installation Code",
                            "CSA B149.2-15, Propane Storage and Handling Code",
                            "CAN/CSA-B149.3-15 Code for the Field Approval of Fuel-Related Components on Appliances and Equipment"
                        ],
                        correct: 1
                    },
                    {
                        question: "Who should be consulted if there appears to be a conflict between governing Acts, Regulations, or Codes?",
                        options: [
                            "Technical Standards and Safety Authority (TSSA)",
                            "Ministry of Labour (MOL)",
                            "Ontario Ministry of Government and Consumer Services (MGCS)",
                            "The applicable authority(ies) having jurisdiction"
                        ],
                        correct: 3
                    },
                    {
                        question: "What does 'Shall' indicate in CSA B149 codes?",
                        options: [
                            "A recommendation",
                            "A mandatory requirement",
                            "An optional statement",
                            "Advisory information"
                        ],
                        correct: 1
                    },
                    {
                        question: "What does 'May' indicate in CSA B149 codes?",
                        options: [
                            "A mandatory requirement",
                            "An advisory or optional statement",
                            "A recommendation",
                            "Required compliance"
                        ],
                        correct: 1
                    },
                    {
                        question: "True or False: The CSA B149.1 Natural Gas and Propane Installation Code is the minimum standard when applied to installations?",
                        options: ["True", "False"],
                        correct: 0
                    },
                    {
                        question: "Name the section of the CSA B149.1 Natural Gas and Propane Installation Code that applies to piping and tubing.",
                        options: ["Section 5", "Section 7", "Section 6", "Section 8"],
                        correct: 2
                    },
                    {
                        question: "What does Annex H refer to in the CSA B149.1 Natural Gas and Propane Installation Code?",
                        options: [
                            "Purging of piping and tubing systems where a readily accessible burner is not available or where an appliance is not equipped with a continuous pilot",
                            "Piping expansion and flexibility",
                            "Sizing and capacities of piping and tubing for propane",
                            "Vent sizing tables for Category I natural gas and propane appliances"
                        ],
                        correct: 0
                    }
                ]
            },
            unit4finalExam: {
                title: "Unit 4 Final Exam - Codes, Acts and Regulations",
                questions: [
                    {
                        question: "A primarily vertical shaft that encloses at least one flue for conducting flue gases outdoors is called a:",
                        options: ["Vent", "Chimney", "Stack", "Flue pipe"],
                        correct: 1
                    },
                    {
                        question: "Which of the following describes a continuous pilot?",
                        options: [
                            "A pilot that is automatically lighted each time there is a call for heat, and that is cut off automatically at the end of the trial-for-ignition period of the main burner",
                            "A pilot that burns without turndown throughout the entire time the burner is in service, whether the main burner is firing or not",
                            "A pilot that is automatically lighted each time there is a call for heat, and that burns during the entire period that the main burner is firing"
                        ],
                        correct: 1
                    },
                    {
                        question: "What type of burner is not equipped with a mechanical device for supplying combustion air?",
                        options: ["Forced-draft burner", "Fan-assisted burner", "Natural-draft burner"],
                        correct: 2
                    },
                    {
                        question: "What is the maximum gas pressure (in psig) permitted inside commercial buildings?",
                        options: ["2 psi (14kPa)", "5 psig (35 kPa)", "20 psig (140 kPa)", "66 psig (450 kPa)"],
                        correct: 2
                    },
                    {
                        question: "Can a gas pipe be supported by another gas pipe?",
                        options: [
                            "Yes, if it is a smaller diameter",
                            "Yes, if it is a larger diameter",
                            "No"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the minimum clearance required for each side of a commercial clothes dryer and the combustible material?",
                        options: ["12 inches (300 mm)", "18 inches (450 mm)", "48 inches (1200 mm)", "24 inches (610 mm)"],
                        correct: 1
                    },
                    {
                        question: "What type of room heater is allowed in a bathroom?",
                        options: ["Direct-vent type", "Ventless", "Electric only"],
                        correct: 0
                    },
                    {
                        question: "Where would you find requirements governing the construction of chimneys?",
                        options: [
                            "Applicable UL Canada Standard",
                            "Applicable CSA Group Standard",
                            "National Energy Code of Canada for Buildings (NECB)",
                            "National Building Code of Canada (NBCC)"
                        ],
                        correct: 3
                    },
                    {
                        question: "What Code would you refer to for information on the electrical circuits of gas-fired equipment?",
                        options: [
                            "CSA B149.1",
                            "Canadian Electrical Code, Part I",
                            "CSA B149.3",
                            "National Energy Code of Canada for Buildings (NECB)"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which regulation describes the legal requirements of employers and suppliers of hazardous materials?",
                        options: [
                            "Occupational Health and Safety Act",
                            "Occupational Health and Safety Code",
                            "WHMIS 2015",
                            "Provincial Safety Authority"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the maximum permitted filling density of a propane cylinder?",
                        options: ["65%", "100%", "80%", "90%"],
                        correct: 2
                    },
                    {
                        question: "May a vehicle that is being refuelled with natural gas have its engine running?",
                        options: ["Yes, provided it is 25 feet from a building", "No"],
                        correct: 1
                    },
                    {
                        question: "What is the minimum service clearance surrounding an appliance?",
                        options: ["18 inches", "24 inches", "12 inches", "36 inches"],
                        correct: 1
                    },
                    {
                        question: "If there is a conflict between the manufacturer's certified installation instructions and the Codebook, which requirements are to be followed?",
                        options: ["The Code", "The manufacturer's instructions", "Either requirement can be followed"],
                        correct: 0
                    },
                    {
                        question: "What are the minimum dimensions of an access opening to a space containing a gas appliance?",
                        options: [
                            "24 × 30 in (610 × 760 mm)",
                            "18 x 18 in (450 x 450 mm)",
                            "30 x 30 in (760 x 760 mm)",
                            "24 x 24 in (610 x 610 mm)"
                        ],
                        correct: 0
                    }
                ]
            },
            unit4aFinalExam: {
                title: "Unit 4a Final Exam - Ontario Supplement",
                questions: [
                    {
                        question: "What do the letters 'TSSA' stand for?",
                        options: [
                            "Technical Safety and Standards Authority",
                            "Technical Standards and Safety Association",
                            "Technical Standards and Safety Authority",
                            "Technical Safety and Standards Association"
                        ],
                        correct: 2
                    },
                    {
                        question: "What legal document is the least specific but contains the most powerful set of rules?",
                        options: ["A Regulation", "An Act", "A Code"],
                        correct: 1
                    },
                    {
                        question: "Does TSSA have regulatory authority over the safety of both natural gas and propane?",
                        options: ["Yes", "No"],
                        correct: 0
                    },
                    {
                        question: "What is the maximum fine that can be charged against a corporate body that is found guilty of obstructing an inspector?",
                        options: ["$1,000,000", "$100,000", "There is no maximum"],
                        correct: 2
                    },
                    {
                        question: "Who has the authority to issue an Order banning the use of an unsafe gas appliance model?",
                        options: ["An inspector", "A regional manager", "A director", "A service technician"],
                        correct: 2
                    },
                    {
                        question: "Who is authorized to work on liquid propane systems?",
                        options: [
                            "Gas technician 3 (G.3 certificate holder)",
                            "Liquid propane fitter (LP certificate holder)",
                            "Gas technician 2 (G.2 certificate holder)",
                            "Gas piping fitter (GP certificate holder)"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is one step a certificate holder does when it appears that there has been a CO poisoning incident?",
                        options: [
                            "Immediately shut off the supply of gas to the appliance or work",
                            "Immediately ask the gas supplier to shut off the supply of gas to the appliance or work",
                            "Immediately ask the user of the appliance to contact the gas supplier to shut off the supply of gas to the appliance or work",
                            "Immediately call the local fire department of the municipality to shut off the supply of gas to the appliance or work"
                        ],
                        correct: 0
                    },
                    {
                        question: "How does one identify an appliance that has been approved?",
                        options: [
                            "On the appliance is a recognized certification mark or TSSA Field Approval label",
                            "If it is sold in Canada it is considered approved and no mark is required",
                            "It has an Energy rating label affixed",
                            "Look up on Standard Council of Canada web site for the most current list of appliances approved for sale in Canada"
                        ],
                        correct: 0
                    },
                    {
                        question: "Are the provisions outlined in a CSA B149 Annex mandatory?",
                        options: ["Yes", "No", "Sometimes"],
                        correct: 1
                    },
                    {
                        question: "What Code requirements apply to an installation where the appliance was installed many years ago?",
                        options: [
                            "The requirements that were in effect at the time of the installation",
                            "The most current requirements"
                        ],
                        correct: 0
                    },
                    {
                        question: "What does 'Shall' indicate in CSA B149 codes?",
                        options: [
                            "A recommendation",
                            "A mandatory requirement",
                            "An optional statement",
                            "Advisory information"
                        ],
                        correct: 1
                    },
                    {
                        question: "True or False: The CSA B149.1 Natural Gas and Propane Installation Code is the minimum standard when applied to installations?",
                        options: ["True", "False"],
                        correct: 0
                    },
                    {
                        question: "Name the section of the CSA B149.1 Natural Gas and Propane Installation Code that applies to piping and tubing.",
                        options: ["Section 5", "Section 7", "Section 6", "Section 8"],
                        correct: 2
                    },
                    {
                        question: "Who can remove a 'DO NOT USE' notice that has been affixed to an appliance?",
                        options: ["Owner", "Distributor", "User", "Regulator", "Certificate holder"],
                        correct: 4
                    },
                    {
                        question: "The term _____________ can refer to a person's certificate, identification, license or registration.",
                        options: ["Documentation", "Authorization", "Credentials", "Permit"],
                        correct: 1
                    }
                ]
            },
            comprehensiveExam: {
                title: "Comprehensive Final Exam - Units 4 & 4a Combined",
                questions: []
            }
        };

        // Create comprehensive exam by combining all questions and randomizing
        function createComprehensiveExam() {
            const allQuestions = [];
            
            // Collect all questions from all chapters
            Object.keys(quizData).forEach(quizKey => {
                if (quizKey !== 'comprehensiveExam') {
                    quizData[quizKey].questions.forEach(question => {
                        allQuestions.push({
                            ...question,
                            source: quizData[quizKey].title
                        });
                    });
                }
            });
            
            // Shuffle the questions
            const shuffled = shuffleArray([...allQuestions]);
            
            // Take a representative sample (50 questions max for reasonable exam length)
            const examQuestions = shuffled.slice(0, Math.min(50, shuffled.length));
            
            quizData.comprehensiveExam.questions = examQuestions;
        }

        // Shuffle array function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Initialize comprehensive exam
        createComprehensiveExam();

        // Quiz state
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function startQuiz(quizType) {
            currentQuiz = { ...quizData[quizType] };
            
            // Randomize questions for better practice
            currentQuiz.questions = shuffleArray([...currentQuiz.questions]);
            
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';

            document.getElementById('quizTitle').textContent = currentQuiz.title;
            
            // Set up quit button event listener
            const quitButton = document.getElementById('quitButton');
            if (quitButton) {
                quitButton.onclick = function() {
                    returnToMenu();
                };
            }
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressInfo').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            
            // Show question
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Show options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option';
                button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                button.onclick = () => selectAnswer(index);
                
                // Restore previous selection
                if (userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').textContent = 
                currentQuestionIndex === totalQuestions - 1 ? 'Finish Quiz' : 'Next';
        }

        function selectAnswer(answerIndex) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuiz.questions.length; i++) {
                if (userAnswers[i] === currentQuiz.questions[i].correct) {
                    score++;
                }
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('incorrectAnswers').textContent = totalQuestions - score;
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set score circle color based on performance
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
            } else if (percentage >= 80) {
                scoreCircle.classList.add('score-good');
            } else if (percentage >= 70) {
                scoreCircle.classList.add('score-fair');
            } else {
                scoreCircle.classList.add('score-poor');
            }
            
            // Generate answer review
            generateAnswerReview();
        }

        function generateAnswerReview() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            
            currentQuiz.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-review';
                
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = question.correct;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question-text';
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionDiv.appendChild(questionText);
                
                // Answer comparison
                const answerComparison = document.createElement('div');
                answerComparison.className = 'answer-comparison';
                
                // User's answer
                const userAnswerDiv = document.createElement('div');
                userAnswerDiv.className = `answer-row user-answer ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const userAnswerLabel = document.createElement('span');
                userAnswerLabel.className = 'answer-label';
                userAnswerLabel.textContent = 'Your answer:';
                
                const userAnswerText = document.createElement('span');
                userAnswerText.className = 'answer-text';
                
                if (userAnswerIndex !== undefined) {
                    const optionLetter = String.fromCharCode(65 + userAnswerIndex);
                    userAnswerText.textContent = `${optionLetter}) ${question.options[userAnswerIndex]}`;
                } else {
                    userAnswerText.textContent = 'No answer selected';
                }
                
                const userAnswerIcon = document.createElement('span');
                userAnswerIcon.className = 'answer-icon';
                userAnswerIcon.textContent = isCorrect ? '✓' : '✗';
                
                userAnswerDiv.appendChild(userAnswerLabel);
                userAnswerDiv.appendChild(userAnswerText);
                userAnswerDiv.appendChild(userAnswerIcon);
                
                // Correct answer (only show if user was wrong)
                if (!isCorrect) {
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'answer-row correct-answer';
                    
                    const correctAnswerLabel = document.createElement('span');
                    correctAnswerLabel.className = 'answer-label';
                    correctAnswerLabel.textContent = 'Correct:';
                    
                    const correctAnswerText = document.createElement('span');
                    correctAnswerText.className = 'answer-text';
                    const correctOptionLetter = String.fromCharCode(65 + correctAnswerIndex);
                    correctAnswerText.textContent = `${correctOptionLetter}) ${question.options[correctAnswerIndex]}`;
                    
                    const correctAnswerIcon = document.createElement('span');
                    correctAnswerIcon.className = 'answer-icon';
                    correctAnswerIcon.textContent = '✓';
                    
                    correctAnswerDiv.appendChild(correctAnswerLabel);
                    correctAnswerDiv.appendChild(correctAnswerText);
                    correctAnswerDiv.appendChild(correctAnswerIcon);
                    
                    answerComparison.appendChild(userAnswerDiv);
                    answerComparison.appendChild(correctAnswerDiv);
                } else {
                    answerComparison.appendChild(userAnswerDiv);
                }
                
                questionDiv.appendChild(answerComparison);
                reviewContent.appendChild(questionDiv);
            });
        }

        function toggleAnswerReview() {
            const reviewDiv = document.getElementById('answersReview');
            const button = document.querySelector('.toggle-review');
            
            if (reviewDiv.style.display === 'none') {
                reviewDiv.style.display = 'block';
                button.textContent = 'Hide Answer Review';
            } else {
                reviewDiv.style.display = 'none';
                button.textContent = 'Show Answer Review';
            }
        }

        function returnToMenu() {
            // Hide all containers
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const mainMenu = document.getElementById('mainMenu');
            
            if (quizContainer) {
                quizContainer.style.display = 'none';
            }
            if (resultsContainer) {
                resultsContainer.style.display = 'none';
            }
            // Show main menu
            if (mainMenu) {
                mainMenu.style.display = 'block';
            }
            
            // Reset quiz state
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            // Reset the answer review toggle
            const reviewDiv = document.getElementById('answersReview');
            const toggleButton = document.querySelector('.toggle-review');
            if (reviewDiv) {
                reviewDiv.style.display = 'none';
            }
            if (toggleButton) {
                toggleButton.textContent = 'Show Answer Review';
            }
        }
    </script>

    <!-- ============================================ -->
    <!-- SEO-OPTIMIZED UNIT FOOTER SECTION -->
    <!-- ============================================ -->
    <div class="unit-footer-sections">
        <!-- Related Units Section -->
        <section class="related-units">
            <h3>📖 Related Gas Trade Training Units</h3>
            <div class="related-units-grid">
                <!-- Previous Unit -->
                <div class="related-unit-card">
                    <h4>← Previous Unit</h4>
                    <a href="/CSA_Unit_3_Chapter_Reviews.html">Unit 3: Venting & Combustion Air</a>
                    <p>Review venting systems and combustion air requirements</p>
                </div>

                <!-- Next Unit -->
                <div class="related-unit-card">
                    <h4>Next Unit →</h4>
                    <a href="/CSA_Unit_5_Electricity_Chapter_Reviews.html">Unit 5: Basic Electricity</a>
                    <p>Learn about electrical systems and requirements for gas installations</p>
                </div>

                <!-- Related Unit -->
                <div class="related-unit-card">
                    <h4>🔗 Related</h4>
                    <a href="/tssa-g3-units-index.html">All G3 Units</a>
                    <p>Code knowledge applies to all aspects of gas technician work</p>
                </div>
            </div>
        </section>

        <!-- Next Steps CTA Section -->
        <section class="next-steps">
            <h3>🚀 Next Steps in Your TSSA G3 Preparation</h3>
            <div class="cta-grid">
                <div class="cta-card">
                    <h4>📚 Complete All G3 Units</h4>
                    <p>Work through all 9 Gas Trade units to ensure comprehensive G3 exam readiness.</p>
                    <a href="/tssa-g3-units-index.html" class="cta-button">View All G3 Units →</a>
                </div>

                <div class="cta-card">
                    <h4>📖 Study CSA B149.1-25 Code</h4>
                    <p>Access the official CSA B149.1-25 code and deepen your understanding of gas installation standards.</p>
                    <a href="/csa-code-search.html" class="cta-button">Search CSA Codes →</a>
                </div>

                <div class="cta-card">
                    <h4>🤖 Try AI-Powered Study Tools</h4>
                    <p>Get instant answers to your gas technician questions with our AI tutor trained on CSA codes.</p>
                    <a href="/gas-technician-ai-tutor.html" class="cta-button">Launch AI Tutor →</a>
                </div>
            </div>
        </section>

        <!-- Study Resources Section -->
        <section class="study-resources">
            <h3>📚 Additional G3 Study Resources</h3>
            <ul class="resource-links">
                <li><a href="/tssa-g3-exam-prep.html">← Back to TSSA G3 Exam Prep Overview</a></li>
                <li><a href="/tssa-g3-units-index.html">Browse All G3 Training Units</a></li>
                <li><a href="/csa-code-search.html">Search CSA B149.1-25 Code Database</a></li>
                <li><a href="/gas-technician-ai-tutor.html">Ask the AI Tutor Questions</a></li>
                <li><a href="https://www.tssa.org/en/regulated-sectors/fuels/fuels-certification.aspx" target="_blank" rel="noopener">Official TSSA Certification Info</a></li>
            </ul>
        </section>

        <!-- Disclaimer -->
        <div class="disclaimer-box">
            <p><strong>⚠️ Educational Resource Disclaimer:</strong> This practice test is an independent educational resource designed to help students prepare for the TSSA G3 certification exam. These materials are based on CSA B149.1-25 requirements but are not official TSSA materials. Always refer to the official CSA B149.1-25 code and current TSSA guidelines for authoritative information. LARK Labs is not affiliated with TSSA or CSA Group.</p>
        </div>
    </div>
    <!-- ============================================ -->
    <!-- END UNIT FOOTER SECTION -->
    <!-- ============================================ -->
</body>
</html>