<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSSA G2 Practice Exam Simulator - Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .premium-badge {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            margin-left: 10px;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
        }

        .simulator-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .access-denied {
            text-align: center;
            padding: 40px;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 15px;
            margin: 20px 0;
        }

        .access-denied h2 {
            color: #721c24;
            margin-bottom: 15px;
        }

        .access-denied p {
            color: #721c24;
            margin-bottom: 20px;
        }

        .purchase-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .purchase-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .back-to-site {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-to-site:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .exam-interface {
            display: none;
        }

        .exam-interface.active {
            display: block;
        }

        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .timer {
            background: #dc3545;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question-counter {
            color: #667eea;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .question {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #333;
        }

        .options {
            list-style: none;
        }

        .options li {
            margin-bottom: 15px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .options label:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .options label.selected {
            border-color: #667eea;
            background: #e6eaff;
        }

        .exam-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: #5a67d8;
        }

        .control-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .submit-button {
            background: #28a745;
        }

        .submit-button:hover {
            background: #218838;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .exam-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .exam-controls {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="container">
            <div class="header">
                <h1>üî• TSSA G2 Practice Exam Simulator <span class="premium-badge">PREMIUM</span></h1>
                <p>Professional Certification Training</p>
            </div>

            <div class="simulator-container">
                <a href="index.html" class="back-to-site">‚Üê Back to LARK Labs</a>
                
                <!-- Access Denied Section (shown if no access) -->
                <div id="accessDenied" class="access-denied">
                    <h2>üîí Premium Access Required</h2>
                    <p>This is a premium feature that requires a one-time purchase for lifetime access.</p>
                    <p>Get instant access to 500+ practice questions, detailed explanations, and comprehensive exam preparation tools.</p>
                    <a href="g2_payment.html" class="purchase-button">Get Lifetime Access - $79.99</a>
                </div>

                <!-- Exam Interface (shown if access granted) -->
                <div id="examInterface" class="exam-interface">
                    <div class="exam-header">
                        <div class="question-counter">
                            Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                        </div>
                        <div class="timer" id="timer">60:00</div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 2%"></div>
                    </div>

                    <div class="question-container">
                        <div class="question" id="questionText">
                            Which of the following is the minimum clearance required between a gas water heater and combustible materials?
                        </div>
                        
                        <ul class="options">
                            <li>
                                <label>
                                    <input type="radio" name="answer" value="a">
                                    <span>6 inches (150 mm)</span>
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="answer" value="b">
                                    <span>12 inches (300 mm)</span>
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="answer" value="c">
                                    <span>18 inches (450 mm)</span>
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="answer" value="d">
                                    <span>24 inches (600 mm)</span>
                                </label>
                            </li>
                        </ul>
                    </div>

                    <div class="exam-controls">
                        <button class="control-button" id="prevButton" onclick="previousQuestion()" disabled>
                            ‚Üê Previous
                        </button>
                        <button class="control-button" id="nextButton" onclick="nextQuestion()">
                            Next ‚Üí
                        </button>
                        <button class="control-button submit-button" id="submitButton" onclick="submitExam()" style="display: none;">
                            Submit Exam
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample questions data (in production, this would come from your backend)
        const sampleQuestions = [
            {
                question: "Which of the following is the minimum clearance required between a gas water heater and combustible materials?",
                options: ["6 inches (150 mm)", "12 inches (300 mm)", "18 inches (450 mm)", "24 inches (600 mm)"],
                correct: 0,
                explanation: "According to CSA B149.1, the minimum clearance from combustible materials is 6 inches (150 mm) unless otherwise specified by the manufacturer."
            },
            {
                question: "What is the maximum allowable gas pressure for residential appliances?",
                options: ["7 inches w.c.", "10.5 inches w.c.", "14 inches w.c.", "2 psi"],
                correct: 2,
                explanation: "The maximum gas pressure for residential appliances is typically 14 inches water column (w.c.) or 0.5 psi."
            },
            // Add more questions as needed
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let examTimer;
        let timeRemaining = 3600; // 60 minutes in seconds

        // Check access on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkAccess();
            setupEventListeners();
        });

        function checkAccess() {
            // Check if user has purchased access (stored in localStorage for demo)
            const hasPurchased = localStorage.getItem('g2_simulator_purchased');
            
            if (hasPurchased === 'true') {
                grantAccess();
            } else {
                denyAccess();
            }
        }

        function grantAccess() {
            document.getElementById('accessDenied').style.display = 'none';
            document.getElementById('examInterface').classList.add('active');
            startExam();
        }

        function denyAccess() {
            document.getElementById('accessDenied').style.display = 'block';
            document.getElementById('examInterface').classList.remove('active');
        }

        function setupEventListeners() {
            // Radio button selection
            document.addEventListener('change', function(e) {
                if (e.target.name === 'answer') {
                    // Remove selected class from all labels
                    document.querySelectorAll('.options label').forEach(label => {
                        label.classList.remove('selected');
                    });
                    
                    // Add selected class to chosen option
                    e.target.closest('label').classList.add('selected');
                    
                    // Store answer
                    userAnswers[currentQuestionIndex] = e.target.value;
                }
            });
        }

        function startExam() {
            // Initialize exam
            document.getElementById('totalQuestions').textContent = sampleQuestions.length;
            loadQuestion(0);
            startTimer();
        }

        function loadQuestion(index) {
            if (index >= sampleQuestions.length) return;
            
            const question = sampleQuestions[index];
            
            // Update question text
            document.getElementById('questionText').textContent = question.question;
            
            // Update options
            const options = document.querySelectorAll('.options label span');
            options.forEach((option, i) => {
                option.textContent = question.options[i];
            });
            
            // Clear previous selection
            document.querySelectorAll('.options input[type="radio"]').forEach(input => {
                input.checked = false;
            });
            document.querySelectorAll('.options label').forEach(label => {
                label.classList.remove('selected');
            });
            
            // Restore previous answer if exists
            if (userAnswers[index]) {
                const savedAnswer = document.querySelector(`input[value="${userAnswers[index]}"]`);
                if (savedAnswer) {
                    savedAnswer.checked = true;
                    savedAnswer.closest('label').classList.add('selected');
                }
            }
            
            // Update counters
            document.getElementById('currentQuestion').textContent = index + 1;
            
            // Update progress bar
            const progress = ((index + 1) / sampleQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update buttons
            document.getElementById('prevButton').disabled = index === 0;
            
            if (index === sampleQuestions.length - 1) {
                document.getElementById('nextButton').style.display = 'none';
                document.getElementById('submitButton').style.display = 'block';
            } else {
                document.getElementById('nextButton').style.display = 'block';
                document.getElementById('submitButton').style.display = 'none';
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < sampleQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        }

        function startTimer() {
            examTimer = setInterval(() => {
                timeRemaining--;
                
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining <= 0) {
                    clearInterval(examTimer);
                    submitExam();
                }
            }, 1000);
        }

        function submitExam() {
            clearInterval(examTimer);
            
            // Calculate score
            let correct = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === String.fromCharCode(97 + sampleQuestions[index].correct)) {
                    correct++;
                }
            });
            
            const percentage = Math.round((correct / sampleQuestions.length) * 100);
            
            alert(`Exam Complete!\n\nYour Score: ${correct}/${sampleQuestions.length} (${percentage}%)\n\nIn the full version, you would see detailed explanations for each question and comprehensive performance analytics.`);
        }

        // Demo function to reset purchase status (for testing)
        function resetPurchaseStatus() {
            localStorage.removeItem('g2_simulator_purchased');
            location.reload();
        }

        // Add reset button for demo (remove in production)
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            const resetButton = document.createElement('button');
            resetButton.textContent = 'Reset Demo (Dev Only)';
            resetButton.style.cssText = 'position: fixed; top: 10px; right: 10px; z-index: 1000; background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;';
            resetButton.onclick = resetPurchaseStatus;
            document.body.appendChild(resetButton);
        }
    </script>
</body>
</html>