<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hot Water Boiler System - CSA Gas Technician Training</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #f7fafc;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        
        .header {
            margin-bottom: 30px;
        }
        
        h1 {
            color: #2d3748;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .power-btn {
            background: #ef4444;
            color: white;
        }
        
        .power-btn.on {
            background: #10b981;
        }
        
        .zone-btn {
            background: #6b7280;
            color: white;
        }
        
        .zone-btn.active {
            background: #3b82f6;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .legend {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #4b5563;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid #d1d5db;
        }
        
        .diagram-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            margin-bottom: 30px;
        }
        
        svg {
            width: 100%;
            height: auto;
        }
        
        .info-panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e5e7eb;
        }
        
        .panel h3 {
            color: #1f2937;
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-grid {
            display: grid;
            gap: 10px;
        }
        
        .status-row {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: #f9fafb;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .status-label {
            color: #6b7280;
        }
        
        .status-value {
            font-weight: 600;
            color: #1f2937;
        }
        
        .status-value.active {
            color: #10b981;
        }
        
        .status-value.inactive {
            color: #ef4444;
        }
        
        .education-panel {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 20px;
        }
        
        .education-panel h3 {
            color: #92400e;
            margin-bottom: 15px;
        }
        
        .education-panel ul {
            list-style: none;
            padding: 0;
        }
        
        .education-panel li {
            padding: 6px 0;
            color: #78350f;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .education-panel li:before {
            content: "▸ ";
            color: #f59e0b;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .component-hover {
            cursor: pointer;
        }
        
        .component-hover:hover {
            filter: brightness(1.1);
        }
        
        .tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }
        
        .temp-display {
            font-size: 11px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔥 Hot Water Boiler System - Zone Control Configuration</h1>
            <p style="color: #6b7280;">CSA Gas Technician Training Module - Hydronic Heating Systems</p>
        </div>
        
        <div class="controls">
            <button id="powerBtn" class="power-btn" onclick="togglePower()">
                System Power: OFF
            </button>
            <button id="zone1Btn" class="zone-btn" onclick="toggleZone(1)">
                Zone 1 Call for Heat: OFF
            </button>
            <button id="zone2Btn" class="zone-btn" onclick="toggleZone(2)">
                Zone 2 Call for Heat: OFF
            </button>
            <button onclick="resetSystem()" style="background: #f59e0b; color: white;">
                Reset System
            </button>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #dc2626;"></div>
                <span>Supply (Hot Water)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #2563eb;"></div>
                <span>Return (Cool Water)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #16a34a;"></div>
                <span>Active Component</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #6b7280;"></div>
                <span>Inactive Component</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffff00; border: 2px solid #ff6600;"></div>
                <span>Primary Loop Flow</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #00ff00; border: 2px solid #008800;"></div>
                <span>Zone Flow</span>
            </div>
        </div>
        
        <div class="diagram-container">
            <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
                <!-- Define gradients and filters -->
                <defs>
                    <linearGradient id="supplyGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#dc2626;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#ef4444;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="returnGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#2563eb;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                
                <!-- Main Boiler -->
                <g id="boiler" class="component-hover">
                    <rect x="100" y="300" width="200" height="250" fill="#374151" stroke="#1f2937" stroke-width="3" rx="10"/>
                    <rect x="120" y="320" width="160" height="80" fill="#dc2626" rx="5"/>
                    <text x="200" y="365" text-anchor="middle" fill="white" font-weight="bold" font-size="14">BOILER</text>
                    <text x="200" y="385" text-anchor="middle" fill="white" font-size="12">Gas-Fired</text>
                    
                    <!-- Heat Exchanger representation -->
                    <rect x="130" y="420" width="140" height="100" fill="#6b7280" stroke="#4b5563" stroke-width="2" rx="5"/>
                    <path d="M 140 440 L 260 440 M 140 460 L 260 460 M 140 480 L 260 480 M 140 500 L 260 500" 
                          stroke="#fbbf24" stroke-width="2" opacity="0.8"/>
                    
                    <!-- Temperature display -->
                    <rect x="150" y="530" width="100" height="25" fill="#1f2937" rx="3"/>
                    <text id="boilerTemp" x="200" y="547" text-anchor="middle" fill="#10b981" class="temp-display">TEMP: 20°C</text>
                    
                    <!-- Burner flames animation -->
                    <g id="flames" style="display: none;">
                        <path d="M 160 410 Q 165 400 170 410 Q 175 400 180 410" fill="#fbbf24" opacity="0.8">
                            <animate attributeName="d" 
                                values="M 160 410 Q 165 400 170 410 Q 175 400 180 410;
                                        M 160 410 Q 165 395 170 410 Q 175 395 180 410;
                                        M 160 410 Q 165 400 170 410 Q 175 400 180 410"
                                dur="0.5s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 190 410 Q 195 400 200 410 Q 205 400 210 410" fill="#f97316" opacity="0.8">
                            <animate attributeName="d" 
                                values="M 190 410 Q 195 400 200 410 Q 205 400 210 410;
                                        M 190 410 Q 195 395 200 410 Q 205 395 210 410;
                                        M 190 410 Q 195 400 200 410 Q 205 400 210 410"
                                dur="0.4s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 220 410 Q 225 400 230 410 Q 235 400 240 410" fill="#fbbf24" opacity="0.8">
                            <animate attributeName="d" 
                                values="M 220 410 Q 225 400 230 410 Q 235 400 240 410;
                                        M 220 410 Q 225 395 230 410 Q 235 395 240 410;
                                        M 220 410 Q 225 400 230 410 Q 235 400 240 410"
                                dur="0.6s" repeatCount="indefinite"/>
                        </path>
                    </g>
                </g>
                
                <!-- Built-in Primary Circulation Pump -->
                <g id="primaryPump" class="component-hover">
                    <circle cx="200" cy="250" r="30" fill="#6b7280" stroke="#374151" stroke-width="3"/>
                    <circle cx="200" cy="250" r="20" fill="#4b5563"/>
                    <text x="200" y="255" text-anchor="middle" fill="white" font-weight="bold" font-size="10">P1</text>
                    <text x="200" y="220" text-anchor="middle" fill="#1f2937" font-size="11">Primary Pump</text>
                    
                    <!-- Pump impeller animation -->
                    <g id="primaryImpeller" transform="rotate(0 200 250)" style="display: none;">
                        <path d="M 200 250 L 215 250 L 200 235 Z" fill="#10b981"/>
                        <path d="M 200 250 L 200 235 L 185 250 Z" fill="#10b981"/>
                        <path d="M 200 250 L 185 250 L 200 265 Z" fill="#10b981"/>
                        <path d="M 200 250 L 200 265 L 215 250 Z" fill="#10b981"/>
                        <animateTransform attributeName="transform" type="rotate" 
                            from="0 200 250" to="360 200 250" dur="1s" repeatCount="indefinite"/>
                    </g>
                </g>
                
                <!-- Expansion Tank -->
                <g id="expansionTank" class="component-hover">
                    <ellipse cx="380" cy="200" rx="40" ry="50" fill="#6b7280" stroke="#374151" stroke-width="2"/>
                    <line x1="380" y1="150" x2="380" y2="180" stroke="#374151" stroke-width="8"/>
                    <text x="380" y="205" text-anchor="middle" fill="white" font-size="11">EXP</text>
                    <text x="380" y="220" text-anchor="middle" fill="white" font-size="11">TANK</text>
                    <text x="380" y="140" text-anchor="middle" fill="#1f2937" font-size="11">Expansion Tank</text>
                </g>
                
                <!-- Zone 1 -->
                <g id="zone1">
                    <!-- Zone 1 Pump -->
                    <g id="zone1Pump" class="component-hover">
                        <circle cx="550" cy="350" r="25" fill="#6b7280" stroke="#374151" stroke-width="3"/>
                        <circle cx="550" cy="350" r="15" fill="#4b5563"/>
                        <text x="550" y="355" text-anchor="middle" fill="white" font-weight="bold" font-size="10">Z1</text>
                        <text x="550" y="320" text-anchor="middle" fill="#1f2937" font-size="11">Zone 1 Pump</text>
                        
                        <!-- Zone 1 impeller -->
                        <g id="zone1Impeller" transform="rotate(0 550 350)" style="display: none;">
                            <path d="M 550 350 L 560 350 L 550 340 Z" fill="#3b82f6"/>
                            <path d="M 550 350 L 550 340 L 540 350 Z" fill="#3b82f6"/>
                            <path d="M 550 350 L 540 350 L 550 360 Z" fill="#3b82f6"/>
                            <path d="M 550 350 L 550 360 L 560 350 Z" fill="#3b82f6"/>
                            <animateTransform attributeName="transform" type="rotate" 
                                from="0 550 350" to="360 550 350" dur="1.2s" repeatCount="indefinite"/>
                        </g>
                    </g>
                    
                    <!-- Zone 1 Valve -->
                    <g id="zone1Valve" class="component-hover">
                        <rect x="470" y="340" width="40" height="20" fill="#6b7280" stroke="#374151" stroke-width="2" rx="3"/>
                        <circle cx="490" cy="350" r="8" fill="#ef4444"/>
                        <text x="490" y="330" text-anchor="middle" fill="#1f2937" font-size="10">Zone Valve</text>
                    </g>
                    
                    <!-- Zone 1 Radiators/Baseboard -->
                    <g id="zone1Radiator" class="component-hover">
                        <rect x="700" y="330" width="120" height="40" fill="#9ca3af" stroke="#6b7280" stroke-width="2" rx="5"/>
                        <line x1="710" y1="340" x2="810" y2="340" stroke="#6b7280" stroke-width="2"/>
                        <line x1="710" y1="350" x2="810" y2="350" stroke="#6b7280" stroke-width="2"/>
                        <line x1="710" y1="360" x2="810" y2="360" stroke="#6b7280" stroke-width="2"/>
                        <text x="760" y="355" text-anchor="middle" fill="#1f2937" font-weight="bold" font-size="11">ZONE 1</text>
                        <text x="760" y="390" text-anchor="middle" fill="#6b7280" font-size="10">Baseboard Heater</text>
                        
                        <!-- Heat waves animation -->
                        <g id="zone1Heat" style="display: none;">
                            <path d="M 720 320 Q 725 315 730 320" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="2s" repeatCount="indefinite"/>
                            </path>
                            <path d="M 750 320 Q 755 315 760 320" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="2s" repeatCount="indefinite" begin="0.5s"/>
                            </path>
                            <path d="M 780 320 Q 785 315 790 320" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="2s" repeatCount="indefinite" begin="1s"/>
                            </path>
                        </g>
                    </g>
                    
                    <!-- Zone 1 Thermostat -->
                    <g id="zone1Thermostat" class="component-hover">
                        <rect x="740" y="250" width="40" height="40" fill="#f3f4f6" stroke="#9ca3af" stroke-width="2" rx="5"/>
                        <circle cx="760" cy="270" r="12" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1"/>
                        <text x="760" y="274" text-anchor="middle" fill="#1f2937" font-weight="bold" font-size="10">21°</text>
                        <text x="760" y="285" text-anchor="middle" fill="#6b7280" font-size="8">SET</text>
                        <text x="760" y="240" text-anchor="middle" fill="#1f2937" font-size="10">T-STAT 1</text>
                    </g>
                </g>
                
                <!-- Zone 2 -->
                <g id="zone2">
                    <!-- Zone 2 Pump -->
                    <g id="zone2Pump" class="component-hover">
                        <circle cx="550" cy="500" r="25" fill="#6b7280" stroke="#374151" stroke-width="3"/>
                        <circle cx="550" cy="500" r="15" fill="#4b5563"/>
                        <text x="550" y="505" text-anchor="middle" fill="white" font-weight="bold" font-size="10">Z2</text>
                        <text x="550" y="540" text-anchor="middle" fill="#1f2937" font-size="11">Zone 2 Pump</text>
                        
                        <!-- Zone 2 impeller -->
                        <g id="zone2Impeller" transform="rotate(0 550 500)" style="display: none;">
                            <path d="M 550 500 L 560 500 L 550 490 Z" fill="#3b82f6"/>
                            <path d="M 550 500 L 550 490 L 540 500 Z" fill="#3b82f6"/>
                            <path d="M 550 500 L 540 500 L 550 510 Z" fill="#3b82f6"/>
                            <path d="M 550 500 L 550 510 L 560 500 Z" fill="#3b82f6"/>
                            <animateTransform attributeName="transform" type="rotate" 
                                from="0 550 500" to="360 550 500" dur="1.2s" repeatCount="indefinite"/>
                        </g>
                    </g>
                    
                    <!-- Zone 2 Valve -->
                    <g id="zone2Valve" class="component-hover">
                        <rect x="470" y="490" width="40" height="20" fill="#6b7280" stroke="#374151" stroke-width="2" rx="3"/>
                        <circle cx="490" cy="500" r="8" fill="#ef4444"/>
                        <text x="490" y="530" text-anchor="middle" fill="#1f2937" font-size="10">Zone Valve</text>
                    </g>
                    
                    <!-- Zone 2 Radiators/Baseboard -->
                    <g id="zone2Radiator" class="component-hover">
                        <rect x="700" y="480" width="120" height="40" fill="#9ca3af" stroke="#6b7280" stroke-width="2" rx="5"/>
                        <line x1="710" y1="490" x2="810" y2="490" stroke="#6b7280" stroke-width="2"/>
                        <line x1="710" y1="500" x2="810" y2="500" stroke="#6b7280" stroke-width="2"/>
                        <line x1="710" y1="510" x2="810" y2="510" stroke="#6b7280" stroke-width="2"/>
                        <text x="760" y="505" text-anchor="middle" fill="#1f2937" font-weight="bold" font-size="11">ZONE 2</text>
                        <text x="760" y="540" text-anchor="middle" fill="#6b7280" font-size="10">Baseboard Heater</text>
                        
                        <!-- Heat waves animation -->
                        <g id="zone2Heat" style="display: none;">
                            <path d="M 720 470 Q 725 465 730 470" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="2s" repeatCount="indefinite"/>
                            </path>
                            <path d="M 750 470 Q 755 465 760 470" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="2s" repeatCount="indefinite" begin="0.5s"/>
                            </path>
                            <path d="M 780 470 Q 785 465 790 470" stroke="#fbbf24" stroke-width="2" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.2;0.6" dur="2s" repeatCount="indefinite" begin="1s"/>
                            </path>
                        </g>
                    </g>
                    
                    <!-- Zone 2 Thermostat -->
                    <g id="zone2Thermostat" class="component-hover">
                        <rect x="740" y="580" width="40" height="40" fill="#f3f4f6" stroke="#9ca3af" stroke-width="2" rx="5"/>
                        <circle cx="760" cy="600" r="12" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1"/>
                        <text x="760" y="604" text-anchor="middle" fill="#1f2937" font-weight="bold" font-size="10">22°</text>
                        <text x="760" y="615" text-anchor="middle" fill="#6b7280" font-size="8">SET</text>
                        <text x="760" y="640" text-anchor="middle" fill="#1f2937" font-size="10">T-STAT 2</text>
                    </g>
                </g>
                
                <!-- Primary Loop Piping with Enhanced Visibility -->
                <g id="primaryPiping">
                    <!-- White background for contrast -->
                    <rect x="190" y="170" width="270" height="290" fill="white" opacity="0.3" rx="5"/>
                    
                    <!-- SUPPLY (RED) - From Boiler Top through Pump to Manifold -->
                    <!-- Boiler outlet to pump inlet -->
                    <line x1="200" y1="300" x2="200" y2="280" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="200" y1="300" x2="200" y2="280" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Pump outlet upward -->
                    <line x1="200" y1="220" x2="200" y2="180" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="200" y1="220" x2="200" y2="180" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Horizontal to expansion tank area -->
                    <line x1="200" y1="180" x2="380" y2="180" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="200" y1="180" x2="380" y2="180" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Up to expansion tank -->
                    <line x1="380" y1="180" x2="380" y2="150" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="380" y1="180" x2="380" y2="150" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Continue from expansion area to supply manifold -->
                    <line x1="380" y1="180" x2="450" y2="180" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="380" y1="180" x2="450" y2="180" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Down to supply manifold -->
                    <line x1="450" y1="180" x2="450" y2="350" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="450" y1="180" x2="450" y2="350" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- PRIMARY LOOP BYPASS - Connects supply to return for continuous circulation -->
                    <!-- Continue down from supply manifold -->
                    <line x1="450" y1="350" x2="450" y2="450" stroke="#dc2626" stroke-width="14" stroke-linecap="round"/>
                    <line x1="450" y1="350" x2="450" y2="450" stroke="#ff0000" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Transition from red to blue at the bottom connection -->
                    <line x1="450" y1="450" x2="420" y2="450" stroke="#9333ea" stroke-width="14" stroke-linecap="round"/>
                    <line x1="450" y1="450" x2="420" y2="450" stroke="#a855f7" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Supply manifold (vertical distribution) -->
                    <rect x="443" y="320" width="14" height="210" fill="#dc2626" stroke="#8b0000" stroke-width="2" rx="2"/>
                    
                    <!-- RETURN (BLUE) - From Return Manifold back to Boiler -->
                    <!-- Return manifold (vertical collection) -->
                    <rect x="413" y="320" width="14" height="210" fill="#2563eb" stroke="#1e3a8a" stroke-width="2" rx="2"/>
                    
                    <!-- Return from manifold to boiler -->
                    <line x1="420" y1="450" x2="300" y2="450" stroke="#1e40af" stroke-width="14" stroke-linecap="round"/>
                    <line x1="420" y1="450" x2="300" y2="450" stroke="#2563eb" stroke-width="10" stroke-linecap="round"/>
                    
                    <!-- Closely spaced tees indicator -->
                    <text x="435" y="470" text-anchor="middle" fill="#6b7280" font-size="9">Closely</text>
                    <text x="435" y="480" text-anchor="middle" fill="#6b7280" font-size="9">Spaced</text>
                    <text x="435" y="490" text-anchor="middle" fill="#6b7280" font-size="9">Tees</text>
                    
                    <!-- Pipe junction indicators -->
                    <circle cx="200" cy="180" r="8" fill="#dc2626" stroke="#fff" stroke-width="2"/>
                    <circle cx="380" cy="180" r="8" fill="#dc2626" stroke="#fff" stroke-width="2"/>
                    <circle cx="450" cy="180" r="8" fill="#dc2626" stroke="#fff" stroke-width="2"/>
                    <circle cx="450" cy="350" r="8" fill="#dc2626" stroke="#fff" stroke-width="2"/>
                    <circle cx="450" cy="450" r="8" fill="#a855f7" stroke="#fff" stroke-width="2"/>
                    <circle cx="420" cy="450" r="8" fill="#2563eb" stroke="#fff" stroke-width="2"/>
                </g>
                
                <!-- Zone 1 Piping -->
                <g id="zone1Piping">
                    <!-- Supply to zone 1 -->
                    <line x1="450" y1="350" x2="470" y2="350" stroke="#dc2626" stroke-width="6"/>
                    <line x1="510" y1="350" x2="525" y2="350" stroke="#dc2626" stroke-width="6"/>
                    <line x1="575" y1="350" x2="700" y2="350" stroke="#dc2626" stroke-width="6"/>
                    
                    <!-- Return from zone 1 -->
                    <line x1="820" y1="350" x2="900" y2="350" stroke="#2563eb" stroke-width="6"/>
                    <line x1="900" y1="350" x2="900" y2="420" stroke="#2563eb" stroke-width="6"/>
                    <line x1="900" y1="420" x2="420" y2="420" stroke="#2563eb" stroke-width="6"/>
                </g>
                
                <!-- Zone 2 Piping -->
                <g id="zone2Piping">
                    <!-- Supply to zone 2 -->
                    <line x1="450" y1="500" x2="470" y2="500" stroke="#dc2626" stroke-width="6"/>
                    <line x1="510" y1="500" x2="525" y2="500" stroke="#dc2626" stroke-width="6"/>
                    <line x1="575" y1="500" x2="700" y2="500" stroke="#dc2626" stroke-width="6"/>
                    
                    <!-- Return from zone 2 -->
                    <line x1="820" y1="500" x2="920" y2="500" stroke="#2563eb" stroke-width="6"/>
                    <line x1="920" y1="500" x2="920" y2="480" stroke="#2563eb" stroke-width="6"/>
                    <line x1="920" y1="480" x2="420" y2="480" stroke="#2563eb" stroke-width="6"/>
                </g>
                
                <!-- Flow Direction Arrows - Larger and More Visible -->
                <g id="flowArrows" style="display: none;">
                    <!-- Primary loop arrows (following hot water flow) -->
                    <polygon points="190,265 200,245 210,265" fill="#ffff00" stroke="#ff6600" stroke-width="1"/>
                    <polygon points="250,170 270,180 250,190" fill="#ffff00" stroke="#ff6600" stroke-width="1"/>
                    <polygon points="410,170 430,180 410,190" fill="#ffff00" stroke="#ff6600" stroke-width="1"/>
                    <polygon points="440,250 450,270 460,250" fill="#ffff00" stroke="#ff6600" stroke-width="1"/>
                    
                    <!-- Return arrow -->
                    <polygon points="360,460 340,450 360,440" fill="#ffff00" stroke="#ff6600" stroke-width="1"/>
                    
                    <!-- Zone arrows will be added dynamically -->
                </g>
                
                <!-- Water Flow Animation Dots - Larger and More Visible -->
                <g id="waterFlow" style="display: none;">
                    <!-- Primary loop flow - bigger dots -->
                    <circle r="8" fill="#ffff00" stroke="#ff6600" stroke-width="2">
                        <animateMotion dur="4s" repeatCount="indefinite">
                            <mpath href="#primaryFlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="8" fill="#ffff00" stroke="#ff6600" stroke-width="2">
                        <animateMotion dur="4s" repeatCount="indefinite" begin="1s">
                            <mpath href="#primaryFlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="8" fill="#ffff00" stroke="#ff6600" stroke-width="2">
                        <animateMotion dur="4s" repeatCount="indefinite" begin="2s">
                            <mpath href="#primaryFlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="8" fill="#ffff00" stroke="#ff6600" stroke-width="2">
                        <animateMotion dur="4s" repeatCount="indefinite" begin="3s">
                            <mpath href="#primaryFlowPath"/>
                        </animateMotion>
                    </circle>
                </g>
                
                <!-- Zone 1 Flow - Larger dots -->
                <g id="zone1Flow" style="display: none;">
                    <circle r="6" fill="#00ff00" stroke="#008800" stroke-width="1">
                        <animateMotion dur="5s" repeatCount="indefinite">
                            <mpath href="#zone1FlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="6" fill="#00ff00" stroke="#008800" stroke-width="1">
                        <animateMotion dur="5s" repeatCount="indefinite" begin="1.5s">
                            <mpath href="#zone1FlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="6" fill="#00ff00" stroke="#008800" stroke-width="1">
                        <animateMotion dur="5s" repeatCount="indefinite" begin="3s">
                            <mpath href="#zone1FlowPath"/>
                        </animateMotion>
                    </circle>
                </g>
                
                <!-- Zone 2 Flow - Larger dots -->
                <g id="zone2Flow" style="display: none;">
                    <circle r="6" fill="#00ff00" stroke="#008800" stroke-width="1">
                        <animateMotion dur="5s" repeatCount="indefinite">
                            <mpath href="#zone2FlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="6" fill="#00ff00" stroke="#008800" stroke-width="1">
                        <animateMotion dur="5s" repeatCount="indefinite" begin="1.5s">
                            <mpath href="#zone2FlowPath"/>
                        </animateMotion>
                    </circle>
                    <circle r="6" fill="#00ff00" stroke="#008800" stroke-width="1">
                        <animateMotion dur="5s" repeatCount="indefinite" begin="3s">
                            <mpath href="#zone2FlowPath"/>
                        </animateMotion>
                    </circle>
                </g>
                
                <!-- Hidden paths for animations -->
                <defs>
                    <path id="primaryFlowPath" d="M 200 300 L 200 280 L 200 220 L 200 180 L 380 180 L 450 180 L 450 350 L 450 450 L 420 450 L 300 450"/>
                    <path id="zone1FlowPath" d="M 450 350 L 550 350 L 700 350 L 820 350 L 900 350 L 900 420 L 420 420"/>
                    <path id="zone2FlowPath" d="M 450 500 L 550 500 L 700 500 L 820 500 L 920 500 L 920 480 L 420 480"/>
                </defs>
                
                <!-- System Labels -->
                <text x="600" y="50" text-anchor="middle" fill="#1f2937" font-size="20" font-weight="bold">
                    Hydronic Heating System - Primary/Secondary Pumping
                </text>
                <text x="600" y="75" text-anchor="middle" fill="#6b7280" font-size="14">
                    CSA B149.1 Compliant Installation
                </text>
                
                <!-- Temperature/Pressure Relief Valve -->
                <g id="tprValve" class="component-hover">
                    <rect x="320" y="380" width="30" height="20" fill="#fbbf24" stroke="#f59e0b" stroke-width="2" rx="3"/>
                    <text x="335" y="395" text-anchor="middle" fill="#1f2937" font-weight="bold" font-size="8">T&P</text>
                    <text x="335" y="415" text-anchor="middle" fill="#6b7280" font-size="9">Relief Valve</text>
                </g>
                
                <!-- Air Separator -->
                <g id="airSeparator" class="component-hover">
                    <ellipse cx="380" cy="280" rx="20" ry="30" fill="#9ca3af" stroke="#6b7280" stroke-width="2"/>
                    <text x="380" y="285" text-anchor="middle" fill="#1f2937" font-weight="bold" font-size="9">AIR</text>
                    <text x="380" y="295" text-anchor="middle" fill="#1f2937" font-size="9">SEP</text>
                    <text x="380" y="320" text-anchor="middle" fill="#6b7280" font-size="9">Air Separator</text>
                </g>
            </svg>
        </div>
        
        <div class="info-panels">
            <div class="panel">
                <h3>🌡️ System Status</h3>
                <div class="status-grid">
                    <div class="status-row">
                        <span class="status-label">System Power:</span>
                        <span id="powerStatus" class="status-value inactive">OFF</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Boiler Status:</span>
                        <span id="boilerStatus" class="status-value inactive">STANDBY</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Boiler Temp:</span>
                        <span id="boilerTempStatus" class="status-value">20°C</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Primary Pump:</span>
                        <span id="primaryPumpStatus" class="status-value inactive">OFF</span>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <h3>🏠 Zone 1 Status</h3>
                <div class="status-grid">
                    <div class="status-row">
                        <span class="status-label">Call for Heat:</span>
                        <span id="zone1CallStatus" class="status-value inactive">NO</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Zone Valve:</span>
                        <span id="zone1ValveStatus" class="status-value inactive">CLOSED</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Zone Pump:</span>
                        <span id="zone1PumpStatus" class="status-value inactive">OFF</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Flow Rate:</span>
                        <span id="zone1FlowStatus" class="status-value">0 L/min</span>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <h3>🏠 Zone 2 Status</h3>
                <div class="status-grid">
                    <div class="status-row">
                        <span class="status-label">Call for Heat:</span>
                        <span id="zone2CallStatus" class="status-value inactive">NO</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Zone Valve:</span>
                        <span id="zone2ValveStatus" class="status-value inactive">CLOSED</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Zone Pump:</span>
                        <span id="zone2PumpStatus" class="status-value inactive">OFF</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Flow Rate:</span>
                        <span id="zone2FlowStatus" class="status-value">0 L/min</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="education-panel">
            <h3>📚 CSA Gas Technician Key Learning Points</h3>
            <ul>
                <li><strong>Primary/Secondary Pumping:</strong> The boiler has a dedicated primary pump ensuring constant flow through the heat exchanger, protecting it from thermal shock and ensuring optimal heat transfer efficiency.</li>
                <li><strong>Zone Control:</strong> Each heating zone has its own circulation pump and zone valve, allowing independent temperature control and improved energy efficiency per CSA B149.1 requirements.</li>
                <li><strong>Hydraulic Separation:</strong> The closely spaced tees create hydraulic separation between the primary loop and zone circuits, preventing pump interaction and ensuring proper flow rates.</li>
                <li><strong>Expansion Tank:</strong> Located on the suction side of the pump (point of no pressure change) to maintain system pressure and accommodate thermal expansion of water.</li>
                <li><strong>Air Separator:</strong> Positioned at the hottest point (supply) where air solubility is lowest, ensuring effective air removal from the system.</li>
                <li><strong>Safety Devices:</strong> Temperature & Pressure relief valve installed per code requirements for overpressure protection.</li>
                <li><strong>Flow Direction:</strong> Hot water rises from boiler through supply manifold (red), returns through return manifold (blue) after giving up heat in zones.</li>
                <li><strong>Boiler Protection:</strong> Minimum return water temperature maintained by primary loop mixing to prevent condensation in heat exchanger.</li>
            </ul>
        </div>
    </div>
    
    <div id="tooltip" class="tooltip"></div>
    
    <footer style="text-align: center; padding: 20px 0; margin-top: 30px; border-top: 2px solid #e5e7eb; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; font-size: 16px; border-radius: 0 0 12px 12px; margin: -30px -30px -30px -30px;">
        Created by LARK Labs
    </footer>
    
    <script>
        let systemPower = false;
        let zone1Call = false;
        let zone2Call = false;
        let boilerTemp = 20;
        let boilerInterval;
        
        function togglePower() {
            systemPower = !systemPower;
            const btn = document.getElementById('powerBtn');
            const powerStatus = document.getElementById('powerStatus');
            
            if (systemPower) {
                btn.classList.add('on');
                btn.textContent = 'System Power: ON';
                powerStatus.textContent = 'ON';
                powerStatus.className = 'status-value active';
                
                // Start primary pump
                document.getElementById('primaryImpeller').style.display = 'block';
                document.getElementById('primaryPumpStatus').textContent = 'RUNNING';
                document.getElementById('primaryPumpStatus').className = 'status-value active';
                document.getElementById('waterFlow').style.display = 'block';
                document.getElementById('flowArrows').style.display = 'block';
                
                // Activate primary pump color
                document.querySelector('#primaryPump circle').setAttribute('fill', '#16a34a');
                
                checkBoilerOperation();
            } else {
                btn.classList.remove('on');
                btn.textContent = 'System Power: OFF';
                powerStatus.textContent = 'OFF';
                powerStatus.className = 'status-value inactive';
                
                // Stop everything
                resetSystem();
            }
        }
        
        function toggleZone(zoneNum) {
            if (!systemPower) {
                alert('Please turn on system power first!');
                return;
            }
            
            if (zoneNum === 1) {
                zone1Call = !zone1Call;
                const btn = document.getElementById('zone1Btn');
                
                if (zone1Call) {
                    btn.classList.add('active');
                    btn.textContent = 'Zone 1 Call for Heat: ON';
                    activateZone1();
                } else {
                    btn.classList.remove('active');
                    btn.textContent = 'Zone 1 Call for Heat: OFF';
                    deactivateZone1();
                }
            } else if (zoneNum === 2) {
                zone2Call = !zone2Call;
                const btn = document.getElementById('zone2Btn');
                
                if (zone2Call) {
                    btn.classList.add('active');
                    btn.textContent = 'Zone 2 Call for Heat: ON';
                    activateZone2();
                } else {
                    btn.classList.remove('active');
                    btn.textContent = 'Zone 2 Call for Heat: OFF';
                    deactivateZone2();
                }
            }
            
            checkBoilerOperation();
        }
        
        function activateZone1() {
            // Update status panel
            document.getElementById('zone1CallStatus').textContent = 'YES';
            document.getElementById('zone1CallStatus').className = 'status-value active';
            document.getElementById('zone1ValveStatus').textContent = 'OPEN';
            document.getElementById('zone1ValveStatus').className = 'status-value active';
            document.getElementById('zone1PumpStatus').textContent = 'RUNNING';
            document.getElementById('zone1PumpStatus').className = 'status-value active';
            document.getElementById('zone1FlowStatus').textContent = '12 L/min';
            
            // Activate visual elements
            document.getElementById('zone1Impeller').style.display = 'block';
            document.getElementById('zone1Flow').style.display = 'block';
            document.getElementById('zone1Heat').style.display = 'block';
            
            // Change component colors
            document.querySelector('#zone1Pump circle').setAttribute('fill', '#16a34a');
            document.querySelector('#zone1Valve circle').setAttribute('fill', '#16a34a');
            document.querySelector('#zone1Radiator rect').setAttribute('fill', '#fbbf24');
        }
        
        function deactivateZone1() {
            // Update status panel
            document.getElementById('zone1CallStatus').textContent = 'NO';
            document.getElementById('zone1CallStatus').className = 'status-value inactive';
            document.getElementById('zone1ValveStatus').textContent = 'CLOSED';
            document.getElementById('zone1ValveStatus').className = 'status-value inactive';
            document.getElementById('zone1PumpStatus').textContent = 'OFF';
            document.getElementById('zone1PumpStatus').className = 'status-value inactive';
            document.getElementById('zone1FlowStatus').textContent = '0 L/min';
            
            // Deactivate visual elements
            document.getElementById('zone1Impeller').style.display = 'none';
            document.getElementById('zone1Flow').style.display = 'none';
            document.getElementById('zone1Heat').style.display = 'none';
            
            // Reset component colors
            document.querySelector('#zone1Pump circle').setAttribute('fill', '#6b7280');
            document.querySelector('#zone1Valve circle').setAttribute('fill', '#ef4444');
            document.querySelector('#zone1Radiator rect').setAttribute('fill', '#9ca3af');
        }
        
        function activateZone2() {
            // Update status panel
            document.getElementById('zone2CallStatus').textContent = 'YES';
            document.getElementById('zone2CallStatus').className = 'status-value active';
            document.getElementById('zone2ValveStatus').textContent = 'OPEN';
            document.getElementById('zone2ValveStatus').className = 'status-value active';
            document.getElementById('zone2PumpStatus').textContent = 'RUNNING';
            document.getElementById('zone2PumpStatus').className = 'status-value active';
            document.getElementById('zone2FlowStatus').textContent = '15 L/min';
            
            // Activate visual elements
            document.getElementById('zone2Impeller').style.display = 'block';
            document.getElementById('zone2Flow').style.display = 'block';
            document.getElementById('zone2Heat').style.display = 'block';
            
            // Change component colors
            document.querySelector('#zone2Pump circle').setAttribute('fill', '#16a34a');
            document.querySelector('#zone2Valve circle').setAttribute('fill', '#16a34a');
            document.querySelector('#zone2Radiator rect').setAttribute('fill', '#fbbf24');
        }
        
        function deactivateZone2() {
            // Update status panel
            document.getElementById('zone2CallStatus').textContent = 'NO';
            document.getElementById('zone2CallStatus').className = 'status-value inactive';
            document.getElementById('zone2ValveStatus').textContent = 'CLOSED';
            document.getElementById('zone2ValveStatus').className = 'status-value inactive';
            document.getElementById('zone2PumpStatus').textContent = 'OFF';
            document.getElementById('zone2PumpStatus').className = 'status-value inactive';
            document.getElementById('zone2FlowStatus').textContent = '0 L/min';
            
            // Deactivate visual elements
            document.getElementById('zone2Impeller').style.display = 'none';
            document.getElementById('zone2Flow').style.display = 'none';
            document.getElementById('zone2Heat').style.display = 'none';
            
            // Reset component colors
            document.querySelector('#zone2Pump circle').setAttribute('fill', '#6b7280');
            document.querySelector('#zone2Valve circle').setAttribute('fill', '#ef4444');
            document.querySelector('#zone2Radiator rect').setAttribute('fill', '#9ca3af');
        }
        
        function checkBoilerOperation() {
            if (systemPower && (zone1Call || zone2Call)) {
                // Start boiler firing
                document.getElementById('flames').style.display = 'block';
                document.getElementById('boilerStatus').textContent = 'FIRING';
                document.getElementById('boilerStatus').className = 'status-value active';
                
                // Start temperature increase
                if (!boilerInterval) {
                    boilerInterval = setInterval(() => {
                        if (boilerTemp < 82) {
                            boilerTemp += 2;
                            updateBoilerTemp();
                        }
                    }, 1000);
                }
            } else if (systemPower) {
                // Boiler in standby
                document.getElementById('flames').style.display = 'none';
                document.getElementById('boilerStatus').textContent = 'STANDBY';
                document.getElementById('boilerStatus').className = 'status-value';
                
                // Cool down gradually
                if (boilerInterval) {
                    clearInterval(boilerInterval);
                    boilerInterval = setInterval(() => {
                        if (boilerTemp > 20) {
                            boilerTemp -= 1;
                            updateBoilerTemp();
                        }
                    }, 2000);
                }
            }
        }
        
        function updateBoilerTemp() {
            document.getElementById('boilerTemp').textContent = `TEMP: ${boilerTemp}°C`;
            document.getElementById('boilerTempStatus').textContent = `${boilerTemp}°C`;
            
            // Change color based on temperature
            if (boilerTemp > 70) {
                document.getElementById('boilerTemp').setAttribute('fill', '#ef4444');
                document.getElementById('boilerTempStatus').style.color = '#ef4444';
            } else if (boilerTemp > 50) {
                document.getElementById('boilerTemp').setAttribute('fill', '#fbbf24');
                document.getElementById('boilerTempStatus').style.color = '#f59e0b';
            } else {
                document.getElementById('boilerTemp').setAttribute('fill', '#10b981');
                document.getElementById('boilerTempStatus').style.color = '#1f2937';
            }
        }
        
        function resetSystem() {
            systemPower = false;
            zone1Call = false;
            zone2Call = false;
            boilerTemp = 20;
            
            if (boilerInterval) {
                clearInterval(boilerInterval);
                boilerInterval = null;
            }
            
            // Reset all buttons
            document.getElementById('powerBtn').classList.remove('on');
            document.getElementById('powerBtn').textContent = 'System Power: OFF';
            document.getElementById('zone1Btn').classList.remove('active');
            document.getElementById('zone1Btn').textContent = 'Zone 1 Call for Heat: OFF';
            document.getElementById('zone2Btn').classList.remove('active');
            document.getElementById('zone2Btn').textContent = 'Zone 2 Call for Heat: OFF';
            
            // Reset all visual elements
            document.getElementById('primaryImpeller').style.display = 'none';
            document.getElementById('waterFlow').style.display = 'none';
            document.getElementById('flowArrows').style.display = 'none';
            document.getElementById('flames').style.display = 'none';
            
            // Reset status panel
            document.getElementById('powerStatus').textContent = 'OFF';
            document.getElementById('powerStatus').className = 'status-value inactive';
            document.getElementById('boilerStatus').textContent = 'STANDBY';
            document.getElementById('boilerStatus').className = 'status-value inactive';
            document.getElementById('primaryPumpStatus').textContent = 'OFF';
            document.getElementById('primaryPumpStatus').className = 'status-value inactive';
            
            // Reset component colors
            document.querySelector('#primaryPump circle').setAttribute('fill', '#6b7280');
            
            // Deactivate both zones
            deactivateZone1();
            deactivateZone2();
            
            updateBoilerTemp();
        }
        
        // Add hover tooltips for components
        document.querySelectorAll('.component-hover').forEach(element => {
            element.addEventListener('mouseenter', (e) => {
                const tooltip = document.getElementById('tooltip');
                let text = '';
                
                switch(element.id) {
                    case 'boiler':
                        text = 'Gas-fired boiler with built-in heat exchanger';
                        break;
                    case 'primaryPump':
                        text = 'Primary circulation pump - maintains constant flow through boiler';
                        break;
                    case 'expansionTank':
                        text = 'Accommodates thermal expansion of water';
                        break;
                    case 'airSeparator':
                        text = 'Removes air from the system';
                        break;
                    case 'tprValve':
                        text = 'Temperature & Pressure relief valve for safety';
                        break;
                }
                
                if (text) {
                    tooltip.textContent = text;
                    tooltip.style.display = 'block';
                    tooltip.style.left = e.pageX + 10 + 'px';
                    tooltip.style.top = e.pageY - 30 + 'px';
                }
            });
            
            element.addEventListener('mouseleave', () => {
                document.getElementById('tooltip').style.display = 'none';
            });
        });
        
        // Initialize
        updateBoilerTemp();
    </script>
</body>
</html>