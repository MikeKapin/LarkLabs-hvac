# Netlify Environment Variables for HVAC Jack 5.0

## üîë Required Environment Variables

Copy these into **Netlify Dashboard ‚Üí Site Settings ‚Üí Environment Variables**

---

## 1. Anthropic Claude API

```
ANTHROPIC_API_KEY
```
**Value:** `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`

**Note:** This is your existing Claude API key (same as `CLAUDE_API_KEY`)

---

## 2. Supabase Database

### SUPABASE_URL
```
SUPABASE_URL
```
**Value:** `https://YOUR-PROJECT-ID.supabase.co`

**üîç How to find this:**
1. Go to https://supabase.com/dashboard
2. Select your project (or create new one)
3. Go to **Settings** ‚Üí **API**
4. Copy the **Project URL** (looks like: `https://abcdefghijk.supabase.co`)

---

### SUPABASE_SERVICE_KEY
```
SUPABASE_SERVICE_KEY
```
**Value:** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` (long token)

**üîç How to find this:**
1. Same location as URL above
2. Go to **Settings** ‚Üí **API**
3. Scroll down to **Project API keys**
4. Copy the **service_role** key (NOT the anon key)
5. ‚ö†Ô∏è This is SECRET - never expose in client-side code

---

## 3. Stripe Payment

### STRIPE_SECRET_KEY
```
STRIPE_SECRET_KEY
```
**Value:** `sk_live_...` (for production) or `sk_test_...` (for testing)

**üîç How to find this:**
1. Go to https://dashboard.stripe.com
2. Click **Developers** ‚Üí **API keys**
3. Copy the **Secret key**
4. Use `sk_test_...` for testing first, then switch to `sk_live_...` for production

---

### STRIPE_WEBHOOK_SECRET
```
STRIPE_WEBHOOK_SECRET
```
**Value:** `whsec_...` (you'll get this after creating webhook)

**üîç How to get this:**
1. Go to https://dashboard.stripe.com/webhooks
2. Click **Add endpoint**
3. Endpoint URL: `https://YOUR-NETLIFY-SITE.netlify.app/.netlify/functions/stripe-checkout`
4. Select events:
   - `checkout.session.completed`
   - `customer.subscription.created`
   - `customer.subscription.updated`
   - `customer.subscription.deleted`
   - `invoice.payment_succeeded`
   - `invoice.payment_failed`
5. Click **Add endpoint**
6. Copy the **Signing secret** (starts with `whsec_`)

---

### STRIPE_PRICE_PRO
```
STRIPE_PRICE_PRO
```
**Value:** Extract from your checkout URL

From: `https://buy.stripe.com/3cI8wQfxX0Ne8qGgsM7ok06`

**üîç How to get the actual Price ID:**
1. Go to https://dashboard.stripe.com/products
2. Click on "HVAC Jack Pro" product
3. Copy the **Price ID** (looks like: `price_1234567890abcdef`)

**Temporary:** Use placeholder `price_hvacjack_pro_999` until you get the real ID

---

### STRIPE_PRICE_PREMIUM
```
STRIPE_PRICE_PREMIUM
```
**Value:** Extract from your checkout URL

From: `https://buy.stripe.com/fZubJ24Tj0Ne36m4K47ok07`

**üîç How to get the actual Price ID:**
1. Same as above, but for "HVAC Jack Premium" product
2. Copy the **Price ID**

**Temporary:** Use placeholder `price_hvacjack_premium_1999` until you get the real ID

---

### STRIPE_PRICE_BUSINESS
```
STRIPE_PRICE_BUSINESS
```
**Value:** Price ID for Business tier (when you create it)

**Temporary:** Use placeholder `price_hvacjack_business_4999` until created

---

## 4. Site Configuration

### URL
```
URL
```
**Value:** `https://YOUR-SITE-NAME.netlify.app`

**üîç This will be auto-generated by Netlify after first deploy**
- Example: `https://hvac-jack-5.netlify.app`
- You can also use custom domain if you have one

---

## 5. Optional Configuration (Already have defaults)

### NODE_ENV
```
NODE_ENV
```
**Value:** `production`

---

### CONTENT_FILTER_ENABLED
```
CONTENT_FILTER_ENABLED
```
**Value:** `true`

---

### RATE_LIMIT_ENABLED
```
RATE_LIMIT_ENABLED
```
**Value:** `true`

---

### MAX_MESSAGES_PER_MINUTE
```
MAX_MESSAGES_PER_MINUTE
```
**Value:** `20`

---

### ADMIN_PASSWORD
```
ADMIN_PASSWORD
```
**Value:** `HVACJACK2025_ADMIN` (or change to something more secure)

---

## üìã Quick Copy-Paste Format for Netlify

Here's the format Netlify uses when bulk adding:

```
ANTHROPIC_API_KEY=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
SUPABASE_URL=https://YOUR-PROJECT-ID.supabase.co
SUPABASE_SERVICE_KEY=YOUR_SERVICE_KEY_HERE
STRIPE_SECRET_KEY=sk_test_YOUR_KEY_HERE
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET
STRIPE_PRICE_PRO=price_hvacjack_pro_999
STRIPE_PRICE_PREMIUM=price_hvacjack_premium_1999
STRIPE_PRICE_BUSINESS=price_hvacjack_business_4999
URL=https://YOUR-SITE.netlify.app
NODE_ENV=production
CONTENT_FILTER_ENABLED=true
RATE_LIMIT_ENABLED=true
MAX_MESSAGES_PER_MINUTE=20
ADMIN_PASSWORD=HVACJACK2025_ADMIN
```

---

## ‚ö†Ô∏è Security Notes

1. **Never commit .env file to git** (already in .gitignore ‚úÖ)
2. **Use test mode first** - Start with `sk_test_` keys
3. **Rotate admin password** - Change `ADMIN_PASSWORD` to something unique
4. **Monitor usage** - Set up alerts in Anthropic and Stripe dashboards

---

## üéØ Priority Order for Setup

### Phase 1: Minimum for Testing
1. `ANTHROPIC_API_KEY` ‚úÖ (you have this)
2. `URL` (will be auto-filled by Netlify)
3. `NODE_ENV=production`

**With just these 3, the app will run but without subscription features**

### Phase 2: Add Database
4. `SUPABASE_URL` (need to create Supabase project)
5. `SUPABASE_SERVICE_KEY`

**With these, usage tracking will work**

### Phase 3: Add Payments
6. `STRIPE_SECRET_KEY` (start with test key)
7. `STRIPE_WEBHOOK_SECRET` (after creating webhook)
8. `STRIPE_PRICE_PRO`
9. `STRIPE_PRICE_PREMIUM`
10. `STRIPE_PRICE_BUSINESS`

**With these, full subscription system works**

---

## üìû Need Help?

**Supabase Setup:** See `SUBSCRIPTION_SETUP_GUIDE.md` - Step 2
**Stripe Setup:** See `SUBSCRIPTION_SETUP_GUIDE.md` - Step 1

---

**Last Updated:** January 20, 2025
