<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered adaptive practice exam system for TSSA G2 and G3 certification. Comprehensive question bank based on CSA B149.1 and B149.2 standards.">
    <meta name="keywords" content="TSSA, G2, G3, gas technician, practice exam, CSA B149.1, CSA B149.2, certification, adaptive learning">
    <meta name="author" content="Lark Labs Software Development">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="TSSA Adaptive Exam System - AI-Powered Learning">
    <meta property="og:description" content="Master your Gas Technician certification with our comprehensive adaptive practice exam system.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/assets/images/og-image.jpg">
    <meta property="og:url" content="https://tssa-exam-system.larklabs.ca">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TSSA Adaptive Exam System">
    <meta name="twitter:description" content="AI-powered practice exams for TSSA G2 and G3 certification">
    <meta name="twitter:image" content="/assets/images/twitter-card.jpg">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/icons/icon-16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/icons/icon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/icons/icon-180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/images/icons/icon-512.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3B82F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="TSSA Exam System">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'spin-slow': 'spin 3s linear infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    }
                }
            }
        }
    </script>
    
    <title>TSSA Adaptive Exam System - AI-Powered Learning | Lark Labs</title>
    
    <!-- Custom Styles -->
    <style>
        /* Loading Screen Styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease-in-out;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .lark-logo {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .loading-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .loading-subtext {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto 0;
        }

        /* Hide scrollbar during loading */
        body.loading {
            overflow: hidden;
        }

        /* Smooth transitions */
        * {
            transition: background-color 0.2s ease;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Dark mode scrollbar */
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Focus styles for accessibility */
        .focus-visible:focus {
            outline: 2px solid #3B82F6;
            outline-offset: 2px;
        }

        /* Print styles */
        @media print {
            .no-print {
                display: none !important;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .bg-gradient-to-br {
                background: #000 !important;
                color: #fff !important;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body class="loading">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="lark-logo">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                </svg>
            </div>
            <div class="loading-text">TSSA Exam System</div>
            <div class="loading-subtext">Initializing AI-Powered Learning Environment</div>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="root" style="display: none;">
        <!-- Fallback content for users with JavaScript disabled -->
        <noscript>
            <div class="min-h-screen bg-gray-100 flex items-center justify-center p-4">
                <div class="max-w-md mx-auto text-center bg-white p-8 rounded-lg shadow-lg">
                    <svg class="w-16 h-16 mx-auto mb-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                    </svg>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">JavaScript Required</h2>
                    <p class="text-gray-600 mb-6">
                        The TSSA Adaptive Exam System requires JavaScript to function properly. 
                        Please enable JavaScript in your browser settings and refresh this page.
                    </p>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-blue-800 mb-2">How to enable JavaScript:</h3>
                        <ul class="text-sm text-blue-700 text-left space-y-1">
                            <li>• <strong>Chrome/Edge:</strong> Settings → Privacy and security → Site settings → JavaScript</li>
                            <li>• <strong>Firefox:</strong> about:config → javascript.enabled → true</li>
                            <li>• <strong>Safari:</strong> Preferences → Security → Enable JavaScript</li>
                        </ul>
                    </div>
                </div>
            </div>
        </noscript>

        <!-- Application will be rendered here by React -->
        <div class="min-h-screen bg-gray-100 flex items-center justify-center">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
                <p class="text-gray-600">Loading TSSA Exam System...</p>
            </div>
        </div>
    </div>

    <!-- React and Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-router-dom@6/dist/umd/react-router-dom.production.min.js"></script>

    <!-- Babel for JSX transformation (development only) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>

    <!-- Application Scripts -->
    <script type="text/babel" src="./src/utils/pwa.js"></script>
    <script type="text/babel" src="./src/services/authService.js"></script>
    <script type="text/babel" src="./src/services/progressTrackingService.js"></script>
    <script type="text/babel" src="./src/utils/learningAlgorithms.js"></script>
    <script type="text/babel" src="./src/utils/adaptiveLearningEngine.js"></script>
    <script type="text/babel" src="./src/data/questionBankManager.js"></script>
    <script type="text/babel" src="./src/components/InstallPrompt.jsx"></script>
    <script type="text/babel" src="./src/components/Footer.jsx"></script>
    <script type="text/babel" src="./src/components/Navigation.jsx"></script>
    <script type="text/babel" src="./src/components/AuthenticationSystem.jsx"></script>
    <script type="text/babel" src="./src/components/AdaptiveExamSystem.jsx"></script>
    <script type="text/babel" src="./src/App_New.jsx"></script>

    <!-- Application Initialization -->
    <script type="text/babel">
        const { StrictMode } = React;
        const { createRoot } = ReactDOM;

        // Initialize the application
        function initializeApp() {
            try {
                // Hide loading screen
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loadingScreen');
                    const appContainer = document.getElementById('root');
                    
                    if (loadingScreen && appContainer) {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            appContainer.style.display = 'block';
                            appContainer.classList.add('animate-fade-in');
                            document.body.classList.remove('loading');
                        }, 500);
                    }
                }, 2000);

                // Create React root and render app
                const container = document.getElementById('root');
                const root = createRoot(container);
                
                root.render(
                    React.createElement(StrictMode, null,
                        React.createElement(App)
                    )
                );

                console.log('🎉 TSSA Adaptive Exam System initialized successfully');
                console.log('📚 Question Bank: G3 (313 questions), G2 (117 questions)');
                console.log('🤖 AI-Powered Adaptive Learning: Enabled');
                console.log('🔧 Built by Lark Labs Software Development');

            } catch (error) {
                console.error('❌ Application initialization failed:', error);
                
                // Show error state
                const container = document.getElementById('root');
                if (container) {
                    container.innerHTML = `
                        <div class="min-h-screen bg-red-50 flex items-center justify-center p-4">
                            <div class="max-w-md mx-auto text-center bg-white p-8 rounded-lg shadow-lg">
                                <div class="text-red-500 mb-4">
                                    <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                    </svg>
                                </div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">Application Error</h2>
                                <p class="text-gray-600 mb-6">
                                    Failed to initialize the TSSA Exam System. Please check your internet connection and try refreshing the page.
                                </p>
                                <button onclick="window.location.reload()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                    Refresh Page
                                </button>
                                <div class="mt-4 p-3 bg-gray-100 rounded text-left text-xs text-gray-600">
                                    <strong>Error:</strong> ${error.message}
                                </div>
                            </div>
                        </div>
                    `;
                    document.getElementById('loadingScreen').style.display = 'none';
                }
            }
        }

        // Wait for DOM to be fully loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        // Global error handlers
        window.addEventListener('error', (event) => {
            console.error('Global error:', event.error);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
        });

        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', () => {
                const perfData = performance.getEntriesByType('navigation')[0];
                console.log(`📊 Page load time: ${Math.round(perfData.loadEventEnd - perfData.fetchStart)}ms`);
            });
        }

        // Service worker registration for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('🔧 Service Worker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('❌ Service Worker registration failed:', error);
                    });
            });
        }
    </script>

    <!-- Analytics and Monitoring (placeholder) -->
    <script>
        // Google Analytics or other analytics can be added here
        // Example:
        // gtag('config', 'GA_MEASUREMENT_ID');
    </script>
</body>
</html>