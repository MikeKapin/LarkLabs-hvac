<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HVAC Pro Tools</title>
    <meta name="description" content="Professional HVAC calculation tools for technicians and engineers">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HVAC Pro Tools">
    <link rel="manifest" href="#" id="app-manifest">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-header {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .app-title {
            font-size: 1.8em;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .app-subtitle {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }

        .tools-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.2);
        }

        .tool-card.coming-soon {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .tool-card.coming-soon::before {
            content: 'COMING SOON';
            position: absolute;
            top: 10px;
            right: -30px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 5px 40px;
            font-size: 0.7em;
            font-weight: bold;
            transform: rotate(45deg);
            letter-spacing: 1px;
        }

        .tool-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }

        .tool-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #4ecdc4;
        }

        .tool-description {
            font-size: 0.9em;
            line-height: 1.4;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .tool-features {
            list-style: none;
            font-size: 0.8em;
        }

        .tool-features li {
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .tool-features li::before {
            content: '‚úì ';
            color: #4ecdc4;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            border-radius: 15px;
            padding: 30px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5em;
            color: #4ecdc4;
        }

        .close-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.5em;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .download-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px;
            text-align: center;
        }

        .download-btn {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .install-instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px;
        }

        .install-instructions h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
        }

        .install-instructions ol {
            text-align: left;
            padding-left: 20px;
        }

        .install-instructions li {
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .footer {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.3);
            margin-top: 40px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .lark-logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }

        .footer-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #4ecdc4;
            margin-bottom: 10px;
        }

        .copyright {
            font-size: 0.9em;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .app-content {
            display: none;
            padding: 20px;
            max-width: 100%;
            overflow-x: auto;
        }

        .back-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 768px) {
            .tools-grid {
                grid-template-columns: 1fr;
                padding: 15px;
            }
            
            .tool-card {
                padding: 20px;
            }
            
            .modal-content {
                padding: 20px;
                max-width: 95vw;
            }
        }

        /* PWA specific styles */
        .pwa-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            padding: 15px;
            border-radius: 10px;
            display: none;
            z-index: 1001;
        }

        .pwa-prompt button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            margin: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="main-app">
        <header class="app-header">
            <h1 class="app-title">üîß HVAC Pro Tools</h1>
            <p class="app-subtitle">Professional HVAC Calculation Suite</p>
        </header>

        <div class="download-section">
            <h2>üì± Install as Mobile App</h2>
            <p>Get instant access to all HVAC tools on your mobile device</p>
            <button class="download-btn" onclick="showInstallModal()">üì≤ Install App</button>
        </div>

        <main class="tools-grid">
            <!-- Heat/Cool Load Calculator -->
            <div class="tool-card" onclick="openTool('load-calculator')">
                <span class="tool-icon">üå°Ô∏è</span>
                <h3 class="tool-title">Heat/Cool Load Calculator</h3>
                <p class="tool-description">Calculate heating and cooling loads for residential and commercial spaces.</p>
                <ul class="tool-features">
                    <li>SuperHeat calculations</li>
                    <li>SubCool analysis</li>
                    <li>Multiple refrigerant types</li>
                    <li>Real-time calculations</li>
                </ul>
            </div>

            <!-- SuperHeat / SubCool Calculator -->
            <div class="tool-card" onclick="openTool('superheat-subcool')">
                <span class="tool-icon">üå°Ô∏è</span>
                <h3 class="tool-title">SuperHeat / SubCool Calculator</h3>
                <p class="tool-description">Calculate superheat and subcooling values for refrigeration systems.</p>
                <ul class="tool-features">
                    <li>Multiple refrigerant types</li>
                    <li>A2L safety warnings</li>
                    <li>Real-time calculations</li>
                    <li>Acceptable range indicators</li>
                </ul>
            </div>

            <!-- Refrigeration P-T Chart Tool -->
            <div class="tool-card" onclick="openTool('pt-chart')">
                <span class="tool-icon">üìä</span>
                <h3 class="tool-title">Refrigeration P-T Chart Tool</h3>
                <p class="tool-description">Interactive pressure-temperature charts for refrigeration analysis.</p>
                <ul class="tool-features">
                    <li>Multiple refrigerant options</li>
                    <li>Interactive charts</li>
                    <li>Saturation curves</li>
                    <li>Isotherm visualization</li>
                </ul>
            </div>

            <!-- Pipe/Tube Sizing Calculator -->
            <div class="tool-card coming-soon" onclick="showComingSoon('Pipe/Tube Sizing Calculator')">
                <span class="tool-icon">üîß</span>
                <h3 class="tool-title">Pipe/Tube Sizing Calculator</h3>
                <p class="tool-description">Size refrigerant and water pipes for optimal system performance.</p>
                <ul class="tool-features">
                    <li>Refrigerant line sizing</li>
                    <li>Water pipe calculations</li>
                    <li>Pressure drop analysis</li>
                    <li>Velocity recommendations</li>
                </ul>
            </div>

            <!-- Vent Sizing Calculator -->
            <div class="tool-card coming-soon" onclick="showComingSoon('Vent Sizing Calculator')">
                <span class="tool-icon">üí®</span>
                <h3 class="tool-title">Vent Sizing Calculator</h3>
                <p class="tool-description">Calculate proper vent sizes for HVAC applications.</p>
                <ul class="tool-features">
                    <li>Exhaust vent sizing</li>
                    <li>Supply air calculations</li>
                    <li>Static pressure analysis</li>
                    <li>Code compliance check</li>
                </ul>
            </div>

            <!-- Psychrometric Pressure Calculator -->
            <div class="tool-card coming-soon" onclick="showComingSoon('Psychrometric Pressure Calculator')">
                <span class="tool-icon">üíß</span>
                <h3 class="tool-title">Psychrometric Pressure Calculator</h3>
                <p class="tool-description">Analyze air properties and psychrometric calculations.</p>
                <ul class="tool-features">
                    <li>Humidity calculations</li>
                    <li>Dew point analysis</li>
                    <li>Enthalpy calculations</li>
                    <li>Air mixing processes</li>
                </ul>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-logo">
                <div class="lark-logo">üê¶</div>
                <div>
                    <div class="footer-text">Created by LARK Labs</div>
                    <div style="font-size: 0.8em; opacity: 0.7;">Software Development</div>
                </div>
            </div>
            <div class="copyright">¬© 2025 LARK Labs. All rights reserved.</div>
            <div class="copyright">Professional HVAC calculation tools for technicians and engineers.</div>
            <div class="copyright">This software is provided "as is" without warranty. Use at your own discretion.</div>
        </footer>
    </div>

    <!-- Install Modal -->
    <div id="installModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üì± Install HVAC Pro Tools</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="install-instructions">
                <h3>üì± iOS Installation:</h3>
                <ol>
                    <li>Open this page in Safari</li>
                    <li>Tap the Share button (square with arrow)</li>
                    <li>Scroll down and tap "Add to Home Screen"</li>
                    <li>Tap "Add" to install the app</li>
                </ol>
            </div>

            <div class="install-instructions">
                <h3>ü§ñ Android Installation:</h3>
                <ol>
                    <li>Open this page in Chrome</li>
                    <li>Tap the menu (three dots)</li>
                    <li>Tap "Add to Home screen"</li>
                    <li>Tap "Add" to install the app</li>
                </ol>
            </div>

            <div style="text-align: center; padding: 20px;">
                <button class="download-btn" onclick="installPWA()">üöÄ Install Now</button>
            </div>
        </div>
    </div>

    <!-- Coming Soon Modal -->
    <div id="comingSoonModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üöß Coming Soon</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div style="text-align: center; padding: 20px;">
                <p id="comingSoonText" style="font-size: 1.2em; margin-bottom: 20px;"></p>
                <p>This feature is currently under development and will be available in a future update.</p>
                <button class="download-btn" onclick="closeModal()" style="margin-top: 20px;">OK</button>
            </div>
        </div>
    </div>

    <!-- PWA Install Prompt -->
    <div id="pwaPrompt" class="pwa-prompt">
        <p>üì± Install HVAC Pro Tools for easy access!</p>
        <button onclick="installPWA()">Install</button>
        <button onclick="dismissPrompt()">Later</button>
    </div>

    <!-- Tool Content Areas -->
    <div id="load-calculator" class="app-content">
        <button class="back-btn" onclick="showMainApp()">‚Üê Back to Tools</button>
        <div id="load-calculator-content">
            <!-- Heat/Cool Load calculator content will be loaded here -->
        </div>
    </div>

    <div id="superheat-subcool" class="app-content">
        <button class="back-btn" onclick="showMainApp()">‚Üê Back to Tools</button>
        <div id="superheat-subcool-content">
            <!-- SuperHeat/SubCool calculator content will be loaded here -->
        </div>
    </div>

    <div id="pt-chart" class="app-content">
        <button class="back-btn" onclick="showMainApp()">‚Üê Back to Tools</button>
        <div id="pt-chart-content">
            <!-- P-T Chart content will be loaded here -->
        </div>
    </div>

    <script>
        let deferredPrompt;
        let isInstalled = false;

        // PWA Installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showPWAPrompt();
        });

        window.addEventListener('appinstalled', () => {
            isInstalled = true;
            hidePWAPrompt();
        });

        function showPWAPrompt() {
            if (!isInstalled) {
                document.getElementById('pwaPrompt').style.display = 'block';
            }
        }

        function dismissPrompt() {
            document.getElementById('pwaPrompt').style.display = 'none';
        }

        function hidePWAPrompt() {
            document.getElementById('pwaPrompt').style.display = 'none';
        }

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                        hidePWAPrompt();
                    }
                    deferredPrompt = null;
                });
            } else {
                // Fallback for iOS or if prompt not available
                showInstallModal();
            }
            closeModal();
        }

        function showInstallModal() {
            document.getElementById('installModal').style.display = 'block';
        }

        function showComingSoon(toolName) {
            document.getElementById('comingSoonText').textContent = toolName + ' is coming soon!';
            document.getElementById('comingSoonModal').style.display = 'block';
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        function showMainApp() {
            document.getElementById('main-app').style.display = 'block';
            document.querySelectorAll('.app-content').forEach(content => {
                content.style.display = 'none';
            });
        }

        function openTool(toolId) {
            document.getElementById('main-app').style.display = 'none';
            document.getElementById(toolId).style.display = 'block';
            loadToolContent(toolId);
        }

        function loadToolContent(toolId) {
            const contentDiv = document.getElementById(toolId + '-content');
            
            if (toolId === 'load-calculator') {
                contentDiv.innerHTML = getLoadCalculatorContent();
                initializeLoadCalculator();
            } else if (toolId === 'superheat-subcool') {
                contentDiv.innerHTML = getSuperheatSubcoolContent();
                initializeSuperheatSubcool();
            } else if (toolId === 'pt-chart') {
                contentDiv.innerHTML = getPTChartContent();
                initializePTChart();
            }
        }

        function getLoadCalculatorContent() {
            return `
                <div style="max-width: 1200px; margin: 0 auto;">
                    <h1 style="text-align: center; margin-bottom: 30px; font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); background: linear-gradient(45deg, #ff6b6b, #4ecdc4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">üîß HVAC Super-Heat & Sub-Cooling Calculator</h1>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                        <!-- Super-Heat Calculator -->
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h2 style="margin-bottom: 20px; color: #4ecdc4; font-size: 1.8em; text-align: center;">üå°Ô∏è Super-Heat Calculator</h2>
                            
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Refrigerant Type:</label>
                                <select id="lc-sh-refrigerant" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px; transition: all 0.3s ease;">
                                    <option value="">Select Refrigerant</option>
                                    <optgroup label="Traditional Refrigerants">
                                        <option value="R22">R-22 (HCFC)</option>
                                        <option value="R134a">R-134a (HFC)</option>
                                        <option value="R404A">R-404A (HFC)</option>
                                        <option value="R407C">R-407C (HFC)</option>
                                        <option value="R410A">R-410A (HFC)</option>
                                    </optgroup>
                                    <optgroup label="A2L Low-GWP Refrigerants">
                                        <option value="R32">R-32 (HFC - A2L)</option>
                                        <option value="R454B">R-454B (HFO Blend - A2L)</option>
                                        <option value="R454C">R-454C (HFO Blend - A2L)</option>
                                        <option value="R455A">R-455A (HFO Blend - A2L)</option>
                                        <option value="R452B">R-452B (HFO Blend - A2L)</option>
                                        <option value="R466A">R-466A (HFO Blend - A2L)</option>
                                    </optgroup>
                                    <optgroup label="Natural Refrigerants">
                                        <option value="R290">R-290 (Propane - A3)</option>
                                        <option value="R600a">R-600a (Isobutane - A3)</option>
                                        <option value="R744">R-744 (CO2 - A1)</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Suction Pressure (PSIG):</label>
                                <input type="number" id="lc-suction-pressure" placeholder="Enter suction pressure" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px; transition: all 0.3s ease;">
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Suction Line Temperature (¬∞F):</label>
                                <input type="number" id="lc-suction-temp" placeholder="Enter suction line temp" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px; transition: all 0.3s ease;">
                            </div>

                            <button onclick="calculateSuperheatLC()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px; transition: all 0.3s ease;">Calculate Super-Heat</button>
                            <button onclick="resetSuperheatLC()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px; transition: all 0.3s ease;">Reset</button>

                            <div id="lc-superheat-result" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); border-radius: 10px; padding: 15px; margin-top: 20px; text-align: center; font-size: 1.3em; font-weight: bold; min-height: 60px; display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);">
                                Enter values to calculate super-heat
                            </div>
                        </div>

                        <!-- Sub-Cooling Calculator -->
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h2 style="margin-bottom: 20px; color: #4ecdc4; font-size: 1.8em; text-align: center;">‚ùÑÔ∏è Sub-Cooling Calculator</h2>
                            
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Refrigerant Type:</label>
                                <select id="lc-sc-refrigerant" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px; transition: all 0.3s ease;">
                                    <option value="">Select Refrigerant</option>
                                    <optgroup label="Traditional Refrigerants">
                                        <option value="R22">R-22 (HCFC)</option>
                                        <option value="R134a">R-134a (HFC)</option>
                                        <option value="R404A">R-404A (HFC)</option>
                                        <option value="R407C">R-407C (HFC)</option>
                                        <option value="R410A">R-410A (HFC)</option>
                                    </optgroup>
                                    <optgroup label="A2L Low-GWP Refrigerants">
                                        <option value="R32">R-32 (HFC - A2L)</option>
                                        <option value="R454B">R-454B (HFO Blend - A2L)</option>
                                        <option value="R454C">R-454C (HFO Blend - A2L)</option>
                                        <option value="R455A">R-455A (HFO Blend - A2L)</option>
                                        <option value="R452B">R-452B (HFO Blend - A2L)</option>
                                        <option value="R466A">R-466A (HFO Blend - A2L)</option>
                                    </optgroup>
                                    <optgroup label="Natural Refrigerants">
                                        <option value="R290">R-290 (Propane - A3)</option>
                                        <option value="R600a">R-600a (Isobutane - A3)</option>
                                        <option value="R744">R-744 (CO2 - A1)</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Discharge Pressure (PSIG):</label>
                                <input type="number" id="lc-discharge-pressure" placeholder="Enter discharge pressure" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px; transition: all 0.3s ease;">
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Liquid Line Temperature (¬∞F):</label>
                                <input type="number" id="lc-liquid-temp" placeholder="Enter liquid line temp" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px; transition: all 0.3s ease;">
                            </div>

                            <button onclick="calculateSubcoolingLC()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px; transition: all 0.3s ease;">Calculate Sub-Cooling</button>
                            <button onclick="resetSubcoolingLC()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px; transition: all 0.3s ease;">Reset</button>

                            <div id="lc-subcooling-result" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); border-radius: 10px; padding: 15px; margin-top: 20px; text-align: center; font-size: 1.3em; font-weight: bold; min-height: 60px; display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);">
                                Enter values to calculate sub-cooling
                            </div>
                        </div>
                    </div>

                    <!-- Refrigerant Information Display -->
                    <div id="lc-refrigerant-info" style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px; margin: 20px 0; border-left: 4px solid #4ecdc4; display: none;">
                        <h3>Refrigerant Information</h3>
                        <div id="lc-refrigerant-details"></div>
                    </div>

                    <!-- Quick Reference -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; text-align: center;">
                            <h3 style="color: #4ecdc4; margin-bottom: 10px;">Typical Super-Heat Ranges</h3>
                            <p><strong>Residential AC:</strong> 8-12¬∞F</p>
                            <p><strong>Heat Pumps:</strong> 5-15¬∞F</p>
                            <p><strong>Commercial:</strong> 10-20¬∞F</p>
                            <p><strong>Low Temp:</strong> 20-30¬∞F</p>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; text-align: center;">
                            <h3 style="color: #4ecdc4; margin-bottom: 10px;">Typical Sub-Cooling Ranges</h3>
                            <p><strong>Residential AC:</strong> 8-12¬∞F</p>
                            <p><strong>Heat Pumps:</strong> 5-15¬∞F</p>
                            <p><strong>Commercial:</strong> 10-20¬∞F</p>
                            <p><strong>TXV Systems:</strong> 10-15¬∞F</p>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; text-align: center;">
                            <h3 style="color: #4ecdc4; margin-bottom: 10px;">A2L Safety Notes</h3>
                            <p>‚ö†Ô∏è Mildly flammable</p>
                            <p>üîß Special tools required</p>
                            <p>üìã Additional training needed</p>
                            <p>üõ°Ô∏è Enhanced safety protocols</p>
                        </div>
                    </div>
                </div>

                <style>
                    @media (max-width: 768px) {
                        #load-calculator-content > div > div:nth-child(2) {
                            grid-template-columns: 1fr !important;
                        }
                    }
                </style>
            `;
        }

        function getSuperheatSubcoolContent() {
            return `
                <div style="max-width: 1200px; margin: 0 auto;">
                    <h1 style="text-align: center; margin-bottom: 30px; font-size: 2em; background: linear-gradient(45deg, #ff6b6b, #4ecdc4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">üîß SuperHeat & SubCool Calculator</h1>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                        <!-- Super-Heat Calculator -->
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h2 style="margin-bottom: 20px; color: #4ecdc4; font-size: 1.8em; text-align: center;">üå°Ô∏è Super-Heat Calculator</h2>
                            
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Refrigerant Type:</label>
                                <select id="sh-refrigerant" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px;">
                                    <option value="">Select Refrigerant</option>
                                    <optgroup label="Traditional Refrigerants">
                                        <option value="R22">R-22 (HCFC)</option>
                                        <option value="R134a">R-134a (HFC)</option>
                                        <option value="R404A">R-404A (HFC)</option>
                                        <option value="R407C">R-407C (HFC)</option>
                                        <option value="R410A">R-410A (HFC)</option>
                                    </optgroup>
                                    <optgroup label="A2L Low-GWP Refrigerants">
                                        <option value="R32">R-32 (HFC - A2L)</option>
                                        <option value="R454B">R-454B (HFO Blend - A2L)</option>
                                        <option value="R454C">R-454C (HFO Blend - A2L)</option>
                                        <option value="R455A">R-455A (HFO Blend - A2L)</option>
                                        <option value="R452B">R-452B (HFO Blend - A2L)</option>
                                        <option value="R466A">R-466A (HFO Blend - A2L)</option>
                                    </optgroup>
                                    <optgroup label="Natural Refrigerants">
                                        <option value="R290">R-290 (Propane - A3)</option>
                                        <option value="R600a">R-600a (Isobutane - A3)</option>
                                        <option value="R744">R-744 (CO2 - A1)</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Suction Pressure (PSIG):</label>
                                <input type="number" id="suction-pressure" placeholder="Enter suction pressure" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px;">
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Suction Line Temperature (¬∞F):</label>
                                <input type="number" id="suction-temp" placeholder="Enter suction line temp" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px;">
                            </div>

                            <button onclick="calculateSuperheat()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px;">Calculate Super-Heat</button>
                            <button onclick="resetSuperheat()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px;">Reset</button>

                            <div id="superheat-result" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); border-radius: 10px; padding: 15px; margin-top: 20px; text-align: center; font-size: 1.3em; font-weight: bold; min-height: 60px; display: flex; align-items: center; justify-content: center;">
                                Enter values to calculate super-heat
                            </div>
                        </div>

                        <!-- Sub-Cooling Calculator -->
                        <div style="background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h2 style="margin-bottom: 20px; color: #4ecdc4; font-size: 1.8em; text-align: center;">‚ùÑÔ∏è Sub-Cooling Calculator</h2>
                            
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Refrigerant Type:</label>
                                <select id="sc-refrigerant" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px;">
                                    <option value="">Select Refrigerant</option>
                                    <optgroup label="Traditional Refrigerants">
                                        <option value="R22">R-22 (HCFC)</option>
                                        <option value="R134a">R-134a (HFC)</option>
                                        <option value="R404A">R-404A (HFC)</option>
                                        <option value="R407C">R-407C (HFC)</option>
                                        <option value="R410A">R-410A (HFC)</option>
                                    </optgroup>
                                    <optgroup label="A2L Low-GWP Refrigerants">
                                        <option value="R32">R-32 (HFC - A2L)</option>
                                        <option value="R454B">R-454B (HFO Blend - A2L)</option>
                                        <option value="R454C">R-454C (HFO Blend - A2L)</option>
                                        <option value="R455A">R-455A (HFO Blend - A2L)</option>
                                        <option value="R452B">R-452B (HFO Blend - A2L)</option>
                                        <option value="R466A">R-466A (HFO Blend - A2L)</option>
                                    </optgroup>
                                    <optgroup label="Natural Refrigerants">
                                        <option value="R290">R-290 (Propane - A3)</option>
                                        <option value="R600a">R-600a (Isobutane - A3)</option>
                                        <option value="R744">R-744 (CO2 - A1)</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Discharge Pressure (PSIG):</label>
                                <input type="number" id="discharge-pressure" placeholder="Enter discharge pressure" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px;">
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e0e0e0;">Liquid Line Temperature (¬∞F):</label>
                                <input type="number" id="liquid-temp" placeholder="Enter liquid line temp" style="width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255, 255, 255, 0.9); color: #333; font-size: 16px;">
                            </div>

                            <button onclick="calculateSubcooling()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px;">Calculate Sub-Cooling</button>
                            <button onclick="resetSubcooling()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 10px 5px;">Reset</button>

                            <div id="subcooling-result" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); border-radius: 10px; padding: 15px; margin-top: 20px; text-align: center; font-size: 1.3em; font-weight: bold; min-height: 60px; display: flex; align-items: center; justify-content: center;">
                                Enter values to calculate sub-cooling
                            </div>
                        </div>
                    </div>

                    <!-- Quick Reference -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; text-align: center;">
                            <h3 style="color: #4ecdc4; margin-bottom: 10px;">Typical Super-Heat Ranges</h3>
                            <p><strong>Residential AC:</strong> 8-12¬∞F</p>
                            <p><strong>Heat Pumps:</strong> 5-15¬∞F</p>
                            <p><strong>Commercial:</strong> 10-20¬∞F</p>
                            <p><strong>Low Temp:</strong> 20-30¬∞F</p>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; text-align: center;">
                            <h3 style="color: #4ecdc4; margin-bottom: 10px;">Typical Sub-Cooling Ranges</h3>
                            <p><strong>Residential AC:</strong> 8-12¬∞F</p>
                            <p><strong>Heat Pumps:</strong> 5-15¬∞F</p>
                            <p><strong>Commercial:</strong> 10-20¬∞F</p>
                            <p><strong>TXV Systems:</strong> 10-15¬∞F</p>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; text-align: center;">
                            <h3 style="color: #4ecdc4; margin-bottom: 10px;">A2L Safety Notes</h3>
                            <p>‚ö†Ô∏è Mildly flammable</p>
                            <p>üîß Special tools required</p>
                            <p>üìã Additional training needed</p>
                            <p>üõ°Ô∏è Enhanced safety protocols</p>
                        </div>
                    </div>
                </div>

                <style>
                    @media (max-width: 768px) {
                        #superheat-subcool-content > div > div:first-child {
                            grid-template-columns: 1fr !important;
                        }
                    }
                </style>
            `;
        }

        function getPTChartContent() {
            return `
                <div style="max-width: 1400px; margin: 0 auto;">
                    <h1 style="text-align: center; margin-bottom: 30px; font-size: 2em; background: linear-gradient(45deg, #ff6b6b, #4ecdc4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">üå°Ô∏è Refrigeration P-T Chart Generator</h1>
                    <p style="text-align: center; margin-bottom: 30px; font-size: 1.1em;">Interactive Pressure-Temperature charts for refrigeration analysis</p>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; padding: 20px; background: rgba(52, 152, 219, 0.1); border-radius: 15px; border: 2px solid rgba(52, 152, 219, 0.2);">
                        <div style="display: flex; flex-direction: column;">
                            <label style="font-weight: 600; color: #e0e0e0; margin-bottom: 8px; font-size: 0.95em;">Refrigerant Type:</label>
                            <select id="refrigerant" style="padding: 12px; border: 2px solid #e1e8ed; border-radius: 8px; font-size: 1em; background: rgba(255, 255, 255, 0.9); color: #333;">
                                <optgroup label="Traditional HFCs/HCFCs">
                                    <option value="R22">R-22 (HCFC-22)</option>
                                    <option value="R134a">R-134a (HFC-134a)</option>
                                    <option value="R410A">R-410A (HFC-410A)</option>
                                    <option value="R407C">R-407C (HFC-407C)</option>
                                    <option value="R404A">R-404A (HFC-404A)</option>
                                </optgroup>
                                <optgroup label="A2L Refrigerants (Mildly Flammable)">
                                    <option value="R32">R-32 (HFC-32) üî•</option>
                                    <option value="R454B">R-454B (HFO Blend) üî•</option>
                                    <option value="R452A">R-452A (HFC/HFO Blend) üî•</option>
                                    <option value="R454A">R-454A (HFO Blend) üî•</option>
                                    <option value="R1234yf">R-1234yf (HFO-1234yf) üî•</option>
                                    <option value="R1234ze">R-1234ze (HFO-1234ze) üî•</option>
                                </optgroup>
                                <optgroup label="Natural Refrigerants">
                                    <option value="R290">R-290 (Propane) üî•</option>
                                    <option value="R600a">R-600a (Isobutane) üî•</option>
                                    <option value="R717">R-717 (Ammonia) ‚ö†Ô∏è</option>
                                </optgroup>
                            </select>
                        </div>

                        <div style="display: flex; flex-direction: column;">
                            <label style="font-weight: 600; color: #e0e0e0; margin-bottom: 8px;">Min Temperature (¬∞C):</label>
                            <input type="number" id="tempMin" value="-40" step="5" style="padding: 12px; border: 2px solid #e1e8ed; border-radius: 8px; font-size: 1em; background: rgba(255, 255, 255, 0.9); color: #333;">
                        </div>

                        <div style="display: flex; flex-direction: column;">
                            <label style="font-weight: 600; color: #e0e0e0; margin-bottom: 8px;">Max Temperature (¬∞C):</label>
                            <input type="number" id="tempMax" value="60" step="5" style="padding: 12px; border: 2px solid #e1e8ed; border-radius: 8px; font-size: 1em; background: rgba(255, 255, 255, 0.9); color: #333;">
                        </div>

                        <div style="display: flex; flex-direction: column;">
                            <label style="font-weight: 600; color: #e0e0e0; margin-bottom: 8px;">Chart Type:</label>
                            <select id="chartType" style="padding: 12px; border: 2px solid #e1e8ed; border-radius: 8px; font-size: 1em; background: rgba(255, 255, 255, 0.9); color: #333;">
                                <option value="saturation">Saturation Curve</option>
                                <option value="isotherms">Isotherms</option>
                                <option value="both">Both</option>
                            </select>
                        </div>

                        <div style="display: flex; flex-direction: column;">
                            <label>&nbsp;</label>
                            <button onclick="generateChart()" style="background: linear-gradient(45deg, #3498db, #2980b9); color: white; border: none; cursor: pointer; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; padding: 12px; border-radius: 8px; font-size: 1em;">Generate P-T Chart</button>
                        </div>
                    </div>

                    <div style="position: relative; height: 600px; margin-bottom: 30px; background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);">
                        <canvas id="ptChart"></canvas>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);">
                            <h3 style="margin-bottom: 15px; font-size: 1.3em;">üìä Chart Information</h3>
                            <p id="chartInfo">Select a refrigerant and generate chart to see information</p>
                        </div>

                        <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);">
                            <h3 style="margin-bottom: 15px; font-size: 1.3em;">üß™ Refrigerant Properties</h3>
                            <p id="refProperties">Properties will be displayed after chart generation</p>
                        </div>
                    </div>
                </div>

                <style>
                    @media (max-width: 768px) {
                        #pt-chart-content .chart-container {
                            height: 400px !important;
                        }
                    }
                </style>
            `;
        }

        // Initialize Load Calculator
        function initializeLoadCalculator() {
            initializeRefrigerantDataLC();
            setupEventListenersLC();
        }

        let refrigerantDataLC = {};
        
        function initializeRefrigerantDataLC() {
            refrigerantDataLC = {
                'R22': {
                    name: 'R-22 (HCFC-22)',
                    type: 'HCFC',
                    safety: 'A1',
                    gwp: 1810,
                    pressureTemp: {
                        20: 43.0, 25: 47.5, 30: 52.5, 35: 57.8, 40: 63.5, 45: 69.5, 50: 76.0,
                        55: 83.0, 60: 90.5, 65: 98.5, 70: 107.0, 75: 116.0, 80: 125.5, 85: 135.5,
                        90: 146.0, 95: 157.0, 100: 169.0, 105: 181.5, 110: 194.5, 115: 208.0,
                        120: 222.0, 125: 237.0, 130: 252.5
                    }
                },
                'R134a': {
                    name: 'R-134a (HFC-134a)',
                    type: 'HFC',
                    safety: 'A1',
                    gwp: 1430,
                    pressureTemp: {
                        20: 21.0, 25: 24.0, 30: 27.5, 35: 31.5, 40: 35.7, 45: 40.3, 50: 45.2,
                        55: 50.5, 60: 56.2, 65: 62.3, 70: 68.8, 75: 75.7, 80: 83.1, 85: 91.0,
                        90: 99.4, 95: 108.3, 100: 117.8, 105: 127.9, 110: 138.6, 115: 149.9,
                        120: 161.9, 125: 174.6, 130: 188.0
                    }
                },
                'R404A': {
                    name: 'R-404A (HFC Blend)',
                    type: 'HFC Blend',
                    safety: 'A1',
                    gwp: 3922,
                    pressureTemp: {
                        '-20': 9.5, '-15': 12.0, '-10': 15.0, '-5': 18.5, 0: 22.5, 5: 27.0, 10: 32.0,
                        15: 37.5, 20: 43.5, 25: 50.0, 30: 57.0, 35: 64.5, 40: 72.8, 45: 81.5,
                        50: 91.0, 55: 101.0, 60: 112.0, 65: 123.5, 70: 136.0, 75: 149.0,
                        80: 163.0, 85: 177.5, 90: 193.0
                    }
                },
                'R407C': {
                    name: 'R-407C (HFC Blend)',
                    type: 'HFC Blend',
                    safety: 'A1',
                    gwp: 1774,
                    pressureTemp: {
                        20: 42.0, 25: 46.5, 30: 51.5, 35: 57.0, 40: 63.0, 45: 69.5, 50: 76.5,
                        55: 84.0, 60: 92.0, 65: 100.5, 70: 109.5, 75: 119.0, 80: 129.0, 85: 140.0,
                        90: 151.5, 95: 163.5, 100: 176.0, 105: 189.0, 110: 203.0, 115: 217.5,
                        120: 233.0, 125: 249.0, 130: 266.0
                    }
                },
                'R410A': {
                    name: 'R-410A (HFC Blend)',
                    type: 'HFC Blend',
                    safety: 'A1',
                    gwp: 2088,
                    pressureTemp: {
                        20: 71.0, 25: 78.0, 30: 85.5, 35: 93.5, 40: 102.0, 45: 111.0, 50: 120.5,
                        55: 130.5, 60: 141.0, 65: 152.0, 70: 164.0, 75: 176.5, 80: 189.5, 85: 203.0,
                        90: 217.5, 95: 232.5, 100: 248.0, 105: 264.5, 110: 281.5, 115: 299.0,
                        120: 317.5, 125: 336.5, 130: 356.0
                    }
                },
                'R32': {
                    name: 'R-32 (HFC-32)',
                    type: 'HFC',
                    safety: 'A2L',
                    gwp: 675,
                    pressureTemp: {
                        20: 78.0, 25: 86.0, 30: 94.5, 35: 103.5, 40: 113.0, 45: 123.0, 50: 133.5,
                        55: 144.5, 60: 156.0, 65: 168.0, 70: 180.5, 75: 193.5, 80: 207.0, 85: 221.0,
                        90: 235.5, 95: 250.5, 100: 266.0, 105: 282.0, 110: 298.5, 115: 315.5,
                        120: 333.0, 125: 351.0, 130: 369.5
                    }
                },
                'R454B': {
                    name: 'R-454B (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 466,
                    pressureTemp: {
                        20: 43.5, 25: 48.0, 30: 53.0, 35: 58.5, 40: 64.5, 45: 71.0, 50: 78.0,
                        55: 85.5, 60: 93.5, 65: 102.0, 70: 111.0, 75: 120.5, 80: 130.5, 85: 141.0,
                        90: 152.0, 95: 164.0, 100: 176.5, 105: 189.5, 110: 203.0, 115: 217.0,
                        120: 231.5, 125: 247.0, 130: 263.0
                    }
                },
                'R454C': {
                    name: 'R-454C (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 148,
                    pressureTemp: {
                        20: 42.8, 25: 47.2, 30: 52.2, 35: 57.6, 40: 63.5, 45: 69.8, 50: 76.6,
                        55: 84.0, 60: 91.8, 65: 100.2, 70: 109.2, 75: 118.8, 80: 129.0, 85: 139.8,
                        90: 151.2, 95: 163.2, 100: 175.8, 105: 189.0, 110: 202.8, 115: 217.2,
                        120: 232.2, 125: 247.8, 130: 264.0
                    }
                },
                'R455A': {
                    name: 'R-455A (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 148,
                    pressureTemp: {
                        20: 70.5, 25: 77.5, 30: 85.0, 35: 93.0, 40: 101.5, 45: 110.5, 50: 120.0,
                        55: 130.0, 60: 140.5, 65: 151.5, 70: 163.0, 75: 175.0, 80: 187.5, 85: 200.5,
                        90: 214.0, 95: 228.0, 100: 242.5, 105: 257.5, 110: 273.0, 115: 289.0,
                        120: 305.5, 125: 322.5, 130: 340.0
                    }
                },
                'R452B': {
                    name: 'R-452B (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 698,
                    pressureTemp: {
                        20: 70.8, 25: 77.8, 30: 85.3, 35: 93.3, 40: 101.8, 45: 110.8, 50: 120.3,
                        55: 130.3, 60: 140.8, 65: 151.8, 70: 163.3, 75: 175.3, 80: 187.8, 85: 200.8,
                        90: 214.3, 95: 228.3, 100: 242.8, 105: 257.8, 110: 273.3, 115: 289.3,
                        120: 305.8, 125: 322.8, 130: 340.3
                    }
                },
                'R466A': {
                    name: 'R-466A (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 733,
                    pressureTemp: {
                        20: 71.2, 25: 78.2, 30: 85.7, 35: 93.7, 40: 102.2, 45: 111.2, 50: 120.7,
                        55: 130.7, 60: 141.2, 65: 152.2, 70: 163.7, 75: 175.7, 80: 188.2, 85: 201.2,
                        90: 214.7, 95: 228.7, 100: 243.2, 105: 258.2, 110: 273.7, 115: 289.7,
                        120: 306.2, 125: 323.2, 130: 340.7
                    }
                },
                'R290': {
                    name: 'R-290 (Propane)',
                    type: 'Natural',
                    safety: 'A3',
                    gwp: 3,
                    pressureTemp: {
                        20: 36.0, 25: 41.0, 30: 46.5, 35: 52.5, 40: 59.0, 45: 66.0, 50: 73.5,
                        55: 81.5, 60: 90.0, 65: 99.0, 70: 108.5, 75: 118.5, 80: 129.0, 85: 140.0,
                        90: 151.5, 95: 163.5, 100: 176.0, 105: 189.0, 110: 202.5, 115: 216.5,
                        120: 231.0, 125: 246.0, 130: 261.5
                    }
                },
                'R600a': {
                    name: 'R-600a (Isobutane)',
                    type: 'Natural',
                    safety: 'A3',
                    gwp: 3,
                    pressureTemp: {
                        20: 7.5, 25: 9.0, 30: 10.8, 35: 12.8, 40: 15.0, 45: 17.5, 50: 20.3,
                        55: 23.5, 60: 27.0, 65: 30.8, 70: 35.0, 75: 39.5, 80: 44.5, 85: 49.8,
                        90: 55.5, 95: 61.5, 100: 68.0, 105: 75.0, 110: 82.5, 115: 90.5,
                        120: 99.0, 125: 108.0, 130: 117.5
                    }
                },
                'R744': {
                    name: 'R-744 (CO2)',
                    type: 'Natural',
                    safety: 'A1',
                    gwp: 1,
                    pressureTemp: {
                        '-20': 200.0, '-15': 230.0, '-10': 263.0, '-5': 300.0, 0: 340.0, 5: 383.0, 10: 430.0,
                        15: 481.0, 20: 536.0, 25: 595.0, 30: 659.0, 35: 727.0, 40: 800.0, 45: 878.0,
                        50: 962.0, 55: 1051.0, 60: 1146.0, 65: 1247.0, 70: 1354.0, 75: 1468.0,
                        80: 1589.0, 85: 1717.0, '87.7': 1800.0
                    }
                }
            };
        }

        function setupEventListenersLC() {
            const shRefrigerant = document.getElementById('lc-sh-refrigerant');
            const scRefrigerant = document.getElementById('lc-sc-refrigerant');
            const suctionPressure = document.getElementById('lc-suction-pressure');
            const suctionTemp = document.getElementById('lc-suction-temp');
            const dischargePressure = document.getElementById('lc-discharge-pressure');
            const liquidTemp = document.getElementById('lc-liquid-temp');

            if (shRefrigerant) {
                shRefrigerant.addEventListener('change', function() {
                    calculateSuperheatLC();
                    updateRefrigerantInfoLC('sh');
                });
            }

            if (scRefrigerant) {
                scRefrigerant.addEventListener('change', function() {
                    calculateSubcoolingLC();
                    updateRefrigerantInfoLC('sc');
                });
            }

            if (suctionPressure) {
                suctionPressure.addEventListener('input', calculateSuperheatLC);
            }

            if (suctionTemp) {
                suctionTemp.addEventListener('input', calculateSuperheatLC);
            }

            if (dischargePressure) {
                dischargePressure.addEventListener('input', calculateSubcoolingLC);
            }

            if (liquidTemp) {
                liquidTemp.addEventListener('input', calculateSubcoolingLC);
            }
        }

        function interpolateTemperatureLC(pressure, pressureTempData) {
            const pressures = Object.keys(pressureTempData).map(Number).sort(function(a, b) { return a - b; });
            const temperatures = pressures.map(function(p) { return pressureTempData[p]; });
            
            // Find the two pressures that bracket our input
            let lowerIndex = -1;
            for (let i = 0; i < temperatures.length - 1; i++) {
                if (pressure >= temperatures[i] && pressure <= temperatures[i + 1]) {
                    lowerIndex = i;
                    break;
                }
            }
            
            if (lowerIndex === -1) {
                // Extrapolate
                if (pressure < temperatures[0]) {
                    return pressures[0];
                } else {
                    return pressures[pressures.length - 1];
                }
            }
            
            // Linear interpolation
            const p1 = temperatures[lowerIndex];
            const p2 = temperatures[lowerIndex + 1];
            const t1 = pressures[lowerIndex];
            const t2 = pressures[lowerIndex + 1];
            
            return t1 + (pressure - p1) * (t2 - t1) / (p2 - p1);
        }

        window.calculateSuperheatLC = function() {
            const refrigerant = document.getElementById('lc-sh-refrigerant').value;
            const suctionPressure = parseFloat(document.getElementById('lc-suction-pressure').value);
            const suctionTemp = parseFloat(document.getElementById('lc-suction-temp').value);
            const resultDiv = document.getElementById('lc-superheat-result');

            if (!refrigerant || isNaN(suctionPressure) || isNaN(suctionTemp)) {
                resultDiv.textContent = 'Please fill in all fields';
                resultDiv.className = 'result';
                return;
            }

            const refData = refrigerantDataLC[refrigerant];
            if (!refData) {
                resultDiv.textContent = 'Refrigerant data not available';
                resultDiv.className = 'result';
                return;
            }

            // Convert gauge pressure to absolute pressure for calculation
            const absolutePressure = suctionPressure + 14.7;
            const saturatedTemp = interpolateTemperatureLC(absolutePressure, refData.pressureTemp);
            const superheat = suctionTemp - saturatedTemp;

            let className = 'result';
            let message = 'Super-Heat: ' + superheat.toFixed(1) + '¬∞F';

            // Determine if superheat is in acceptable range
            if (superheat >= 5 && superheat <= 20) {
                resultDiv.style.background = 'linear-gradient(45deg, #2ecc71, #27ae60)';
                message += ' ‚úì GOOD';
            } else if (superheat >= 20 && superheat <= 30) {
                resultDiv.style.background = 'linear-gradient(45deg, #f39c12, #e67e22)';
                message += ' ‚ö†Ô∏è HIGH';
            } else if (superheat < 5) {
                resultDiv.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
                message += ' ‚ùå TOO LOW';
            } else {
                resultDiv.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
                message += ' ‚ùå TOO HIGH';
            }

            message += '\\nSaturated Temp: ' + saturatedTemp.toFixed(1) + '¬∞F';

            resultDiv.textContent = message;
        };

        window.calculateSubcoolingLC = function() {
            const refrigerant = document.getElementById('lc-sc-refrigerant').value;
            const dischargePressure = parseFloat(document.getElementById('lc-discharge-pressure').value);
            const liquidTemp = parseFloat(document.getElementById('lc-liquid-temp').value);
            const resultDiv = document.getElementById('lc-subcooling-result');

            if (!refrigerant || isNaN(dischargePressure) || isNaN(liquidTemp)) {
                resultDiv.textContent = 'Please fill in all fields';
                resultDiv.style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a24)';
                return;
            }

            const refData = refrigerantDataLC[refrigerant];
            if (!refData) {
                resultDiv.textContent = 'Refrigerant data not available';
                resultDiv.style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a24)';
                return;
            }

            // Convert gauge pressure to absolute pressure for calculation
            const absolutePressure = dischargePressure + 14.7;
            const saturatedTemp = interpolateTemperatureLC(absolutePressure, refData.pressureTemp);
            const subcooling = saturatedTemp - liquidTemp;

            let message = 'Sub-Cooling: ' + subcooling.toFixed(1) + '¬∞F';

            // Determine if subcooling is in acceptable range
            if (subcooling >= 5 && subcooling <= 20) {
                resultDiv.style.background = 'linear-gradient(45deg, #2ecc71, #27ae60)';
                message += ' ‚úì GOOD';
            } else if (subcooling >= 20 && subcooling <= 30) {
                resultDiv.style.background = 'linear-gradient(45deg, #f39c12, #e67e22)';
                message += ' ‚ö†Ô∏è HIGH';
            } else if (subcooling < 5) {
                resultDiv.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
                message += ' ‚ùå TOO LOW';
            } else {
                resultDiv.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
                message += ' ‚ùå TOO HIGH';
            }

            message += '\\nSaturated Temp: ' + saturatedTemp.toFixed(1) + '¬∞F';

            resultDiv.textContent = message;
        };

        function updateRefrigerantInfoLC(section) {
            const refrigerant = document.getElementById('lc-' + section + '-refrigerant').value;
            const infoDiv = document.getElementById('lc-refrigerant-info');
            const detailsDiv = document.getElementById('lc-refrigerant-details');

            if (!refrigerant) {
                infoDiv.style.display = 'none';
                return;
            }

            const refData = refrigerantDataLC[refrigerant];
            if (!refData) return;

            let safetyWarning = '';
            if (refData.safety === 'A2L') {
                safetyWarning = '<div style="background: linear-gradient(45deg, #e74c3c, #c0392b); border-radius: 10px; padding: 15px; margin: 20px 0; border-left: 4px solid #fff;">‚ö†Ô∏è A2L REFRIGERANT: Mildly flammable - Special handling procedures required</div>';
            } else if (refData.safety === 'A3') {
                safetyWarning = '<div style="background: linear-gradient(45deg, #e74c3c, #c0392b); border-radius: 10px; padding: 15px; margin: 20px 0; border-left: 4px solid #fff;">üî• A3 REFRIGERANT: Highly flammable - Extreme caution required</div>';
            }

            const a2lIndicator = refData.safety === 'A2L' ? '<span style="background: linear-gradient(45deg, #f39c12, #e67e22); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8em; margin-left: 10px;">A2L</span>' : '';

            detailsDiv.innerHTML = '<h4>' + refData.name + ' ' + a2lIndicator + '</h4>' +
                '<p><strong>Type:</strong> ' + refData.type + '</p>' +
                '<p><strong>Safety Classification:</strong> ' + refData.safety + '</p>' +
                '<p><strong>Global Warming Potential (GWP):</strong> ' + refData.gwp + '</p>' +
                safetyWarning;

            infoDiv.style.display = 'block';
        }

        window.resetSuperheatLC = function() {
            document.getElementById('lc-sh-refrigerant').value = '';
            document.getElementById('lc-suction-pressure').value = '';
            document.getElementById('lc-suction-temp').value = '';
            document.getElementById('lc-superheat-result').textContent = 'Enter values to calculate super-heat';
            document.getElementById('lc-superheat-result').style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a24)';
            document.getElementById('lc-refrigerant-info').style.display = 'none';
        };

        window.resetSubcoolingLC = function() {
            document.getElementById('lc-sc-refrigerant').value = '';
            document.getElementById('lc-discharge-pressure').value = '';
            document.getElementById('lc-liquid-temp').value = '';
            document.getElementById('lc-subcooling-result').textContent = 'Enter values to calculate sub-cooling';
            document.getElementById('lc-subcooling-result').style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a24)';
            document.getElementById('lc-refrigerant-info').style.display = 'none';
        };

        // Initialize SuperHeat/SubCool Calculator
        function initializeSuperheatSubcool() {
            // Load Chart.js if not already loaded
            if (typeof Chart === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js';
                script.onload = setupSuperheatSubcoolListeners;
                document.head.appendChild(script);
            } else {
                setupSuperheatSubcoolListeners();
            }
        }

        // Initialize P-T Chart
        function initializePTChart() {
            // Load Chart.js if not already loaded
            if (typeof Chart === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js';
                script.onload = () => {
                    setupPTChartFunctionality();
                    generateChart(); // Generate initial chart
                };
                document.head.appendChild(script);
            } else {
                setupPTChartFunctionality();
                generateChart(); // Generate initial chart
            }
        }

        function setupSuperheatSubcoolListeners() {
            // Initialize refrigerant data and setup event listeners for SuperHeat/SubCool calculator
            // This would include all the JavaScript from the original SuperHeat/SubCool calculator
            console.log('SuperHeat/SubCool calculator initialized');
        }

        function setupPTChartFunctionality() {
            // Initialize refrigerant data and setup functionality for P-T Chart
            // This would include all the JavaScript from the original P-T Chart tool
            console.log('P-T Chart tool initialized');
        }

        // PWA Manifest
        const manifest = {
            name: "HVAC Pro Tools",
            short_name: "HVAC Tools",
            description: "Professional HVAC calculation tools for technicians and engineers",
            start_url: "/",
            display: "standalone",
            background_color: "#1e3c72",
            theme_color: "#4ecdc4",
            orientation: "portrait",
            icons: [
                {
                    src: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9Ijk2IiBjeT0iOTYiIHI9Ijk2IiBmaWxsPSIjNGVjZGM0Ii8+Cjx0ZXh0IHg9Ijk2IiB5PSIxMTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI4MCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfkp43PC90ZXh0Pgo8L3N2Zz4K",
                    sizes: "192x192",
                    type: "image/svg+xml"
                },
                {
                    src: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjI1NiIgY3k9IjI1NiIgcj0iMjU2IiBmaWxsPSIjNGVjZGM0Ii8+Cjx0ZXh0IHg9IjI1NiIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjAwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+SuDwvdGV4dD4KPC9zdmc+Cg==",
                    sizes: "512x512",
                    type: "image/svg+xml"
                }
            ]
        };

        // Create manifest blob URL
        const manifestBlob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(manifestBlob);
        document.getElementById('app-manifest').href = manifestURL;

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal();
            }
        }

        // Show PWA prompt after 10 seconds if not installed
        setTimeout(() => {
            if (!isInstalled && !deferredPrompt) {
                showPWAPrompt();
            }
        }, 10000);

        // Placeholder functions for SuperHeat/SubCool calculator
        window.calculateSuperheat = function() {
            console.log('Calculate superheat function would be implemented here');
            document.getElementById('superheat-result').innerHTML = 'Calculation functionality would be implemented here';
        };

        window.calculateSubcooling = function() {
            console.log('Calculate subcooling function would be implemented here');
            document.getElementById('subcooling-result').innerHTML = 'Calculation functionality would be implemented here';
        };

        window.resetSuperheat = function() {
            document.getElementById('sh-refrigerant').value = '';
            document.getElementById('suction-pressure').value = '';
            document.getElementById('suction-temp').value = '';
            document.getElementById('superheat-result').innerHTML = 'Enter values to calculate super-heat';
        };

        window.resetSubcooling = function() {
            document.getElementById('sc-refrigerant').value = '';
            document.getElementById('discharge-pressure').value = '';
            document.getElementById('liquid-temp').value = '';
            document.getElementById('subcooling-result').innerHTML = 'Enter values to calculate sub-cooling';
        };

        // Placeholder function for P-T Chart generator
        window.generateChart = function() {
            console.log('Generate chart function would be implemented here');
            document.getElementById('chartInfo').innerHTML = 'Chart generation functionality would be implemented here';
            document.getElementById('refProperties').innerHTML = 'Refrigerant properties would be displayed here';
        };
    </script>
</body>
</html>