<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canadian A2L Refrigerant Safety Certificate Course - LARK Labs Enhanced</title>
    
    <!-- PWA Manifest for Enhanced Resource -->
    <link rel="manifest" href="a2l-resource-manifest.json">
    <meta name="theme-color" content="#2a5298">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="A2L Resource Enhanced">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../a2l/A2L_Pro_Logo.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .header h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header .subtitle {
            color: #2a5298;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .course-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #2a5298;
        }

        .info-card h3 {
            color: #1e3c72;
            margin-bottom: 5px;
        }

        /* Enhanced Progress Container */
        .progress-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.5s ease;
        }

        .detailed-progress {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .progress-metric {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #1e3c72;
        }

        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        /* Course Tools */
        .course-tools {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .search-container {
            position: relative;
            flex: 1;
            min-width: 250px;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .search-result-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

        .search-result-item:hover {
            background: #f8f9fa;
        }

        .tool-btn {
            background: #2a5298;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tool-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.3);
        }

        /* Enhanced Module Navigation */
        .module-navigation {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .module-nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .module-nav-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .module-nav-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(42, 82, 152, 0.15);
        }

        .module-nav-item.current {
            background: #2a5298;
            color: white;
            border-color: #1e3c72;
        }

        .module-nav-item.completed {
            background: #28a745;
            color: white;
        }

        .module-icon {
            width: 40px;
            height: 40px;
            background: #1e3c72;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .module-nav-item.current .module-icon {
            background: #fff;
            color: #2a5298;
        }

        .module-nav-item.completed .module-icon {
            background: #fff;
            color: #28a745;
        }

        /* Enhanced Modules */
        .module {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .module.active {
            display: block;
        }

        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2a5298;
        }

        .module-number {
            width: 60px;
            height: 60px;
            background: #2a5298;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-right: 20px;
        }

        .module-header div h2 {
            color: #1e3c72;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .module-header div p {
            color: #666;
            font-size: 1.1em;
        }

        /* Enhanced Content Sections */
        .content-section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #2a5298;
        }

        .content-section h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .content-section h4 {
            color: #2a5298;
            margin: 20px 0 10px 0;
            font-size: 1.1em;
        }

        /* Canadian Regulatory Content */
        .regulation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .regulation-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .regulation-card:hover {
            border-color: #2a5298;
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.15);
        }

        .regulation-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .regulation-icon {
            width: 50px;
            height: 50px;
            background: #2a5298;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            margin-right: 15px;
        }

        /* Provincial Status Grid */
        .provincial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .province-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            position: relative;
        }

        .province-card.pending {
            border-left-color: #ffc107;
        }

        .province-card.not-adopted {
            border-left-color: #dc3545;
        }

        .province-status {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-none {
            background: #f8d7da;
            color: #721c24;
        }

        /* Interactive Tables */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .comparison-table th {
            background: #2a5298;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        /* Quiz Enhancements */
        .quiz-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .quiz-question {
            font-size: 1.1em;
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 20px;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
        }

        .quiz-option {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: #e9ecef;
            border-color: #2a5298;
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Video Integration */
        .video-section {
            margin: 30px 0;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .video-card {
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .video-card:hover {
            border-color: #2a5298;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(42, 82, 152, 0.15);
        }

        .video-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            background: #333;
            position: relative;
            overflow: hidden;
        }

        .video-thumbnail iframe {
            width: 100%;
            height: 100%;
        }

        .video-info {
            padding: 15px;
        }

        .video-title {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 10px;
        }

        .video-description {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
        }

        /* GWP Calculator */
        .calculator-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .calculator-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 10px 20px;
            background: #f8f9fa;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #2a5298;
            color: white;
        }

        .calculator-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            margin-bottom: 5px;
            font-weight: 600;
            color: #1e3c72;
        }

        .input-group input,
        .input-group select {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 14px;
        }

        .calculator-results {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid #28a745;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .result-item {
            text-align: center;
        }

        .result-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #1e3c72;
        }

        .result-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        /* Flashcards */
        .flashcard-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .flashcard-modal {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
        }

        .flashcard {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .flashcard:hover {
            background: #e9ecef;
        }

        .flashcard.flipped {
            background: #2a5298;
            color: white;
        }

        .flashcard-term {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .flashcard-definition {
            font-size: 1.1em;
            line-height: 1.5;
        }

        /* Bookmarks and Notes */
        .bookmark-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            margin-left: 10px;
        }

        .bookmark-btn.active {
            background: #ffc107;
            color: #212529;
        }

        .notes-panel {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            width: 300px;
            height: 400px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 9000;
            padding: 20px;
        }

        .notes-textarea {
            width: 100%;
            height: 300px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            font-family: inherit;
            resize: none;
        }

        /* Navigation */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-button {
            background: #2a5298;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-button:hover:not(:disabled) {
            background: #1e3c72;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(42, 82, 152, 0.3);
        }

        .nav-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .course-info {
                grid-template-columns: 1fr;
            }

            .module-nav-grid {
                grid-template-columns: 1fr;
            }

            .regulation-grid,
            .provincial-grid {
                grid-template-columns: 1fr;
            }

            .video-grid {
                grid-template-columns: 1fr;
            }

            .calculator-inputs,
            .result-grid {
                grid-template-columns: 1fr;
            }

            .course-tools > div {
                flex-direction: column;
                gap: 10px;
            }

            .search-container {
                min-width: unset;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Canadian A2L Refrigerant Safety Certificate Course</h1>
            <p class="subtitle">Comprehensive Resource for Mildly Flammable Refrigerants - Enhanced Edition</p>
            
            <div class="course-info">
                <div class="info-card">
                    <h3>Duration</h3>
                    <p>10-12 hours</p>
                </div>
                <div class="info-card">
                    <h3>Certificate</h3>
                    <p>Downloadable PDF</p>
                </div>
                <div class="info-card">
                    <h3>Modules</h3>
                    <p>12 Comprehensive</p>
                </div>
                <div class="info-card">
                    <h3>Compliance</h3>
                    <p>CSA B52:23 & Provincial</p>
                </div>
            </div>
        </div>

        <!-- Enhanced Progress Tracking -->
        <div class="progress-container">
            <h3 style="margin-bottom: 15px; color: #1e3c72;">Course Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText" style="margin-top: 10px; color: #666;">Module 1 of 12 - 0% Complete</p>
            
            <div class="detailed-progress">
                <div class="progress-metric">
                    <div class="metric-value" id="timeSpent">0h 0m</div>
                    <div class="metric-label">Time Spent</div>
                </div>
                <div class="progress-metric">
                    <div class="metric-value" id="quizScore">--</div>
                    <div class="metric-label">Quiz Average</div>
                </div>
                <div class="progress-metric">
                    <div class="metric-value" id="bookmarks">0</div>
                    <div class="metric-label">Bookmarks</div>
                </div>
                <div class="progress-metric">
                    <div class="metric-value" id="certificates">0</div>
                    <div class="metric-label">Certificates</div>
                </div>
            </div>
        </div>
        
        <!-- Course Search and Tools -->
        <div class="course-tools">
            <div style="display: flex; gap: 15px; flex-wrap: wrap; align-items: center;">
                <div class="search-container">
                    <input type="text" id="courseSearch" placeholder="Search course content..." style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 25px; font-size: 14px;">
                    <div id="searchResults" class="search-results"></div>
                </div>
                <button class="tool-btn" onclick="toggleBookmarks()" style="background: #17a2b8;">📚 Bookmarks</button>
                <button class="tool-btn" onclick="toggleNotes()" style="background: #ffc107; color: #212529;">📝 Notes</button>
                <button class="tool-btn" onclick="toggleFlashcards()" style="background: #e83e8c;">🃏 Flashcards</button>
                <button class="tool-btn" onclick="exportProgress()" style="background: #6c757d;">📊 Export Progress</button>
            </div>
        </div>

        <!-- Enhanced Module Navigation -->
        <div class="module-navigation">
            <h3 style="margin-bottom: 20px; color: #1e3c72;">Course Modules</h3>
            <div class="module-nav-grid" id="moduleNavGrid">
                <!-- Module navigation items will be generated by JavaScript -->
            </div>
        </div>

        <!-- Module 1: Introduction to A2L Refrigerants -->
        <div class="module active" id="module1">
            <div class="module-header">
                <div class="module-number">1</div>
                <div>
                    <h2>Introduction to A2L Refrigerants <button class="bookmark-btn" onclick="toggleBookmark(1)" data-bookmark="1">🔖</button></h2>
                    <p>Understanding the basics of mildly flammable refrigerants and their growing importance in Canada</p>
                </div>
            </div>

            <div class="module-content">
                <div class="content-section">
                    <h3>What Are A2L Refrigerants?</h3>
                    <p>A2L refrigerants are mildly flammable refrigerants classified under the ASHRAE safety standards. The "A" indicates low toxicity, the "2" indicates higher flammability than A1 refrigerants, and the "L" indicates lower flammability than standard A2 refrigerants.</p>
                    
                    <h4>Key Characteristics</h4>
                    <ul>
                        <li>Lower Global Warming Potential (GWP) compared to traditional HFC refrigerants</li>
                        <li>Mild flammability with high ignition energy requirements</li>
                        <li>Low burning velocity (≤10 cm/s)</li>
                        <li>Require specific safety measures and handling procedures</li>
                        <li>Becoming mandatory under Canadian and international environmental regulations</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h3>Common A2L Refrigerants in Canada</h3>
                    <div class="comparison-table">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>Refrigerant</th>
                                    <th>Chemical Name</th>
                                    <th>GWP</th>
                                    <th>Primary Applications</th>
                                    <th>Status in Canada</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>R-32</strong></td>
                                    <td>Difluoromethane</td>
                                    <td>675</td>
                                    <td>Residential AC, Heat Pumps</td>
                                    <td>Widely Available</td>
                                </tr>
                                <tr>
                                    <td><strong>R-454B</strong></td>
                                    <td>HFO-1234yf/R-32 blend</td>
                                    <td>466</td>
                                    <td>Commercial HVAC</td>
                                    <td>Growing Market</td>
                                </tr>
                                <tr>
                                    <td><strong>R-454A</strong></td>
                                    <td>HFO-1234ze/R-32 blend</td>
                                    <td>238</td>
                                    <td>Heat Pumps, Chillers</td>
                                    <td>Emerging</td>
                                </tr>
                                <tr>
                                    <td><strong>R-452B</strong></td>
                                    <td>R-32/R-125/R-1234yf blend</td>
                                    <td>698</td>
                                    <td>Retrofit Applications</td>
                                    <td>Transitional</td>
                                </tr>
                                <tr>
                                    <td><strong>R-1234ze(E)</strong></td>
                                    <td>trans-1,3,3,3-Tetrafluoroprop-1-ene</td>
                                    <td>7</td>
                                    <td>Commercial Chillers</td>
                                    <td>Limited Use</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Why A2L Refrigerants Matter in Canada</h3>
                    <div class="regulation-grid">
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🌍</div>
                                <div>
                                    <h4>Environmental Impact</h4>
                                    <p>Kigali Amendment to Montreal Protocol</p>
                                </div>
                            </div>
                            <p>Canada committed to HFC phase-down by 85% by 2036, making A2L refrigerants essential for meeting climate goals.</p>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">⚖️</div>
                                <div>
                                    <h4>Regulatory Compliance</h4>
                                    <p>Federal ODSHAR Regulations</p>
                                </div>
                            </div>
                            <p>New GWP restrictions effective January 1, 2025, limiting high-GWP refrigerants in new equipment.</p>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🏭</div>
                                <div>
                                    <h4>Industry Adoption</h4>
                                    <p>Manufacturer Transition</p>
                                </div>
                            </div>
                            <p>Major HVAC manufacturers transitioning to A2L refrigerants as standard offering in Canadian market.</p>
                        </div>
                    </div>
                </div>

                <!-- Video Section -->
                <div class="video-section">
                    <h3>Educational Videos: Introduction to A2L Refrigerants</h3>
                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <div class="video-title">Understanding A2L Refrigerants</div>
                                <div class="video-description">Comprehensive overview of A2L refrigerant properties, safety characteristics, and applications in HVAC systems.</div>
                            </div>
                        </div>
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <iframe src="https://www.youtube.com/embed/UCWp7BGt8Bq68IuAuOfWJmJA" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <div class="video-title">LARK Labs: A2L Safety Fundamentals</div>
                                <div class="video-description">Essential safety practices and handling procedures for A2L refrigerants in Canadian HVAC applications.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Quiz -->
                <div class="quiz-container">
                    <div class="quiz-question">Which of the following is the most commonly used A2L refrigerant in residential applications?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-answer="a">a) R-410A</div>
                        <div class="quiz-option" data-answer="b">b) R-134a</div>
                        <div class="quiz-option" data-answer="c">c) R-32</div>
                        <div class="quiz-option" data-answer="d">d) R-22</div>
                    </div>
                    <div class="quiz-feedback">
                        <p><strong>Correct!</strong> R-32 is the most widely adopted A2L refrigerant for residential heat pumps and air conditioners.</p>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button" disabled>← Previous Module</button>
                    <button class="nav-button" onclick="nextModule()">Next Module →</button>
                </div>
            </div>
        </div>

        <!-- Module 2: Canadian Regulatory Framework -->
        <div class="module" id="module2">
            <div class="module-header">
                <div class="module-number">2</div>
                <div>
                    <h2>Canadian Regulatory Framework <button class="bookmark-btn" onclick="toggleBookmark(2)" data-bookmark="2">🔖</button></h2>
                    <p>Comprehensive overview of Canadian codes, standards, and regulatory requirements</p>
                </div>
            </div>

            <div class="module-content">
                <div class="content-section">
                    <h3>CSA B52:23 Mechanical Refrigeration Code</h3>
                    <p>The latest edition of CSA B52 incorporates comprehensive requirements for A2L refrigerants, marking a significant update to Canadian refrigeration safety standards.</p>
                    
                    <h4>Key Changes in CSA B52:23</h4>
                    <ul>
                        <li>New classification system for A2L refrigerants</li>
                        <li>Specific installation requirements for different charge sizes</li>
                        <li>Enhanced ventilation requirements for A2L systems</li>
                        <li>Updated testing and commissioning procedures</li>
                        <li>Modified service and maintenance requirements</li>
                    </ul>

                    <div class="regulation-grid">
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">📋</div>
                                <div>
                                    <h4>Charge Size Classifications</h4>
                                </div>
                            </div>
                            <ul>
                                <li><strong>Small Systems:</strong> ≤3.3 kg (7.3 lbs)</li>
                                <li><strong>Medium Systems:</strong> 3.3-11 kg (7.3-24.3 lbs)</li>
                                <li><strong>Large Systems:</strong> >11 kg (24.3 lbs)</li>
                                <li>Each category has specific requirements</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🏠</div>
                                <div>
                                    <h4>Installation Locations</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Occupied spaces with restrictions</li>
                                <li>Mechanical rooms with enhanced ventilation</li>
                                <li>Outdoor installations preferred</li>
                                <li>Basement restrictions apply</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🔍</div>
                                <div>
                                    <h4>Detection Requirements</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Refrigerant leak detection systems</li>
                                <li>Automatic shutdown capabilities</li>
                                <li>Alarm systems and notifications</li>
                                <li>Regular testing and maintenance</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Provincial Adoption Status</h3>
                    <p>The adoption of CSA B52:23 varies by province, with different implementation timelines and additional requirements.</p>
                    
                    <div class="provincial-grid">
                        <div class="province-card">
                            <div class="province-status status-active">ACTIVE</div>
                            <h4>Ontario (TSSA)</h4>
                            <p><strong>Effective:</strong> October 1, 2024</p>
                            <p>Comprehensive A2L regulations with enhanced inspection requirements and mandatory resource for technicians.</p>
                        </div>
                        <div class="province-card pending">
                            <div class="province-status status-pending">PENDING</div>
                            <h4>British Columbia</h4>
                            <p><strong>Expected:</strong> April 2025</p>
                            <p>BC Safety Authority reviewing CSA B52:23 adoption with additional seismic considerations for equipment.</p>
                        </div>
                        <div class="province-card pending">
                            <div class="province-status status-pending">PENDING</div>
                            <h4>Alberta (ABSA)</h4>
                            <p><strong>Expected:</strong> June 2025</p>
                            <p>ABSA developing province-specific requirements for harsh climate conditions and remote installations.</p>
                        </div>
                        <div class="province-card">
                            <div class="province-status status-active">ACTIVE</div>
                            <h4>Quebec (CNESST)</h4>
                            <p><strong>Effective:</strong> January 1, 2025</p>
                            <p>Adopted with French language requirements and additional worker safety provisions.</p>
                        </div>
                        <div class="province-card pending">
                            <div class="province-status status-pending">PLANNING</div>
                            <h4>Saskatchewan</h4>
                            <p><strong>Expected:</strong> Late 2025</p>
                            <p>TSASK reviewing adoption timeline and resource requirements for technicians.</p>
                        </div>
                        <div class="province-card pending">
                            <div class="province-status status-pending">PLANNING</div>
                            <h4>Manitoba</h4>
                            <p><strong>Expected:</strong> 2026</p>
                            <p>Coordinating with other prairie provinces for consistent regional implementation.</p>
                        </div>
                    </div>
                </div>

                <div class="content-section">
                    <h3>ODSHAR Federal Regulations</h3>
                    <p>The Ozone-depleting Substances and Halocarbon Alternatives Regulations create federal requirements that complement provincial codes.</p>
                    
                    <h4>Key ODSHAR Requirements (Effective January 1, 2025)</h4>
                    <div class="comparison-table">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>Application</th>
                                    <th>GWP Limit</th>
                                    <th>Affected Refrigerants</th>
                                    <th>Compliance Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Room AC Units</td>
                                    <td>750</td>
                                    <td>R-410A prohibited</td>
                                    <td>Jan 1, 2025</td>
                                </tr>
                                <tr>
                                    <td>Centrifugal Chillers</td>
                                    <td>700</td>
                                    <td>R-134a restricted</td>
                                    <td>Jan 1, 2025</td>
                                </tr>
                                <tr>
                                    <td>Positive Displacement Chillers</td>
                                    <td>300</td>
                                    <td>Most HFCs prohibited</td>
                                    <td>Jan 1, 2027</td>
                                </tr>
                                <tr>
                                    <td>Residential Heat Pumps</td>
                                    <td>750</td>
                                    <td>R-410A restricted</td>
                                    <td>Jan 1, 2025</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-section">
                    <h3>HRAI Certification Requirements</h3>
                    <p>The Heating, Refrigeration and Air Conditioning Institute of Canada has developed specific certification programs for A2L refrigerants.</p>
                    
                    <div class="regulation-grid">
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🎓</div>
                                <div>
                                    <h4>Technician Certification</h4>
                                </div>
                            </div>
                            <ul>
                                <li>A2L Safety Awareness (8 hours)</li>
                                <li>A2L Installation Specialist (16 hours)</li>
                                <li>A2L Service Technician (24 hours)</li>
                                <li>Annual recertification required</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🏢</div>
                                <div>
                                    <h4>Contractor Licensing</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Company-wide A2L certification</li>
                                <li>Minimum certified technician ratios</li>
                                <li>Equipment and tool requirements</li>
                                <li>Insurance and bonding updates</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">📚</div>
                                <div>
                                    <h4>Resource Requirements</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Theoretical knowledge assessment</li>
                                <li>Practical skills demonstration</li>
                                <li>Emergency response resource</li>
                                <li>Continuing education credits</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Interactive Quiz -->
                <div class="quiz-container">
                    <div class="quiz-question">When did the TSSA in Ontario implement A2L refrigerant regulations based on CSA B52:23?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-answer="a">a) January 1, 2024</div>
                        <div class="quiz-option" data-answer="b">b) October 1, 2024</div>
                        <div class="quiz-option" data-answer="c">c) January 1, 2025</div>
                        <div class="quiz-option" data-answer="d">d) April 1, 2025</div>
                    </div>
                    <div class="quiz-feedback">
                        <p><strong>Correct!</strong> Ontario TSSA implemented A2L regulations on October 1, 2024, making it one of the first provinces to adopt the new standards.</p>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button" onclick="previousModule()">← Previous Module</button>
                    <button class="nav-button" onclick="nextModule()">Next Module →</button>
                </div>
            </div>
        </div>

        <!-- Module 3: A2L Properties and Hazards -->
        <div class="module" id="module3">
            <div class="module-header">
                <div class="module-number">3</div>
                <div>
                    <h2>A2L Properties and Hazards <button class="bookmark-btn" onclick="toggleBookmark(3)" data-bookmark="3">🔖</button></h2>
                    <p>Understanding physical and chemical characteristics, flammability, and safety considerations</p>
                </div>
            </div>

            <div class="module-content">
                <div class="content-section">
                    <h3>Physical and Chemical Properties</h3>
                    <p>A2L refrigerants have unique physical and chemical properties that affect their handling, storage, and use in HVAC systems.</p>
                    
                    <div class="comparison-table">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>R-32</th>
                                    <th>R-454B</th>
                                    <th>R-454A</th>
                                    <th>R-410A (Comparison)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Molecular Weight</strong></td>
                                    <td>52.02</td>
                                    <td>69.5</td>
                                    <td>81.4</td>
                                    <td>72.6</td>
                                </tr>
                                <tr>
                                    <td><strong>Boiling Point (°C)</strong></td>
                                    <td>-78.4</td>
                                    <td>-47.1</td>
                                    <td>-46.9</td>
                                    <td>-51.4</td>
                                </tr>
                                <tr>
                                    <td><strong>Critical Temperature (°C)</strong></td>
                                    <td>78.1</td>
                                    <td>98.9</td>
                                    <td>82.5</td>
                                    <td>71.3</td>
                                </tr>
                                <tr>
                                    <td><strong>Critical Pressure (kPa)</strong></td>
                                    <td>5782</td>
                                    <td>4069</td>
                                    <td>3882</td>
                                    <td>4901</td>
                                </tr>
                                <tr>
                                    <td><strong>GWP (AR5)</strong></td>
                                    <td>675</td>
                                    <td>466</td>
                                    <td>238</td>
                                    <td>2088</td>
                                </tr>
                                <tr>
                                    <td><strong>ODP</strong></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Flammability Characteristics</h3>
                    <p>Understanding flammability is crucial for safe handling and system design with A2L refrigerants.</p>
                    
                    <div class="regulation-grid">
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🔥</div>
                                <div>
                                    <h4>Lower Flammability Limit (LFL)</h4>
                                </div>
                            </div>
                            <ul>
                                <li><strong>R-32:</strong> 14.4% by volume</li>
                                <li><strong>R-454B:</strong> 9.7% by volume</li>
                                <li><strong>R-454A:</strong> 11.7% by volume</li>
                                <li>Concentrations below LFL will not ignite</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">⚡</div>
                                <div>
                                    <h4>Minimum Ignition Energy (MIE)</h4>
                                </div>
                            </div>
                            <ul>
                                <li><strong>R-32:</strong> 10-20 mJ</li>
                                <li><strong>R-454B:</strong> >10 mJ</li>
                                <li><strong>R-454A:</strong> >15 mJ</li>
                                <li>Higher than static electricity (typically 1-5 mJ)</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">💨</div>
                                <div>
                                    <h4>Burning Velocity</h4>
                                </div>
                            </div>
                            <ul>
                                <li><strong>All A2L:</strong> ≤10 cm/s</li>
                                <li>Classified as "mildly flammable"</li>
                                <li>Slower than natural gas (~37 cm/s)</li>
                                <li>Reduces flame propagation risk</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Storage and Transportation Hazards</h3>
                    <p>Proper storage and transportation are essential for preventing accidents and maintaining refrigerant quality.</p>
                    
                    <h4>Storage Requirements</h4>
                    <ul>
                        <li><strong>Temperature Control:</strong> Store in cool, dry locations away from heat sources</li>
                        <li><strong>Ventilation:</strong> Adequate ventilation to prevent refrigerant accumulation</li>
                        <li><strong>Ignition Sources:</strong> Minimum 3 meters from electrical panels, furnaces, water heaters</li>
                        <li><strong>Cylinder Orientation:</strong> Store upright with proper valve protection</li>
                        <li><strong>Quantity Limits:</strong> Follow local fire codes for maximum storage quantities</li>
                    </ul>

                    <h4>Transportation Safety</h4>
                    <ul>
                        <li><strong>Vehicle Ventilation:</strong> Open vehicles or well-ventilated closed vehicles</li>
                        <li><strong>Cylinder Securing:</strong> Proper restraint systems to prevent movement</li>
                        <li><strong>Emergency Equipment:</strong> Fire extinguisher and spill containment materials</li>
                        <li><strong>Documentation:</strong> Proper shipping papers and hazard placards</li>
                        <li><strong>Temperature Monitoring:</strong> Avoid extreme temperature exposure during transport</li>
                    </ul>
                </div>

                <!-- GWP Calculator Tool -->
                <div class="calculator-section">
                    <h3>Global Warming Potential (GWP) Calculator</h3>
                    <p>Calculate the environmental impact of different refrigerant choices.</p>
                    
                    <div class="calculator-tabs">
                        <button class="tab-btn active" onclick="switchCalculatorTab('gwp')">GWP Comparison</button>
                        <button class="tab-btn" onclick="switchCalculatorTab('emissions')">CO2 Emissions</button>
                        <button class="tab-btn" onclick="switchCalculatorTab('lifecycle')">Lifecycle Impact</button>
                    </div>
                    
                    <div id="gwp-calculator" class="calculator-tab">
                        <div class="calculator-inputs">
                            <div class="input-group">
                                <label>Refrigerant Type</label>
                                <select id="refrigerantType">
                                    <option value="R-32">R-32 (GWP: 675)</option>
                                    <option value="R-454B">R-454B (GWP: 466)</option>
                                    <option value="R-454A">R-454A (GWP: 238)</option>
                                    <option value="R-410A">R-410A (GWP: 2088)</option>
                                    <option value="R-134a">R-134a (GWP: 1430)</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>System Charge (kg)</label>
                                <input type="number" id="systemCharge" value="5" min="0.1" max="1000" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>Annual Leakage Rate (%)</label>
                                <input type="number" id="leakageRate" value="10" min="0" max="100" step="1">
                            </div>
                            <div class="input-group">
                                <label>System Lifetime (years)</label>
                                <input type="number" id="systemLifetime" value="15" min="1" max="50" step="1">
                            </div>
                        </div>
                        
                        <button class="nav-button" onclick="calculateGWP()">Calculate Environmental Impact</button>
                        
                        <div class="calculator-results" id="gwpResults" style="display: none;">
                            <div class="result-grid">
                                <div class="result-item">
                                    <div class="result-value" id="totalCO2">0</div>
                                    <div class="result-label">Total CO2-eq (tonnes)</div>
                                </div>
                                <div class="result-item">
                                    <div class="result-value" id="annualCO2">0</div>
                                    <div class="result-label">Annual CO2-eq (tonnes)</div>
                                </div>
                                <div class="result-item">
                                    <div class="result-value" id="comparison">--%</div>
                                    <div class="result-label">vs R-410A</div>
                                </div>
                                <div class="result-item">
                                    <div class="result-value" id="carbonTax">$0</div>
                                    <div class="result-label">Carbon Tax Impact (CAD)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video Section -->
                <div class="video-section">
                    <h3>Educational Videos: A2L Properties and Safety</h3>
                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <div class="video-title">A2L Flammability Testing</div>
                                <div class="video-description">Demonstration of A2L refrigerant flammability characteristics and testing procedures.</div>
                            </div>
                        </div>
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <iframe src="https://www.youtube.com/embed/UCWp7BGt8Bq68IuAuOfWJmJA" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <div class="video-title">Safe Storage Practices</div>
                                <div class="video-description">Best practices for storing and handling A2L refrigerants in compliance with Canadian regulations.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Quiz -->
                <div class="quiz-container">
                    <div class="quiz-question">What is the Lower Flammability Limit (LFL) for R-32 refrigerant?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-answer="a">a) 5.2% by volume</div>
                        <div class="quiz-option" data-answer="b">b) 10.4% by volume</div>
                        <div class="quiz-option" data-answer="c">c) 14.4% by volume</div>
                        <div class="quiz-option" data-answer="d">d) 18.2% by volume</div>
                    </div>
                    <div class="quiz-feedback">
                        <p><strong>Correct!</strong> R-32 has an LFL of 14.4% by volume, meaning concentrations below this level will not support combustion.</p>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button" onclick="previousModule()">← Previous Module</button>
                    <button class="nav-button" onclick="nextModule()">Next Module →</button>
                </div>
            </div>
        </div>

        <!-- Module 4: System Design & Installation -->
        <div class="module" id="module4">
            <div class="module-header">
                <div class="module-number">4</div>
                <div>
                    <h2>System Design & Installation <button class="bookmark-btn" onclick="toggleBookmark(4)" data-bookmark="4">🔖</button></h2>
                    <p>Design requirements and installation best practices for A2L refrigerant systems</p>
                </div>
            </div>

            <div class="module-content">
                <div class="content-section">
                    <h3>Design Registration Exemptions</h3>
                    <p>Under CSA B52:23, certain A2L systems are exempt from design registration requirements, streamlining the installation process.</p>
                    
                    <h4>Exemption Categories (Systems up to 500kW)</h4>
                    <div class="regulation-grid">
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🏠</div>
                                <div>
                                    <h4>Residential Systems</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Single-family dwellings</li>
                                <li>Charge ≤ 11 kg total</li>
                                <li>Standard factory-built equipment</li>
                                <li>Outdoor installation preferred</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">🏢</div>
                                <div>
                                    <h4>Small Commercial</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Retail spaces ≤ 500 m²</li>
                                <li>Self-contained units</li>
                                <li>Adequate ventilation provided</li>
                                <li>Professional installation required</li>
                            </ul>
                        </div>
                        <div class="regulation-card">
                            <div class="regulation-header">
                                <div class="regulation-icon">⚠️</div>
                                <div>
                                    <h4>Restrictions Apply</h4>
                                </div>
                            </div>
                            <ul>
                                <li>Basements require special approval</li>
                                <li>Schools and hospitals excluded</li>
                                <li>High-occupancy areas restricted</li>
                                <li>Provincial variations exist</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Canadian Installation Requirements</h3>
                    <p>Specific requirements for installing A2L systems in Canadian climates and building types.</p>
                    
                    <div class="comparison-table">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>System Size</th>
                                    <th>Location Restrictions</th>
                                    <th>Ventilation Requirements</th>
                                    <th>Detection Required</th>
                                    <th>Documentation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>≤ 3.3 kg</strong></td>
                                    <td>Most locations permitted</td>
                                    <td>Natural ventilation acceptable</td>
                                    <td>Visual inspection only</td>
                                    <td>Installation record</td>
                                </tr>
                                <tr>
                                    <td><strong>3.3-11 kg</strong></td>
                                    <td>Restricted in bedrooms</td>
                                    <td>Enhanced natural or mechanical</td>
                                    <td>Leak detection recommended</td>
                                    <td>Compliance declaration</td>
                                </tr>
                                <tr>
                                    <td><strong>>11 kg</strong></td>
                                    <td>Mechanical rooms preferred</td>
                                    <td>Mechanical ventilation required</td>
                                    <td>Automatic leak detection</td>
                                    <td>Engineering review</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="quiz-container">
                    <div class="quiz-question">What is the maximum charge size for A2L systems eligible for design registration exemption?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-answer="a">a) 3.3 kg</div>
                        <div class="quiz-option" data-answer="b">b) 11 kg</div>
                        <div class="quiz-option" data-answer="c">c) 500 kW equivalent</div>
                        <div class="quiz-option" data-answer="d">d) No limit</div>
                    </div>
                    <div class="quiz-feedback">
                        <p><strong>Correct!</strong> Systems up to 500kW (cooling capacity) may be eligible for design registration exemption under certain conditions.</p>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button" onclick="previousModule()">← Previous Module</button>
                    <button class="nav-button" onclick="nextModule()">Next Module →</button>
                </div>
            </div>
        </div>

        <!-- Module 8: Case Studies - Commercial Applications -->
        <div class="module" id="module8">
            <div class="module-header">
                <div class="module-number">8</div>
                <div>
                    <h2>Case Studies - Commercial Applications <button class="bookmark-btn" onclick="toggleBookmark(8)" data-bookmark="8">🔖</button></h2>
                    <p>Real-world Canadian commercial A2L installations and lessons learned</p>
                </div>
            </div>

            <div class="module-content">
                <div class="content-section">
                    <h3>Case Study 1: Toronto Office Building Heat Pump Retrofit</h3>
                    <div class="regulation-card">
                        <div class="regulation-header">
                            <div class="regulation-icon">🏢</div>
                            <div>
                                <h4>Project Overview</h4>
                                <p>Downtown Toronto, 15-story office building</p>
                            </div>
                        </div>
                        <p><strong>Challenge:</strong> Replace aging R-410A rooftop units with A2L heat pumps to meet Toronto's Green Building Standard.</p>
                        <p><strong>Solution:</strong> Installed R-32 VRF system with enhanced safety measures</p>
                        <p><strong>Key Considerations:</strong></p>
                        <ul>
                            <li>TSSA approval process and timeline (6 weeks)</li>
                            <li>Rooftop installation minimized indoor exposure</li>
                            <li>Automatic leak detection with building automation integration</li>
                            <li>Staff resource on emergency procedures</li>
                            <li>40% reduction in GWP impact</li>
                        </ul>
                        <p><strong>Outcome:</strong> Successful installation, 25% energy savings, full regulatory compliance</p>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Case Study 2: Vancouver Hospital HVAC Upgrade</h3>
                    <div class="regulation-card">
                        <div class="regulation-header">
                            <div class="regulation-icon">🏥</div>
                            <div>
                                <h4>Healthcare Application</h4>
                                <p>Vancouver General Hospital - Outpatient Wing</p>
                            </div>
                        </div>
                        <p><strong>Challenge:</strong> Upgrade chillers while maintaining critical temperature control and meeting health authority requirements.</p>
                        <p><strong>Solution:</strong> Phased installation of R-454B scroll chillers with redundant safety systems</p>
                        <p><strong>Unique Requirements:</strong></p>
                        <ul>
                            <li>BC Safety Authority enhanced inspection protocol</li>
                            <li>Medical gas system isolation procedures</li>
                            <li>24/7 monitoring and emergency response plan</li>
                            <li>Staff and patient safety protocols</li>
                            <li>Backup system integration during transition</li>
                        </ul>
                        <p><strong>Lessons Learned:</strong> Extended planning phase critical, stakeholder communication essential</p>
                    </div>
                </div>

                <div class="content-section">
                    <h3>Case Study 3: Calgary Retail Chain A2L Rollout</h3>
                    <div class="regulation-card">
                        <div class="regulation-header">
                            <div class="regulation-icon">🛒</div>
                            <div>
                                <h4>Multi-Site Implementation</h4>
                                <p>50-store retail chain across Alberta</p>
                            </div>
                        </div>
                        <p><strong>Challenge:</strong> Standardize A2L systems across diverse store formats and prepare for ABSA regulation adoption.</p>
                        <p><strong>Approach:</strong></p>
                        <ul>
                            <li>Pilot program with 5 stores using R-32 units</li>
                            <li>Technician resources program development</li>
                            <li>Standardized installation procedures</li>
                            <li>Central monitoring system implementation</li>
                            <li>Cold climate performance validation</li>
                        </ul>
                        <p><strong>Results:</strong> Successful rollout, 35% GWP reduction, improved energy efficiency in extreme cold</p>
                    </div>
                </div>

                <div class="video-section">
                    <h3>Commercial Installation Videos</h3>
                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <div class="video-title">Commercial A2L Installation Best Practices</div>
                                <div class="video-description">Professional installation techniques for large commercial A2L systems.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button" onclick="previousModule()">← Previous Module</button>
                    <button class="nav-button" onclick="nextModule()">Next Module →</button>
                </div>
            </div>
        </div>

        <!-- Module 12: Final Assessment -->
        <div class="module" id="module12">
            <div class="module-header">
                <div class="module-number">12</div>
                <div>
                    <h2>Final Assessment & Certificate <button class="bookmark-btn" onclick="toggleBookmark(12)" data-bookmark="12">🔖</button></h2>
                    <p>Comprehensive assessment and certification for A2L refrigerant safety</p>
                </div>
            </div>

            <div class="module-content">
                <div id="finalAssessment" style="display: none;">
                    <!-- Assessment questions would go here -->
                    <div class="content-section">
                        <h3>Final Assessment</h3>
                        <p>This comprehensive assessment covers all aspects of A2L refrigerant safety and Canadian regulations.</p>
                        <div id="assessmentQuestions"></div>
                        <button class="nav-button" onclick="submitAssessment()">Submit Assessment</button>
                    </div>
                </div>

                <div id="certificateSection" style="display: none;">
                    <div class="content-section">
                        <h3>Congratulations!</h3>
                        <div style="background: white; padding: 40px; border-radius: 15px; border: 3px solid #2a5298; text-align: center; margin: 30px 0;">
                            <img src="../a2l/A2L_Pro_Logo.png" alt="LARK Labs Logo" style="max-width: 150px; margin-bottom: 20px;">
                            <h2 style="color: #1e3c72; margin-bottom: 20px;">Certificate of Completion</h2>
                            <p style="font-size: 1em; margin-bottom: 8px;">This is to certify that</p>
                            <h2 id="studentName" style="color: #2a5298; border-bottom: 3px solid #2a5298; display: inline-block; padding-bottom: 6px; margin: 15px 0; font-size: 1.8em;">Student Name</h2>
                            <p style="font-size: 1em; margin-bottom: 15px;">has successfully completed the Canadian A2L Refrigerant Safety Certificate Course<br>
                            with a passing score and demonstrated competency in:</p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin: 18px 0; text-align: left; font-size: 0.9em;">
                                <div>
                                    <div style="margin: 6px 0;">✓ A2L refrigerant properties and hazards</div>
                                    <div style="margin: 6px 0;">✓ Canadian regulatory requirements (CSA B52:23, ODSHAR, TSSA)</div>
                                    <div style="margin: 6px 0;">✓ Safe handling and installation practices</div>
                                    <div style="margin: 6px 0;">✓ System design and maintenance procedures</div>
                                </div>
                                <div>
                                    <div style="margin: 6px 0;">✓ Emergency response protocols</div>
                                    <div style="margin: 6px 0;">✓ Code compliance and documentation</div>
                                    <div style="margin: 6px 0;">✓ Environmental impact assessment</div>
                                    <div style="margin: 6px 0;">✓ Provincial regulatory variations</div>
                                </div>
                            </div>
                            <p style="margin-top: 20px; font-size: 0.9em;">This certificate demonstrates the holder's comprehensive knowledge of safe practices for working with mildly flammable A2L refrigerants in accordance with Canadian codes and standards.</p>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 15px; border-top: 2px solid #e9ecef;">
                            <div style="text-align: center;">
                                <div style="border-top: 2px solid #2a5298; width: 200px; margin-bottom: 5px;"></div>
                                <div style="font-family: 'Brush Script MT', cursive, 'Dancing Script', cursive; font-size: 1.4em; color: #2a5298; margin-bottom: 3px;">Michael J Kapin</div>
                                <div style="font-weight: bold; color: #1e3c72; font-size: 0.9em;">LARK Labs</div>
                                <div style="font-size: 0.8em; color: #666;">Professional HVAC Resource Provider</div>
                            </div>
                            <div style="text-align: center; font-size: 0.85em; color: #666;">
                                <div><strong>Course Duration:</strong> 10-12 hours</div>
                                <div><strong>Passing Score:</strong> 80%</div>
                                <div><strong>Your Score:</strong> <span id="certificateScore"></span>%</div>
                                <div><strong>Certificate ID:</strong> A2L-<span id="certificateId"></span></div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px; display: flex; gap: 15px; justify-content: center;">
                            <button class="nav-button" onclick="printCertificate()">🖨️ Print Certificate</button>
                            <button class="nav-button" onclick="downloadCertificate()">📄 Download PDF</button>
                            <button class="nav-button" onclick="exportTrainingAnalytics()" style="background: #6c757d;">📊 Export Resource Record</button>
                        </div>
                    </div>
                </div>

                <div id="startAssessment">
                    <div style="text-align: center; margin: 40px 0;">
                        <h3>Ready to Begin Your Final Assessment?</h3>
                        <p>Make sure you've completed all previous modules before starting.</p>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                            <h4>Assessment Overview</h4>
                            <ul style="text-align: left; max-width: 600px; margin: 0 auto;">
                                <li>50 comprehensive questions covering all course materials</li>
                                <li>80% passing score required for certification</li>
                                <li>Time limit: 90 minutes</li>
                                <li>Canadian regulatory focus with provincial variations</li>
                                <li>Practical scenarios and safety procedures</li>
                            </ul>
                        </div>
                        <button class="nav-button" onclick="startFinalAssessment()" style="font-size: 1.2em; padding: 20px 40px;">🚀 Start Assessment</button>
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-button" onclick="previousModule()">← Previous Module</button>
                    <button class="nav-button" disabled>Assessment Complete</button>
                </div>
            </div>
        </div>

    </div>

    <!-- Bookmarks Panel -->
    <div id="bookmarksPanel" class="notes-panel" style="display: none;">
        <h4>Bookmarks</h4>
        <div id="bookmarksList"></div>
        <button onclick="toggleBookmarks()" style="margin-top: 10px;">Close</button>
    </div>

    <!-- Notes Panel -->
    <div id="notesPanel" class="notes-panel" style="display: none;">
        <h4>Course Notes</h4>
        <textarea id="courseNotes" class="notes-textarea" placeholder="Take notes here..."></textarea>
        <button onclick="saveNotes()" style="margin-top: 10px;">Save Notes</button>
        <button onclick="toggleNotes()" style="margin-left: 10px;">Close</button>
    </div>

    <!-- Flashcard Modal -->
    <div id="flashcardContainer" class="flashcard-container">
        <div class="flashcard-modal">
            <h3>A2L Refrigerant Flashcards</h3>
            <div id="flashcard" class="flashcard" onclick="flipCard()">
                <div class="flashcard-term" id="flashcardTerm">Click to start studying!</div>
                <div class="flashcard-definition" id="flashcardDefinition" style="display: none;"></div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="previousCard()">Previous</button>
                <span id="cardProgress">1 of 20</span>
                <button onclick="nextCard()">Next</button>
                <button onclick="toggleFlashcards()" style="margin-left: 20px;">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Course Management System
        let currentModule = 1;
        let moduleProgress = {1: false, 2: false, 3: false, 4: false, 5: false, 6: false, 7: false, 8: false, 9: false, 10: false, 11: false, 12: false};
        let totalModules = 12;
        let courseStartTime = new Date();
        let timeSpent = 0;
        let bookmarks = JSON.parse(localStorage.getItem('a2l_bookmarks') || '[]');
        let notes = localStorage.getItem('a2l_notes') || '';
        let quizScores = JSON.parse(localStorage.getItem('a2l_quiz_scores') || '[]');
        let flashcardIndex = 0;
        let flashcardFlipped = false;

        // Initialize course on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeModuleNavigation();
            updateProgress();
            setupInteractiveElements();
            loadSavedData();
            startTimeTracking();
            setupSearch();
        });

        // Enhanced Module Navigation
        function initializeModuleNavigation() {
            const moduleNavGrid = document.getElementById('moduleNavGrid');
            const modules = [
                {title: 'Introduction to A2L', icon: '1'},
                {title: 'Canadian Regulatory Framework', icon: '2'},
                {title: 'Properties & Hazards', icon: '3'},
                {title: 'System Design & Installation', icon: '4'},
                {title: 'Safe Work Practices & PPE', icon: '5'},
                {title: 'Servicing & Maintenance', icon: '6'},
                {title: 'Emergency Response', icon: '7'},
                {title: 'Case Studies - Commercial', icon: '8'},
                {title: 'Case Studies - Residential', icon: '9'},
                {title: 'Advanced Applications', icon: '10'},
                {title: 'Quality Assurance & Testing', icon: '11'},
                {title: 'Final Assessment', icon: '12'}
            ];

            moduleNavGrid.innerHTML = '';
            modules.forEach((module, index) => {
                const moduleItem = document.createElement('div');
                moduleItem.className = 'module-nav-item';
                if (index + 1 === currentModule) moduleItem.classList.add('current');
                if (moduleProgress[index + 1]) moduleItem.classList.add('completed');
                
                moduleItem.innerHTML = `
                    <div class="module-icon">${moduleProgress[index + 1] ? '✓' : module.icon}</div>
                    <div>
                        <div style="font-weight: 600;">${module.title}</div>
                        <div style="font-size: 0.9em; color: #666;">Module ${index + 1}</div>
                    </div>
                `;
                
                moduleItem.onclick = () => goToModule(index + 1);
                moduleNavGrid.appendChild(moduleItem);
            });
        }

        function goToModule(moduleNumber) {
            if (moduleNumber < 1 || moduleNumber > totalModules) return;
            
            // Hide current module
            document.getElementById(`module${currentModule}`).classList.remove('active');
            
            // Show new module
            currentModule = moduleNumber;
            const newModule = document.getElementById(`module${currentModule}`);
            if (newModule) {
                newModule.classList.add('active');
            }
            
            // Update navigation
            initializeModuleNavigation();
            updateProgress();
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function nextModule() {
            if (currentModule < totalModules) {
                moduleProgress[currentModule] = true;
                saveProgress();
                goToModule(currentModule + 1);
            }
        }

        function previousModule() {
            if (currentModule > 1) {
                goToModule(currentModule - 1);
            }
        }

        // Enhanced Progress Tracking
        function updateProgress() {
            const completedModules = Object.values(moduleProgress).filter(Boolean).length;
            const progressPercent = (completedModules / totalModules) * 100;
            
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('progressText').textContent = 
                `Module ${currentModule} of ${totalModules} - ${Math.round(progressPercent)}% Complete`;
            
            // Update time spent
            const hours = Math.floor(timeSpent / 3600);
            const minutes = Math.floor((timeSpent % 3600) / 60);
            document.getElementById('timeSpent').textContent = `${hours}h ${minutes}m`;
            
            // Update quiz average
            const avgScore = quizScores.length > 0 ? 
                Math.round(quizScores.reduce((a, b) => a + b, 0) / quizScores.length) : 0;
            document.getElementById('quizScore').textContent = avgScore > 0 ? avgScore + '%' : '--';
            
            // Update bookmarks count
            document.getElementById('bookmarks').textContent = bookmarks.length;
            
            // Update certificates (placeholder)
            document.getElementById('certificates').textContent = completedModules >= totalModules ? '1' : '0';
        }

        function startTimeTracking() {
            setInterval(() => {
                timeSpent++;
                if (timeSpent % 60 === 0) { // Update every minute
                    updateProgress();
                    saveProgress();
                }
            }, 1000);
        }

        // Interactive Elements Setup
        function setupInteractiveElements() {
            // Quiz handling
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('quiz-option')) {
                    handleQuizAnswer(e.target);
                }
            });

            // GWP Calculator
            const inputs = ['refrigerantType', 'systemCharge', 'leakageRate', 'systemLifetime'];
            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', calculateGWP);
                }
            });
        }

        function handleQuizAnswer(option) {
            const container = option.closest('.quiz-container');
            if (!container) return;
            
            const options = container.querySelectorAll('.quiz-option');
            const feedback = container.querySelector('.quiz-feedback');
            
            // Clear previous selections
            options.forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            
            // Mark selection
            option.classList.add('selected');
            
            // Determine correct answer (simplified for demo)
            const correctAnswers = {
                'Which of the following is the most commonly used A2L refrigerant': 'c',
                'When did the TSSA in Ontario implement A2L refrigerant regulations': 'b',
                'What is the Lower Flammability Limit (LFL) for R-32 refrigerant': 'c'
            };
            
            const questionText = container.querySelector('.quiz-question').textContent;
            let correctAnswer = null;
            
            for (const [key, value] of Object.entries(correctAnswers)) {
                if (questionText.includes(key)) {
                    correctAnswer = value;
                    break;
                }
            }
            
            const isCorrect = option.dataset.answer === correctAnswer;
            
            if (feedback) {
                if (isCorrect) {
                    option.classList.add('correct');
                    feedback.classList.add('show', 'correct');
                    feedback.classList.remove('incorrect');
                    quizScores.push(100);
                } else {
                    option.classList.add('incorrect');
                    feedback.classList.add('show', 'incorrect');
                    feedback.classList.remove('correct');
                    feedback.innerHTML = '<p><strong>Incorrect.</strong> Please review the material and try again.</p>';
                    quizScores.push(0);
                }
                saveProgress();
                updateProgress();
            }
        }

        // GWP Calculator
        function calculateGWP() {
            const refrigerantType = document.getElementById('refrigerantType')?.value;
            const systemCharge = parseFloat(document.getElementById('systemCharge')?.value || 0);
            const leakageRate = parseFloat(document.getElementById('leakageRate')?.value || 0) / 100;
            const systemLifetime = parseFloat(document.getElementById('systemLifetime')?.value || 0);
            
            const gwpValues = {
                'R-32': 675,
                'R-454B': 466,
                'R-454A': 238,
                'R-410A': 2088,
                'R-134a': 1430
            };
            
            const gwp = gwpValues[refrigerantType] || 0;
            const totalCO2 = (systemCharge * gwp * leakageRate * systemLifetime + systemCharge * gwp) / 1000;
            const annualCO2 = totalCO2 / systemLifetime;
            const comparisonR410A = systemCharge * gwpValues['R-410A'] * leakageRate * systemLifetime / 1000;
            const comparison = comparisonR410A > 0 ? ((comparisonR410A - totalCO2) / comparisonR410A * 100) : 0;
            const carbonTax = totalCO2 * 65; // $65/tonne CO2-eq in Canada (2024)
            
            // Update results
            const resultsDiv = document.getElementById('gwpResults');
            if (resultsDiv) {
                resultsDiv.style.display = 'block';
                document.getElementById('totalCO2').textContent = totalCO2.toFixed(2);
                document.getElementById('annualCO2').textContent = annualCO2.toFixed(2);
                document.getElementById('comparison').textContent = comparison >= 0 ? 
                    `-${comparison.toFixed(1)}%` : `+${Math.abs(comparison).toFixed(1)}%`;
                document.getElementById('carbonTax').textContent = `$${carbonTax.toFixed(0)}`;
            }
        }

        // Search Functionality
        function setupSearch() {
            const searchInput = document.getElementById('courseSearch');
            const searchResults = document.getElementById('searchResults');
            
            if (searchInput && searchResults) {
                searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    if (query.length < 2) {
                        searchResults.style.display = 'none';
                        return;
                    }
                    
                    // Simple search implementation
                    const searchableContent = document.querySelectorAll('.module-content p, .module-content h3, .module-content h4, .module-content li');
                    const results = [];
                    
                    searchableContent.forEach((element, index) => {
                        if (element.textContent.toLowerCase().includes(query) && results.length < 10) {
                            results.push({
                                text: element.textContent.substring(0, 100) + '...',
                                element: element
                            });
                        }
                    });
                    
                    displaySearchResults(results);
                });
            }
        }

        function displaySearchResults(results) {
            const searchResults = document.getElementById('searchResults');
            if (!searchResults) return;
            
            if (results.length === 0) {
                searchResults.innerHTML = '<div class="search-result-item">No results found</div>';
            } else {
                searchResults.innerHTML = results.map(result => 
                    `<div class="search-result-item" onclick="scrollToElement(this)" data-target="${result.element.tagName}">${result.text}</div>`
                ).join('');
            }
            
            searchResults.style.display = 'block';
        }

        function scrollToElement(resultItem) {
            // Simplified scroll to element functionality
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('courseSearch').value = '';
        }

        // Bookmark System
        function toggleBookmark(moduleId) {
            const bookmark = {
                moduleId: moduleId,
                title: document.querySelector(`#module${moduleId} h2`).textContent.replace('🔖', '').trim(),
                timestamp: new Date().toISOString()
            };
            
            const existingIndex = bookmarks.findIndex(b => b.moduleId === moduleId);
            const bookmarkBtn = document.querySelector(`[data-bookmark="${moduleId}"]`);
            
            if (existingIndex >= 0) {
                bookmarks.splice(existingIndex, 1);
                bookmarkBtn.classList.remove('active');
            } else {
                bookmarks.push(bookmark);
                bookmarkBtn.classList.add('active');
            }
            
            localStorage.setItem('a2l_bookmarks', JSON.stringify(bookmarks));
            updateProgress();
            updateBookmarksList();
        }

        function toggleBookmarks() {
            const panel = document.getElementById('bookmarksPanel');
            if (panel.style.display === 'none') {
                updateBookmarksList();
                panel.style.display = 'block';
            } else {
                panel.style.display = 'none';
            }
        }

        function updateBookmarksList() {
            const list = document.getElementById('bookmarksList');
            if (!list) return;
            
            if (bookmarks.length === 0) {
                list.innerHTML = '<p>No bookmarks yet</p>';
            } else {
                list.innerHTML = bookmarks.map(bookmark => 
                    `<div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                        <strong>Module ${bookmark.moduleId}:</strong> ${bookmark.title}
                        <br><small>${new Date(bookmark.timestamp).toLocaleDateString()}</small>
                        <button onclick="goToModule(${bookmark.moduleId}); toggleBookmarks();" style="float: right;">Go to Module</button>
                    </div>`
                ).join('');
            }
        }

        // Notes System
        function toggleNotes() {
            const panel = document.getElementById('notesPanel');
            const textarea = document.getElementById('courseNotes');
            
            if (panel.style.display === 'none') {
                textarea.value = notes;
                panel.style.display = 'block';
            } else {
                panel.style.display = 'none';
            }
        }

        function saveNotes() {
            notes = document.getElementById('courseNotes').value;
            localStorage.setItem('a2l_notes', notes);
            alert('Notes saved successfully!');
        }

        // Flashcard System
        const flashcards = [
            {term: 'A2L', definition: 'Mildly flammable refrigerants with low toxicity and lower flammability than A2 refrigerants'},
            {term: 'GWP', definition: 'Global Warming Potential - measure of how much heat a greenhouse gas traps in the atmosphere'},
            {term: 'LFL', definition: 'Lower Flammability Limit - minimum concentration of refrigerant vapor that can ignite'},
            {term: 'CSA B52', definition: 'Canadian standard for mechanical refrigeration systems and heat pump installations'},
            {term: 'TSSA', definition: 'Technical Standards and Safety Authority - regulatory body in Ontario'},
            {term: 'ODSHAR', definition: 'Ozone-depleting Substances and Halocarbon Alternatives Regulations'},
            {term: 'R-32', definition: 'Most common A2L refrigerant with GWP of 675, used in residential heat pumps'},
            {term: 'MIE', definition: 'Minimum Ignition Energy - lowest energy required to ignite refrigerant vapor'},
            {term: 'HRAI', definition: 'Heating, Refrigeration and Air Conditioning Institute of Canada'},
            {term: 'Burning Velocity', definition: 'Speed at which flame front moves through refrigerant-air mixture (≤10 cm/s for A2L)'}
        ];

        function toggleFlashcards() {
            const container = document.getElementById('flashcardContainer');
            if (container.style.display === 'none' || !container.style.display) {
                container.style.display = 'flex';
                showCard(0);
            } else {
                container.style.display = 'none';
            }
        }

        function showCard(index) {
            flashcardIndex = index;
            flashcardFlipped = false;
            
            const card = flashcards[index];
            document.getElementById('flashcardTerm').textContent = card.term;
            document.getElementById('flashcardTerm').style.display = 'block';
            document.getElementById('flashcardDefinition').textContent = card.definition;
            document.getElementById('flashcardDefinition').style.display = 'none';
            document.getElementById('cardProgress').textContent = `${index + 1} of ${flashcards.length}`;
            
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.remove('flipped');
        }

        function flipCard() {
            const term = document.getElementById('flashcardTerm');
            const definition = document.getElementById('flashcardDefinition');
            const flashcard = document.getElementById('flashcard');
            
            if (!flashcardFlipped) {
                term.style.display = 'none';
                definition.style.display = 'block';
                flashcard.classList.add('flipped');
                flashcardFlipped = true;
            } else {
                term.style.display = 'block';
                definition.style.display = 'none';
                flashcard.classList.remove('flipped');
                flashcardFlipped = false;
            }
        }

        function nextCard() {
            if (flashcardIndex < flashcards.length - 1) {
                showCard(flashcardIndex + 1);
            }
        }

        function previousCard() {
            if (flashcardIndex > 0) {
                showCard(flashcardIndex - 1);
            }
        }

        // Data Management
        function saveProgress() {
            const progressData = {
                moduleProgress: moduleProgress,
                currentModule: currentModule,
                timeSpent: timeSpent,
                quizScores: quizScores,
                lastSaved: new Date().toISOString()
            };
            localStorage.setItem('a2l_progress', JSON.stringify(progressData));
        }

        function loadSavedData() {
            // Load progress
            const savedProgress = localStorage.getItem('a2l_progress');
            if (savedProgress) {
                const data = JSON.parse(savedProgress);
                moduleProgress = data.moduleProgress || {};
                timeSpent = data.timeSpent || 0;
                quizScores = data.quizScores || [];
            }
            
            // Load notes
            notes = localStorage.getItem('a2l_notes') || '';
            
            // Update bookmarks display
            bookmarks.forEach(bookmark => {
                const bookmarkBtn = document.querySelector(`[data-bookmark="${bookmark.moduleId}"]`);
                if (bookmarkBtn) {
                    bookmarkBtn.classList.add('active');
                }
            });
        }

        function exportProgress() {
            const exportData = {
                progress: moduleProgress,
                timeSpent: timeSpent,
                quizScores: quizScores,
                bookmarks: bookmarks,
                notes: notes,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'A2L_Course_Progress.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Calculator Tab Switching
        function switchCalculatorTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="switchCalculatorTab('${tabName}')"]`).classList.add('active');
            // Tab switching logic would go here for additional calculator tabs
        }
    </script>
</body>
</html>