<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA Unit 13 - Controls</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .logo {
            width: 120px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .csa-logo {
            width: 100%;
            height: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .final-exam-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            grid-column: 1 / -1;
            font-size: 18px;
            padding: 25px;
        }

        .quiz-container {
            display: none;
        }

        .quiz-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .quiz-title {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-button {
            background: #6c757d;
            color: white;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .quit-button {
            background: #dc3545;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #00a085); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .score-poor { background: linear-gradient(135deg, #e17055, #d63031); }

        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .results-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .answers-review {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }

        .review-header {
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-review {
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
            margin-bottom: 15px;
        }

        .question-review:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .review-question-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .answer-comparison {
            display: grid;
            gap: 8px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .user-answer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .user-answer.correct {
            background: #d4edda;
            border: 1px solid #74b816;
            color: #155724;
        }

        .user-answer.incorrect {
            background: #f8d7da;
            border: 1px solid #e74c3c;
            color: #721c24;
        }

        .correct-answer {
            background: #d1ecf1;
            border: 1px solid #74b816;
            color: #0c5460;
        }

        .answer-label {
            font-weight: 600;
            margin-right: 10px;
            min-width: 80px;
        }

        .answer-text {
            flex: 1;
        }

        .answer-icon {
            margin-left: 10px;
            font-weight: bold;
        }

        .toggle-review {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .toggle-review:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lark-logo {
            height: 30px;
            width: auto;
        }

        .created-by {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Navigation -->
        <div id="mainMenu">
            <div class="logo">
                <svg class="csa-logo" viewBox="0 0 1024 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- CSA Square Logo with curved design -->
                    <rect x="0" y="150" width="300" height="300" fill="#1565C0" rx="20"/>
                    <!-- Green curved element -->
                    <path d="M 50 250 Q 150 200 250 250 Q 200 300 100 280 Q 75 265 50 250" fill="#7CB342"/>
                    <!-- White curved swoosh -->
                    <path d="M 0 350 Q 100 300 200 350 Q 250 380 300 400 L 300 450 Q 200 420 100 450 Q 50 430 0 450 Z" fill="white"/>
                    
                    <!-- CSA Text -->
                    <text x="350" y="280" font-family="Arial, sans-serif" font-size="120" font-weight="bold" fill="#1565C0">CSA</text>
                    
                    <!-- STANDARDS Text -->
                    <text x="0" y="550" font-family="Arial, sans-serif" font-size="80" font-weight="bold" fill="#7CB342">STANDARDS</text>
                </svg>
            </div>
            <h1>Unit 13 - Controls</h1>
            <p class="subtitle">Gas Trade Training - Chapter Questions</p>
            
            <div class="button-grid">
                <button class="nav-button" onclick="startQuiz('chapter1')">
                    Chapter 1<br>
                    <small>Fundamentals of Controls</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter2')">
                    Chapter 2<br>
                    <small>Control Circuits</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter3')">
                    Chapter 3<br>
                    <small>Servicing and Troubleshooting</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('finalExam')">
                    CSA Unit 13 Final Exam<br>
                    <small>Complete Controls Review</small>
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <h2 id="quizTitle" class="quiz-title"></h2>
                <div id="progressInfo"></div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="questionCard" class="question-card">
                <div id="questionNumber" class="question-number"></div>
                <div id="questionText" class="question-text"></div>
                <div id="answerOptions"></div>
            </div>

            <div class="quiz-controls">
                <button id="prevButton" class="control-button prev-button" onclick="previousQuestion()">Previous</button>
                <button id="quitButton" class="control-button quit-button">Quit Quiz</button>
                <button id="nextButton" class="control-button next-button" onclick="nextQuestion()">Next</button>
            </div>

            <!-- Footer for Quiz -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird -->
                        <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                        <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                        <circle cx="60" cy="65" r="4" fill="white"/>
                        <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                        <!-- Beak -->
                        <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                        <!-- Sound lines -->
                        <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <!-- LARK text -->
                        <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                        <!-- Subtitle -->
                        <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="results-container">
            <div id="scoreCircle" class="score-circle">
                <span id="scorePercentage"></span>
            </div>
            <h2 class="results-title">Quiz Complete!</h2>
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span id="totalQuestions"></span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span id="correctAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span id="incorrectAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Final Score:</span>
                    <span id="finalScore"></span>
                </div>
            </div>
            
            <button class="toggle-review" onclick="toggleAnswerReview()">Show Answer Review</button>
            
            <div id="answersReview" class="answers-review" style="display: none;">
                <div class="review-header">Answer Review</div>
                <div id="reviewContent"></div>
            </div>
            
            <button class="control-button next-button" onclick="returnToMenu()">Return to Menu</button>

            <!-- Footer for Results -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird -->
                        <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                        <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                        <circle cx="60" cy="65" r="4" fill="white"/>
                        <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                        <!-- Beak -->
                        <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                        <!-- Sound lines -->
                        <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <!-- LARK text -->
                        <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                        <!-- Subtitle -->
                        <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <span class="created-by">Created by</span>
                <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Bird -->
                    <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                    <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                    <circle cx="60" cy="65" r="4" fill="white"/>
                    <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                    <!-- Beak -->
                    <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                    <!-- Sound lines -->
                    <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <!-- LARK text -->
                    <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                    <!-- LABS text -->
                    <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                    <!-- Subtitle -->
                    <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Quiz data based on CSA Unit 13 materials
        const quizData = {
            chapter1: {
                title: "Chapter 1: Fundamentals of Controls",
                questions: [
                    {
                        question: "The temperature disc, bimetallic strip and rod and tube controls all operate on which principle?",
                        options: [
                            "Electro-magnetism",
                            "Thermoelectric effect",
                            "Thermal expansion of solids",
                            "Thermal expansion of liquids"
                        ],
                        correct: 2
                    },
                    {
                        question: "Sealed bellows controls operate on which principle?",
                        options: [
                            "Electro-magnetism",
                            "Thermoelectric effect",
                            "Thermal expansion of solids",
                            "Thermal expansion of liquids"
                        ],
                        correct: 3
                    },
                    {
                        question: "Mercury is used in capillary tubes suitable for high temperature operation.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "Solenoids operate on which principle?",
                        options: [
                            "Electro-magnetism",
                            "Thermoelectric effect",
                            "Thermal expansion of solids",
                            "Thermal expansion of liquids"
                        ],
                        correct: 0
                    },
                    {
                        question: "Thermocouples and thermopiles operate on which principle?",
                        options: [
                            "Electro-magnetism",
                            "Thermoelectric effect",
                            "Thermal expansion of solids",
                            "Thermal expansion of liquids"
                        ],
                        correct: 1
                    },
                    {
                        question: "What control components produce electricity when heated?",
                        options: [
                            "Transistor",
                            "Thermistor",
                            "Thermocouple",
                            "Bimetallic strip"
                        ],
                        correct: 2
                    },
                    {
                        question: "Solid state electronic devices are made up of electro-mechanical components that move.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "A semiconductor device used to switch or amplify signals.",
                        options: [
                            "Diode",
                            "Transistor",
                            "Thermistor",
                            "Thermocouple"
                        ],
                        correct: 1
                    },
                    {
                        question: "A semiconductor device used to allow the flow of current in only one direction.",
                        options: [
                            "Diode",
                            "Transistor",
                            "Thermistor",
                            "Thermocouple"
                        ],
                        correct: 0
                    },
                    {
                        question: "A semiconductor device that changes its electrical resistance with a change in temperature.",
                        options: [
                            "Diode",
                            "Transistor",
                            "Thermistor",
                            "Thermocouple"
                        ],
                        correct: 2
                    },
                    {
                        question: "A thyristor is different from a transistor in that it only needs a pulse signal to make it conducting and thereafter, it remains conducting.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "SCR, TRIAC, and DIAC are all what types of electronic devices?",
                        options: [
                            "Diode",
                            "Thyristor",
                            "Transistor",
                            "Thermistor"
                        ],
                        correct: 1
                    },
                    {
                        question: "Thermostat, operating aquastat and operating pressuretrol all belong to what section of the control system?",
                        options: [
                            "Operating controllers",
                            "Ignition control module",
                            "Limit and safety controllers",
                            "Combustion safety controller"
                        ],
                        correct: 0
                    },
                    {
                        question: "Low-water cutoff, gas-pressure switch, flow switch, all belong to what section of the control system?",
                        options: [
                            "Operating controllers",
                            "Ignition control module",
                            "Limit and safety controllers",
                            "Combustion safety controller"
                        ],
                        correct: 2
                    },
                    {
                        question: "Position and location are important factors for thermostat installation.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "Thermostats should be placed in a room on an outside wall.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is an operating aquastat?",
                        options: [
                            "It is a normally closed switch, that shuts off the gas supply when the temperature setpoint is reached",
                            "It is a normally open switch, that shuts of the gas supply when the temperature setpoint is reached",
                            "It is a normally closed switch, that turns on the gas supply when the temperature setpoint is reached",
                            "It is a normally open switch, that turns on the gas supply when the temperature setpoint is reached"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the purpose of an operating pressuretrol?",
                        options: [
                            "To stop the boiler if the steam pressure gets too high",
                            "To start the boiler when the steam pressure drops",
                            "To shut-off gas supply in the event of an overpressure condition in the burner valve train assembly",
                            "To shut-off gas supply in the event of an under pressure condition in the burner valve train assembly"
                        ],
                        correct: 0
                    },
                    {
                        question: "A thermocouple is considered a combustion safety control.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "Select the combustion safety controls that work on the principle of flame ionization.",
                        options: [
                            "Thermopile",
                            "Infrared flame sensor",
                            "Ultraviolet flame sensor",
                            "Flame rectifier (flame rod)"
                        ],
                        correct: 3
                    },
                    {
                        question: "What device is used to sense combustion air or flue gas flow on any appliance that incorporates a fan or blower?",
                        options: [
                            "Flow switch",
                            "Pressuretrol",
                            "Gas pressure switch",
                            "Air proving switch"
                        ],
                        correct: 3
                    },
                    {
                        question: "Non-integrated ignition control modules designed for intermittent pilot, direct spark, or hot surface ignition will also manage all of the other appliance activities such as humidistat, electronic filters, heating pumps or fans.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "On what type of gas appliance would a rod and Tube (Unitrol) valve typically be installed?",
                        options: [
                            "Gas range",
                            "Gas boiler",
                            "Gas Furnace",
                            "Gas water heater"
                        ],
                        correct: 3
                    },
                    {
                        question: "How is the field wiring identified on a wiring schematic for an IFC?",
                        options: [
                            "Solid lines",
                            "Highlighted",
                            "Dotted lines",
                            "Solid Bold lines"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is a DIP switch?",
                        options: [
                            "Direct ignition proving sensor",
                            "An air flow differential pressure switch",
                            "A double pole double throw automatic switch",
                            "A manual electric switch that is packaged with others in a group"
                        ],
                        correct: 3
                    },
                    {
                        question: "Pilot operated solenoid valves use pressure differential to assist the plunger in opening and closing the main valve.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "The servo regulator built into a combination gas valve serves as which type of gas pressure regulator?",
                        options: [
                            "System regulator",
                            "Service regulator",
                            "Appliance regulator",
                            "Over pressure protection regulator"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the name of the backup safety designed to shut off the burner if the temperature of the water in the heater exceeds 200°F?",
                        options: [
                            "T&P",
                            "ECO",
                            "Pilotstat",
                            "Aquastat"
                        ],
                        correct: 1
                    },
                    {
                        question: "What feature acts as extra protection on a redundant gas valve?",
                        options: [
                            "On-off switch",
                            "Pilot adjustment",
                            "Servo regulator",
                            "A second automatic shutoff valve"
                        ],
                        correct: 3
                    },
                    {
                        question: "How do electronic thermostat control temperature swing overshoot?",
                        options: [
                            "Night setback",
                            "Millivolt anticipator",
                            "Cycles per hour method",
                            "Adjustable Heat anticipator"
                        ],
                        correct: 2
                    },
                    {
                        question: "What CPH setting do most electronic thermostats come pre-set at?",
                        options: [
                            "1-2",
                            "4-5",
                            "7-8",
                            "10-11"
                        ],
                        correct: 1
                    },
                    {
                        question: "Different types of multi-stage thermostats use a variety of methods to initiate furnace staging, select the method that employs algorithms to anticipate demand.",
                        options: [
                            "CPH staging",
                            "Setpoint staging",
                            "Time-based staging",
                            "Rate-of-change staging"
                        ],
                        correct: 3
                    },
                    {
                        question: "How can multiple wireless temperature sensors that use short range protocols such as Z-Wave and Zigbee achieve a longer range?",
                        options: [
                            "Hard wire",
                            "AC adapters",
                            "Mesh network",
                            "Signal boosters"
                        ],
                        correct: 2
                    },
                    {
                        question: "A 10K thermistor has a reference resistance of 10KΩ at what temperature.",
                        options: [
                            "-55°C",
                            "0°C",
                            "25°C",
                            "150°C"
                        ],
                        correct: 2
                    },
                    {
                        question: "A PTC thermistor will decrease its resistance with a temperature increase.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "One advantage of a smart valve is that it uses a regular 110 VAC HIS.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "How have redundant gas valves been adapted to give them modulating operation?",
                        options: [
                            "WiFi-enabled",
                            "Servo regulated",
                            "Electric Stepper motor",
                            "Electro hydraulic actuator"
                        ],
                        correct: 2
                    },
                    {
                        question: "On an electric oven safety valve, the HSI must warm up sufficiently before enough electricity can pass to open the gas valve.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "A seismic valve will reset automatically once the vibration stops.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "Cable release fire suppression gas valves can only be activated manually.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    }
                ]
            },
            chapter2: {
                title: "Chapter 2: Control Circuits",
                questions: [
                    {
                        question: "The left-hand side of the ladder diagram represents the incoming voltage.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which electrical drawing would be considered a map of an electrical circuit?",
                        options: [
                            "Block diagram",
                            "Ladder diagram",
                            "Wiring diagram",
                            "Pictorial diagram"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which electrical drawing is best used to determine how current flows through the various parts of the circuit?",
                        options: [
                            "Block diagram",
                            "Schematic diagram",
                            "Wiring diagram",
                            "Pictorial diagram"
                        ],
                        correct: 1
                    },
                    {
                        question: "A schematic diagram is also known as a _____________________.",
                        options: [
                            "P&C drawing",
                            "Ladder diagram",
                            "Component layout",
                            "Connection diagram"
                        ],
                        correct: 1
                    },
                    {
                        question: "What are the most common auxiliary devices found in control systems?",
                        options: [
                            "Relays",
                            "Switches",
                            "Contactors",
                            "Protective devices"
                        ],
                        correct: 1
                    },
                    {
                        question: "For this relay connected to a 120 Volts circuit, what is the full load amp rating for the normally closed contacts?",
                        options: [
                            "8 amps",
                            "8.9 amps",
                            "13.68 amps",
                            "82.8 amps"
                        ],
                        correct: 2
                    },
                    {
                        question: "Integrated electronic control boards have replaced most time delay relays.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "These sine waves represent primary and secondary transformer circuit that are in phase.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "For AC circuits, the difference between the hot, neutral wire to ground wire is described as what?",
                        options: [
                            "Phasing",
                            "Modulation",
                            "Sequencing",
                            "Polarization"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is matching the polarity of the primary and secondary sides of a transformer called?",
                        options: [
                            "Phasing",
                            "Modulating",
                            "Sequencing",
                            "Polarization"
                        ],
                        correct: 0
                    },
                    {
                        question: "What voltage reading should you get between the 120 VAC hot and ungrounded side of the secondary, when checking for transformer phasing?",
                        options: [
                            "24 VAC",
                            "96 VAC",
                            "120 VAC",
                            "144 VAC"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the purpose of the control modules safe start check?",
                        options: [
                            "To confirm the pilot flame",
                            "To confirm the main flame",
                            "To confirm the induced fan is running",
                            "To confirm there is not already an existing flame"
                        ],
                        correct: 3
                    },
                    {
                        question: "What is the operation of a flame rollout switch",
                        options: [
                            "NC switch that opens on flame roll out",
                            "NO switch that breaks on flame roll out",
                            "NO switch that closed when the induced fan runs",
                            "NC switch that closed when the induced fan stops"
                        ],
                        correct: 0
                    },
                    {
                        question: "You can determine the sequence of operation for all components connected to an IFC from the wiring diagrams.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "Use the DIP table shown here to interpret the HEAT \"OFF\" DELAY setting for the DIP switch configuration shown.",
                        options: [
                            "0 SEC",
                            "60 SEC",
                            "100 SEC",
                            "180 SEC"
                        ],
                        correct: 3
                    }
                ]
            },
            chapter3: {
                title: "Chapter 3: Servicing and Troubleshooting Circuits and Components",
                questions: [
                    {
                        question: "The troubleshooting procedure is broken down into a series of specific steps. What should be your first step?",
                        options: [
                            "Make a trial run",
                            "Test conclusions",
                            "Know the system",
                            "Replace the components"
                        ],
                        correct: 2
                    },
                    {
                        question: "Suppose that upon testing a furnace, the fan motor will not run. The burner is operating, the heat exchanger temperature is above the fan-on setpoint and the fan switch contacts are open. What should you do?",
                        options: [
                            "Replace the fan",
                            "Replace transformer",
                            "Replace the fan switch",
                            "Replace the thermostat"
                        ],
                        correct: 2
                    },
                    {
                        question: "Suppose the furnace won't light, thermostat is calling for heat and you get a reading of 24 V across the thermostat connections.",
                        options: [
                            "Replace transformer",
                            "Replace the gas valve",
                            "Replace the fan switch",
                            "Replace the thermostat"
                        ],
                        correct: 3
                    },
                    {
                        question: "Thermostats are an example of a control that can be recalibrated or readjusted.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "What setting should the multimeter be on when testing the flame sensing circuit?",
                        options: [
                            "µAmps DC",
                            "µVolts AC",
                            "µAmps AC",
                            "µVolts DC"
                        ],
                        correct: 0
                    },
                    {
                        question: "All IFC will have a fault code retrieval push button on the module.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    }
                ]
            },
            finalExam: {
                title: "CSA Unit 13 Final Exam - Controls",
                questions: [
                    {
                        question: "This control system responds to changes in the controlled variable (temperature, pressure, etc.) and makes or breaks a circuit. Examples include: thermostats, operating aquastats and operating pressuretrols.",
                        options: [
                            "Limit and safety controllers",
                            "Combustion safety control",
                            "Ignition control module",
                            "Operating controllers"
                        ],
                        correct: 3
                    },
                    {
                        question: "This control system takes the command away from the operating controls when continued operation would cause an unsafe situation. Examples include: low-water cutoff switches, high-limit aquastats, high-limit pressuretrols, and flow switches.",
                        options: [
                            "Limit and safety controllers",
                            "Combustion safety control",
                            "Ignition control module",
                            "Operating controllers"
                        ],
                        correct: 0
                    },
                    {
                        question: "This control system monitors the flame initiation and allows the gas to flow only if a stable flame is initiated and maintained. Examples include flame sensors, (flame rods, thermocouples, infrared and ultraviolet scanners) and air-proving switches",
                        options: [
                            "Limit and safety controllers",
                            "Combustion safety control",
                            "Ignition control module",
                            "Operating controllers"
                        ],
                        correct: 1
                    },
                    {
                        question: "This control system sequences the safe light-up of the burner system (providing the limit controls indicate a safe condition). Examples include intermittent pilot, direct spark ignition and hot surface ignition.",
                        options: [
                            "Limit and safety controllers",
                            "Combustion safety control",
                            "Ignition control module",
                            "Operating controllers"
                        ],
                        correct: 2
                    },
                    {
                        question: "Thermostats used in the heating industry can be rated for which of the following?",
                        options: [
                            "Line voltage (120 VAC)",
                            "Milli voltage (750 Mv)",
                            "Low voltage (24 volts)",
                            "A, B and C"
                        ],
                        correct: 3
                    },
                    {
                        question: "Thermostats should be located how far from the floor?",
                        options: [
                            "6ft (1.8 m)",
                            "4ft. (1.2 m)",
                            "5ft (1.5 m)",
                            "Eye level"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of the following best describes a thermostat that can be set to bring the heating system on and shut it off at predetermined times in order to save energy?",
                        options: [
                            "Mechanical thermostat without bulb",
                            "Digital programmable thermostat",
                            "Mechanical mercury bulb type thermostat",
                            "Bimetal non-mercury bulb thermostat"
                        ],
                        correct: 1
                    },
                    {
                        question: "During the first stage, a two-stage gas valve associated with a two-stage thermostat, would open at a reduced or low firing rate. What would be the percentage of the firing rate or input during the 2nd stage or high-fire stage?",
                        options: [
                            "10 % of the appliance's rated input",
                            "100 % of the appliance's rated input",
                            "70 % of the appliance's rated input",
                            "50 % of the appliance's rated input"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which of the following devices in a mechanical thermostat compensates for overshoot by shutting off the heating equipment before the actual room temperature reaches the shutoff point?",
                        options: [
                            "Thermistor",
                            "Compensator",
                            "Two-stage gas valve",
                            "Anticipator"
                        ],
                        correct: 3
                    },
                    {
                        question: "For best results, the thermostat should cause the furnace to cycle how many times per hour?",
                        options: [
                            "14 cycles per/hr",
                            "8 cycles per/hr",
                            "4 cycles per/hr",
                            "6 cycles per/hr"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of the following choices best describe an operating aquastat that controls the temperature of the water inside the boiler?",
                        options: [
                            "SPDT switch normally open that closes on a temperature fall",
                            "SPST switch normally closed that opens on a temperature rise",
                            "SPST switch normally closed that opens on a temperature fall",
                            "DPDT switch normally closed that opens on a temperature fall"
                        ],
                        correct: 1
                    },
                    {
                        question: "What does SPDT stand for?",
                        options: [
                            "Double pole single throw",
                            "Single throw double pole",
                            "Single pole double throw",
                            "Double throw single pole"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of the following best describe a mercury bulb mechanical thermostat with one heating and one cooling stage?",
                        options: [
                            "SPST",
                            "DPDT",
                            "SPDT",
                            "DPST"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the term used to describe the difference between the 'OFF and ON' operating temperatures associated with the aquastat?",
                        options: [
                            "Anticipator",
                            "Differential",
                            "Set point",
                            "Drift"
                        ],
                        correct: 1
                    },
                    {
                        question: "On what type of equipment would you find a flow switch?",
                        options: [
                            "Boilers with large water capacities",
                            "Forced warm air furnaces (blower/ ID fans etc.)",
                            "Boilers with small water capacities (pool heater etc.)",
                            "Boilers high water temperature capabilities"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the purpose of a low water cut off switch?",
                        options: [
                            "To shut down the boiler in the event of low water flow to a boiler",
                            "To turn on the boiler in the event of a low water condition in the boiler",
                            "To shut down the boiler in the event of a low water condition in the boiler",
                            "To shut down the boiler in the event of a low gas pressure condition in the boiler"
                        ],
                        correct: 2
                    },
                    {
                        question: "What does a pressuretrol sense?",
                        options: [
                            "Water flow",
                            "Steam Pressure",
                            "Gas pressure",
                            "Water pressure"
                        ],
                        correct: 1
                    },
                    {
                        question: "There are two basic types of low-water cutoff switches. (LWCO) Which of the following conducts current through the water to ground?",
                        options: [
                            "Flow type",
                            "Float type",
                            "Probe type",
                            "Mechanical type"
                        ],
                        correct: 2
                    },
                    {
                        question: "A thermocouple uses the combined effects of temperature change and electricity. It consists of a bimetallic strip joined at one end. What is this joined end called?",
                        options: [
                            "Cold Junction",
                            "Hot Junction",
                            "Millivolt Junction",
                            "Micro amp Junction"
                        ],
                        correct: 1
                    },
                    {
                        question: "A DC voltage is generated across two ends of the thermocouple. What is this end called?",
                        options: [
                            "Cold Junction",
                            "Hot Junction",
                            "Millivolt Junction",
                            "Micro amp Junction"
                        ],
                        correct: 0
                    },
                    {
                        question: "How should a thermocouple combustion safety control be connected to a gas valve?",
                        options: [
                            "Finger tight",
                            "¾ turn past finger tight with wrench",
                            "Torque to .25 ft. Lbs",
                            "Finger tight plus ¼ turn with wrench"
                        ],
                        correct: 3
                    },
                    {
                        question: "What would be a common setting for a high-limit aquastat?",
                        options: [
                            "180 °F (82°C)",
                            "200°F (93°C)",
                            "160 °F (72°C)",
                            "300 °F (148°C)"
                        ],
                        correct: 1
                    },
                    {
                        question: "On a forced warm air furnace, if the temperature of the heat exchanger reaches 200°F (93°C) and lowers to around 175°F (79°C) to reset, what would be the differential of this control?",
                        options: [
                            "25 °F / 14 °C",
                            "20 °F / 11°C",
                            "15 °F / 8 °C",
                            "10°F / 5 °C"
                        ],
                        correct: 0
                    },
                    {
                        question: "Gas-pressure switches are required by Code on burner systems that operate with gas pressures greater than which of the following?",
                        options: [
                            "1 psig (6.9 kPa)",
                            "¼ psig (1.75 kPa)",
                            "10 psig (69 kPa)",
                            "1/2 psig (3.5 kPa)"
                        ],
                        correct: 3
                    },
                    {
                        question: "Low gas-pressure switches are reverse acting (RA) in that they open if gas pressure falls below the setpoint. The Code requires that the switch open if the pressure drops to what percentage of the regulator setpoint?",
                        options: [
                            "50 %",
                            "100 %",
                            "25 %",
                            "10 %"
                        ],
                        correct: 0
                    },
                    {
                        question: "High gas-pressure switches are direct acting (DA) in that they open when gas pressure exceeds the outlet pressure. The Code requires that the high pressure switch opens when the appliance regulator setpoint is exceeded by what percentage or more?",
                        options: [
                            "50 %",
                            "100 %",
                            "25 %",
                            "10 %"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which of the following is conducted through the flame when two flame rods (electrodes) are placed in the flame and a voltage is applied across the flame rods?",
                        options: [
                            "an ac current (milliamps)",
                            "a dc current (microamps)",
                            "an ac voltage (millivolts)",
                            "a dc voltage (microvolts)"
                        ],
                        correct: 1
                    },
                    {
                        question: "To ensure adequate flame rectification, a minimum ratio between grounding area and the flame rod must be maintained. What is this minimum ratio?",
                        options: [
                            "1: 1",
                            "2 : 1",
                            "3 : 1",
                            "4 : 1"
                        ],
                        correct: 3
                    },
                    {
                        question: "Infrared radiation from a flame can be detected by an infrared scanner. Within the infrared scanner is a cell. What is the name of this cell?",
                        options: [
                            "lead sulphide cell",
                            "UV cell",
                            "optical cell",
                            "Cad cell"
                        ],
                        correct: 0
                    },
                    {
                        question: "When the lead sulphide cell associated with an infrared scanner is exposed to infrared radiation from the flame, what is the effect on current flow through the cell?",
                        options: [
                            "The current flow through the lead sulphide cell increases due to the decrease in resistance",
                            "The current flow through the lead sulphide cell decreases due to the decrease in resistance",
                            "Both A and B",
                            "There is no effect on current flow"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of the following describes a flame sensor consisting of a tube constructed of quartz filled with an inert gas with two AC-energized electrodes creating electrical pulsations?",
                        options: [
                            "Flame rod",
                            "Infrared (IR) scanner",
                            "Ultra Violet (UV) scanner",
                            "thermocouple"
                        ],
                        correct: 2
                    },
                    {
                        question: "What would be the effect on current flow though a thermistor as the temperature of the thermistor increases?",
                        options: [
                            "Current flow decreases",
                            "Current flow increases",
                            "Either A or B",
                            "No effect"
                        ],
                        correct: 1
                    },
                    {
                        question: "What would be the effect on the resistance of a thermistor as the temperature of the thermistor increases?",
                        options: [
                            "Resistance decreases",
                            "Resistance increases",
                            "Either A or B",
                            "no effect"
                        ],
                        correct: 0
                    },
                    {
                        question: "The time permitted to establish ignition is known as which of the following?",
                        options: [
                            "Flame signal Resistance",
                            "Interpurge",
                            "Trial for ignition",
                            "Lock out"
                        ],
                        correct: 2
                    },
                    {
                        question: "How do you set an adjustable anticipator in a thermostat?",
                        options: [
                            "Measure the current draw of components associated with the thermostat circuit and set anticipator to that draw",
                            "Read the current draw marked on the gas valve and set anticipator to that draw",
                            "Measure the voltage drop from the transformer and set anticipator to that drop",
                            "Set the anticipator to .5 amps"
                        ],
                        correct: 0
                    },
                    {
                        question: "How is an anticipator wired in regards to the gas valve and thermostat contacts?",
                        options: [
                            "In parallel with the R, W, and Y contacts of the thermostat",
                            "In parallel with the gas valve & thermostat contacts",
                            "In series with the gas valve & thermostat contacts",
                            "In series with the R, W, and Y contacts of the thermostat"
                        ],
                        correct: 2
                    },
                    {
                        question: "An anticipator that has been set too low would have what effect on the heating system?",
                        options: [
                            "Long burner cycles",
                            "Under firing",
                            "Over firing",
                            "Short cycling of the burner"
                        ],
                        correct: 3
                    },
                    {
                        question: "An anticipator that has been set too high would have what effect on the heating system?",
                        options: [
                            "Long burner cycles",
                            "Under firing",
                            "Over firing",
                            "Short cycling of the burner"
                        ],
                        correct: 0
                    },
                    {
                        question: "Can gas piping be used as an electrical ground?",
                        options: [
                            "Yes",
                            "No",
                            "Yes, but only as part of a flame safeguard circuit",
                            "Only in commercial applications"
                        ],
                        correct: 2
                    },
                    {
                        question: "What would be an expected voltage output for a thermopile or powerpile?",
                        options: [
                            "Between 4 millivolts and 2 millivolts",
                            "15 millivolts",
                            "30 millivolts",
                            "250, 500, or 750 millivolts"
                        ],
                        correct: 3
                    },
                    {
                        question: "When would a low water cut off be required on a steam boiler?",
                        options: [
                            "Never",
                            "Always",
                            "On inputs over 400,000 Btu/h",
                            "On inputs under 400,000 Btu/h"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which of the following defines a pilot that is automatically lighted each time there is a call for heat and that burns during the entire period that the main burner is firing?",
                        options: [
                            "Interrupted pilot",
                            "Intermittent pilot",
                            "Expanding pilot",
                            "Continuous pilot"
                        ],
                        correct: 1
                    },
                    {
                        question: "For very high temperature sensing control elements such as pilot safety controls, what must be used in the capillary tube?",
                        options: [
                            "Light oil",
                            "Mercury",
                            "Water",
                            "Hydraulic fluid"
                        ],
                        correct: 1
                    },
                    {
                        question: "Probe and float type low water cut off switches are considered to be normally open?",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "If an operating control is set for a narrow differential, what would be the effect on the temperature control and burner cycles?",
                        options: [
                            "There would be close temperature control and long on cycles",
                            "There would be close temperature control and short on cycles",
                            "There would be wide temperature control and long on cycles",
                            "There would be wide temperature control and short on cycles"
                        ],
                        correct: 1
                    },
                    {
                        question: "Name the control device that operates on the principle of being a semi-conductor and allows the passage of current in only one direction.",
                        options: [
                            "Diode",
                            "Rectifier",
                            "Capacitor",
                            "Thermistor"
                        ],
                        correct: 0
                    },
                    {
                        question: "Hot surface igniters that light the main burner operate on which of the following voltages?",
                        options: [
                            "120 VAC",
                            "24 VDC",
                            "750 Mv",
                            "20-30 Mv"
                        ],
                        correct: 0
                    },
                    {
                        question: "A combination gas control valve includes:",
                        options: [
                            "A manual shut-off valve",
                            "An automatic gas valve",
                            "A pressure regulator",
                            "All of the above"
                        ],
                        correct: 3
                    },
                    {
                        question: "In a rod and tube water heater control valve, the sensing portion of the valve is constructed of what material?",
                        options: [
                            "Thermistor",
                            "Bimetal",
                            "Copper tubing",
                            "Steel tubing"
                        ],
                        correct: 2
                    },
                    {
                        question: "The combination high-limit/fan control contains what type of switches?",
                        options: [
                            "Normally closed fan switch and a normally closed high-limit switch",
                            "Normally open fan switch and a normally closed high-limit switch",
                            "Normally open fan switch and a normally open high-limit switch",
                            "Normally closed fan switch and a normally open high-limit switch"
                        ],
                        correct: 1
                    }
                ]
            }
        };

        // Quiz state
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function startQuiz(quizType) {
            currentQuiz = quizData[quizType];
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';

            document.getElementById('quizTitle').textContent = currentQuiz.title;
            
            // Set up quit button event listener
            const quitButton = document.getElementById('quitButton');
            if (quitButton) {
                quitButton.onclick = function() {
                    returnToMenu();
                };
            }
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressInfo').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            
            // Show question
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Show options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option';
                button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                button.onclick = () => selectAnswer(index);
                
                // Restore previous selection
                if (userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').textContent = 
                currentQuestionIndex === totalQuestions - 1 ? 'Finish Quiz' : 'Next';
        }

        function selectAnswer(answerIndex) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuiz.questions.length; i++) {
                if (userAnswers[i] === currentQuiz.questions[i].correct) {
                    score++;
                }
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('incorrectAnswers').textContent = totalQuestions - score;
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set score circle color based on performance
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
            } else if (percentage >= 80) {
                scoreCircle.classList.add('score-good');
            } else if (percentage >= 70) {
                scoreCircle.classList.add('score-fair');
            } else {
                scoreCircle.classList.add('score-poor');
            }
            
            // Generate answer review
            generateAnswerReview();
        }

        function generateAnswerReview() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            
            currentQuiz.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-review';
                
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = question.correct;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question-text';
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionDiv.appendChild(questionText);
                
                // Answer comparison
                const answerComparison = document.createElement('div');
                answerComparison.className = 'answer-comparison';
                
                // User's answer
                const userAnswerDiv = document.createElement('div');
                userAnswerDiv.className = `answer-row user-answer ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const userAnswerLabel = document.createElement('span');
                userAnswerLabel.className = 'answer-label';
                userAnswerLabel.textContent = 'Your answer:';
                
                const userAnswerText = document.createElement('span');
                userAnswerText.className = 'answer-text';
                
                if (userAnswerIndex !== undefined) {
                    const optionLetter = String.fromCharCode(65 + userAnswerIndex);
                    userAnswerText.textContent = `${optionLetter}) ${question.options[userAnswerIndex]}`;
                } else {
                    userAnswerText.textContent = 'No answer selected';
                }
                
                const userAnswerIcon = document.createElement('span');
                userAnswerIcon.className = 'answer-icon';
                userAnswerIcon.textContent = isCorrect ? '✓' : '✗';
                
                userAnswerDiv.appendChild(userAnswerLabel);
                userAnswerDiv.appendChild(userAnswerText);
                userAnswerDiv.appendChild(userAnswerIcon);
                
                // Correct answer (only show if user was wrong)
                if (!isCorrect) {
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'answer-row correct-answer';
                    
                    const correctAnswerLabel = document.createElement('span');
                    correctAnswerLabel.className = 'answer-label';
                    correctAnswerLabel.textContent = 'Correct:';
                    
                    const correctAnswerText = document.createElement('span');
                    correctAnswerText.className = 'answer-text';
                    const correctOptionLetter = String.fromCharCode(65 + correctAnswerIndex);
                    correctAnswerText.textContent = `${correctOptionLetter}) ${question.options[correctAnswerIndex]}`;
                    
                    const correctAnswerIcon = document.createElement('span');
                    correctAnswerIcon.className = 'answer-icon';
                    correctAnswerIcon.textContent = '✓';
                    
                    correctAnswerDiv.appendChild(correctAnswerLabel);
                    correctAnswerDiv.appendChild(correctAnswerText);
                    correctAnswerDiv.appendChild(correctAnswerIcon);
                    
                    answerComparison.appendChild(userAnswerDiv);
                    answerComparison.appendChild(correctAnswerDiv);
                } else {
                    answerComparison.appendChild(userAnswerDiv);
                }
                
                questionDiv.appendChild(answerComparison);
                reviewContent.appendChild(questionDiv);
            });
        }

        function toggleAnswerReview() {
            const reviewDiv = document.getElementById('answersReview');
            const button = document.querySelector('.toggle-review');
            
            if (reviewDiv.style.display === 'none') {
                reviewDiv.style.display = 'block';
                button.textContent = 'Hide Answer Review';
            } else {
                reviewDiv.style.display = 'none';
                button.textContent = 'Show Answer Review';
            }
        }

        function returnToMenu() {
            // Hide all containers
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const mainMenu = document.getElementById('mainMenu');
            
            if (quizContainer) {
                quizContainer.style.display = 'none';
            }
            if (resultsContainer) {
                resultsContainer.style.display = 'none';
            }
            if (mainMenu) {
                mainMenu.style.display = 'block';
            }
            
            // Reset quiz state
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            // Reset the answer review toggle
            const reviewDiv = document.getElementById('answersReview');
            const toggleButton = document.querySelector('.toggle-review');
            if (reviewDiv) {
                reviewDiv.style.display = 'none';
            }
            if (toggleButton) {
                toggleButton.textContent = 'Show Answer Review';
            }
        }
    </script>
</body>
</html>