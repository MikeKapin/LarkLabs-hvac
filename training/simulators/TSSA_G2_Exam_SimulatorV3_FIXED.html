<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSSA G2 Practice Exam Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .exam-selection {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .exam-options {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 20px;
        }

        .exam-option {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            flex: 1;
            min-width: 250px;
        }

        .exam-option:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .exam-option h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .exam-option p {
            color: #666;
            margin-bottom: 15px;
        }

        .exam-option .details {
            font-size: 0.9em;
            color: #888;
        }

        .exam-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }

        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .progress-info {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .timer {
            background: #ff6b6b;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .progress {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
        }

        .quit-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #dc3545;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .quit-button:hover {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question {
            font-size: 1.2em;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 500;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #667eea;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option-letter {
            font-weight: bold;
            margin-right: 15px;
            min-width: 25px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
        }

        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .submit-button {
            background: #28a745;
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .submit-button:hover {
            background: #218838;
        }

        .results {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            display: none;
        }

        .score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .pass {
            color: #28a745;
        }

        .fail {
            color: #dc3545;
        }

        .results-details {
            margin: 30px 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .restart-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 20px;
        }

        .question-review {
            margin-top: 30px;
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
        }

        .review-question {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }

        .review-question.wrong {
            background: #fff5f5;
            border-color: #dc3545;
        }

        .review-question.correct {
            background: #f0fff4;
            border-color: #28a745;
        }

        .review-question h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .review-answer {
            margin: 5px 0;
            padding: 5px 10px;
            border-radius: 4px;
        }

        .user-answer {
            background: #ffe6e6;
            color: #d63384;
            font-weight: bold;
        }

        .correct-answer {
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .modal p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .confirm-quit {
            background: #dc3545;
            color: white;
        }

        .confirm-quit:hover {
            background: #c82333;
        }

        .cancel-quit {
            background: #6c757d;
            color: white;
        }

        .cancel-quit:hover {
            background: #5a6268;
        }

        .footer {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px 20px;
            border-top: 3px solid #667eea;
            margin-top: 50px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .exam-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .progress-info {
                flex-direction: column;
                gap: 15px;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .quit-button {
                bottom: 10px;
                left: 10px;
                padding: 10px 16px;
                font-size: 0.9em;
            }
            
            .exam-options {
                flex-direction: column;
            }
            
            .exam-option {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="container">
            <div class="header">
                <h1>üî• TSSA G2 Practice Exam Simulator</h1>
                <p>Master Your Gas Technician 2 Certification</p>
            </div>
            
            <div id="examSelection" class="exam-selection">
                <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Choose Your Practice Exam</h2>
                <div class="exam-options">
                    <div class="exam-option" onclick="startExam(50)">
                        <h3>Quick Practice</h3>
                        <p><strong>50 Questions</strong></p>
                        <div class="details">
                            ‚Ä¢ 1 hour time limit<br>
                            ‚Ä¢ 75% to pass (38/50)<br>
                            ‚Ä¢ Random question selection
                        </div>
                    </div>
                    <div class="exam-option" onclick="startExam(100)">
                        <h3>Standard Practice</h3>
                        <p><strong>100 Questions</strong></p>
                        <div class="details">
                            ‚Ä¢ 2 hours time limit<br>
                            ‚Ä¢ 75% to pass (75/100)<br>
                            ‚Ä¢ Comprehensive coverage
                        </div>
                    </div>
                    <div class="exam-option" onclick="startExam(150)">
                        <h3>Full Mock Exam</h3>
                        <p><strong>150 Questions</strong></p>
                        <div class="details">
                            ‚Ä¢ 3 hours time limit<br>
                            ‚Ä¢ 75% to pass (113/150)<br>
                            ‚Ä¢ Complete exam simulation
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="examContainer" class="exam-container">
                <div class="exam-header">
                    <div class="progress-info">
                        <div id="timer" class="timer">3:00:00</div>
                        <div id="progress" class="progress">Question 1 of 150</div>
                    </div>
                </div>
                <div class="question-container">
                    <div id="question" class="question">Loading question...</div>
                    <div id="options" class="options"></div>
                </div>
                <div class="navigation">
                    <button id="prevButton" class="nav-button" onclick="previousQuestion()">‚Üê Previous</button>
                    <button id="nextButton" class="nav-button" onclick="nextQuestion()">Next ‚Üí</button>
                    <button id="submitButton" class="nav-button submit-button" onclick="submitExam()" style="display: none;">Submit Exam</button>
                </div>
                <button id="quitExamButton" class="quit-button" onclick="showQuitConfirmation()">
                    ‚ùå Quit Exam
                </button>
            </div>
            
            <div id="results" class="results">
                <h2>Exam Results</h2>
                <div id="scoreDisplay" class="score">0%</div>
                <div id="passStatus"></div>
                <div id="resultsDetails" class="results-details"></div>
                <div id="questionReview" class="question-review" style="display: none;">
                    <h3>Question Review</h3>
                    <div id="reviewContent"></div>
                </div>
                <button class="restart-button" onclick="restartExam()">Take Another Exam</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p><strong>¬© 2025 Lark Labs Software Development. All Rights Reserved.</strong><br>
            This software and its content are protected by copyright law. The TSSA G2 Practice Exam Simulator is designed for educational purposes only and is not affiliated with or endorsed by TSSA (Technical Standards and Safety Authority).</p>
        </div>
    </footer>

    <div id="quitModal" class="modal">
        <div class="modal-content">
            <h3>‚ö†Ô∏è Quit Exam?</h3>
            <p>Are you sure you want to quit the exam? Your progress will be lost and you'll return to the main menu.</p>
            <div class="modal-buttons">
                <button class="modal-button confirm-quit" onclick="confirmQuit()">Yes, Quit Exam</button>
                <button class="modal-button cancel-quit" onclick="cancelQuit()">Continue Exam</button>
            </div>
        </div>
    </div>

    <script>
        // TSSA G2 Question Bank (sample questions - extend this with the full bank)
        const questionBank = [
            {
                question: "Only plastic pipe can be used for liquid propane.",
                options: ["True", "False", "Only if coated with oxide", "PVC pipe only"],
                correct: 1
            },
            {
                question: "What is the equivalent length in feet and inches of a four inch forged tee?",
                options: ["Two feet and one inch", "Five feet and four inches", "Fifteen feet one inch", "Fifteen feet"],
                correct: 2
            },
            {
                question: "Schedule 80 piping is required on a C3H8 system?",
                options: ["For propane vapour under 125PSIG working pressure", "Whenever two different types of material are to be connected together", "When installed below grade", "For propane vapour over 125 PSIG working pressure"],
                correct: 3
            },
            {
                question: "When is it necessary to purge a gas line?",
                options: ["Is it not necessary", "Always", "Only if the branch line is over 4\"NPT", "Only if the working pressure is 7\"wc"],
                correct: 1
            },
            {
                question: "What is the maximum gas pressure allowed in a commercial building's central boiler room?",
                options: ["66 psi", "5 psi", "20 psi", "25 psi"],
                correct: 2
            },
            {
                question: "What is the maximum gas pressure allowed inside a one family dwelling?",
                options: ["2 psi", "5 psi", "1 psi", "¬Ω psi"],
                correct: 0
            },
            {
                question: "The electrical service supplied to a building is measured in what units?",
                options: ["Amps", "Volts", "Load requirements", "Watts"],
                correct: 0
            },
            {
                question: "What is the purpose of a gas pressure regulator?",
                options: ["To keep the colour of the flame constant", "To maintain even outlet heated air temperatures", "To maintain a constant gas pressure at the gas valve inlet", "To increase and maintain higher pressures as the load increases"],
                correct: 2
            },
            {
                question: "What is the minimum clearance to combustibles on a commercial type clothes dryer?",
                options: ["18\" above, 18\" back and sides, 18\" front", "24\" above, 18\" back and sides, 36\" front", "30\" above, 18\" back and sides, 24\" front", "6\" above, 6\" back and sides, 24\" front"],
                correct: 0
            },
            {
                question: "Propane is a?",
                options: ["Manufactured gas", "Hydrocarbon", "Naptha fuel", "Distillate fuel"],
                correct: 1
            }
        ];

        // Global Variables
        let currentExam = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let examTimer;
        let timeRemaining = 0;
        let totalQuestions = 0;

        // Utility Functions
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function createExamQuestions(numQuestions) {
            const shuffled = shuffleArray(questionBank);
            const exam = [];
            for (let i = 0; i < numQuestions; i++) {
                exam.push(shuffled[i % shuffled.length]);
            }
            return exam;
        }

        // Global Functions for onclick handlers
        function startExam(numQuestions) {
            document.getElementById('examSelection').style.display = 'none';
            document.getElementById('results').style.display = 'none';
            document.getElementById('examContainer').style.display = 'block';

            totalQuestions = numQuestions;
            currentExam = createExamQuestions(numQuestions);
            currentQuestionIndex = 0;
            userAnswers = new Array(numQuestions).fill(null);

            let timeInMinutes;
            if (numQuestions === 50) timeInMinutes = 60;
            else if (numQuestions === 100) timeInMinutes = 120;
            else timeInMinutes = 180; // 3 hours for 150 questions

            timeRemaining = timeInMinutes * 60;
            startTimer();
            loadQuestion();
        }

        function showQuitConfirmation() {
            document.getElementById('quitModal').style.display = 'block';
        }

        function confirmQuit() {
            if (examTimer) {
                clearInterval(examTimer);
            }
            document.getElementById('quitModal').style.display = 'none';
            restartExam();
        }

        function cancelQuit() {
            document.getElementById('quitModal').style.display = 'none';
        }

        function startTimer() {
            examTimer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(examTimer);
                    submitExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timeRemaining / 3600);
            const minutes = Math.floor((timeRemaining % 3600) / 60);
            const seconds = timeRemaining % 60;
            
            const timerDisplay = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer').textContent = timerDisplay;

            const timerElement = document.getElementById('timer');
            if (timeRemaining < 300) {
                timerElement.style.background = '#dc3545';
            } else if (timeRemaining < 900) {
                timerElement.style.background = '#ffc107';
                timerElement.style.color = '#000';
            }
        }

        function loadQuestion() {
            const question = currentExam[currentQuestionIndex];
            
            document.getElementById('progress').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            document.getElementById('question').textContent = question.question;

            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.onclick = () => selectOption(index);

                if (userAnswers[currentQuestionIndex] === index) {
                    optionElement.classList.add('selected');
                }

                optionElement.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}.</span>
                    <span>${option}</span>
                `;
                optionsContainer.appendChild(optionElement);
            });

            updateNavigationButtons();
        }

        function selectOption(optionIndex) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.option')[optionIndex].classList.add('selected');
            userAnswers[currentQuestionIndex] = optionIndex;
        }

        function updateNavigationButtons() {
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const submitButton = document.getElementById('submitButton');

            prevButton.disabled = currentQuestionIndex === 0;

            if (currentQuestionIndex === totalQuestions - 1) {
                nextButton.style.display = 'none';
                submitButton.style.display = 'inline-block';
            } else {
                nextButton.style.display = 'inline-block';
                submitButton.style.display = 'none';
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < totalQuestions - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        function submitExam() {
            if (examTimer) {
                clearInterval(examTimer);
            }

            let correctAnswers = 0;
            const reviewData = [];

            for (let i = 0; i < totalQuestions; i++) {
                const isCorrect = userAnswers[i] === currentExam[i].correct;
                if (isCorrect) {
                    correctAnswers++;
                }

                reviewData.push({
                    question: currentExam[i].question,
                    options: currentExam[i].options,
                    userAnswer: userAnswers[i],
                    correctAnswer: currentExam[i].correct,
                    isCorrect: isCorrect
                });
            }

            const scorePercentage = Math.round((correctAnswers / totalQuestions) * 100);
            const passed = scorePercentage >= 75;

            showResults(correctAnswers, scorePercentage, passed, reviewData);
        }

        function showResults(correctAnswers, scorePercentage, passed, reviewData) {
            document.getElementById('examContainer').style.display = 'none';
            document.getElementById('results').style.display = 'block';

            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `${scorePercentage}%`;
            scoreDisplay.className = passed ? 'score pass' : 'score fail';

            const passStatus = document.getElementById('passStatus');
            passStatus.innerHTML = passed ? 
                '<h3 style="color: #28a745;">üéâ CONGRATULATIONS! YOU PASSED! üéâ</h3>' : 
                '<h3 style="color: #dc3545;">‚ùå Sorry, you did not pass. Keep studying! ‚ùå</h3>';

            const resultsDetails = document.getElementById('resultsDetails');
            const wrongAnswers = totalQuestions - correctAnswers;
            resultsDetails.innerHTML = `
                <div class="result-item">
                    <h4>Correct Answers</h4>
                    <p>${correctAnswers} out of ${totalQuestions}</p>
                </div>
                <div class="result-item">
                    <h4>Wrong Answers</h4>
                    <p>${wrongAnswers} out of ${totalQuestions}</p>
                </div>
                <div class="result-item">
                    <h4>Score</h4>
                    <p>${scorePercentage}%</p>
                </div>
                <div class="result-item">
                    <h4>Status</h4>
                    <p style="color: ${passed ? '#28a745' : '#dc3545'}; font-weight: bold;">
                        ${passed ? 'PASSED' : 'FAILED'}
                    </p>
                </div>
            `;

            showQuestionReview(reviewData);
        }

        function showQuestionReview(reviewData) {
            const questionReview = document.getElementById('questionReview');
            const reviewContent = document.getElementById('reviewContent');
            
            let reviewHTML = '';
            reviewData.forEach((item, index) => {
                const questionClass = item.isCorrect ? 'correct' : 'wrong';
                const userAnswerText = item.userAnswer !== null ? item.options[item.userAnswer] : 'Not answered';
                const correctAnswerText = item.options[item.correctAnswer];

                reviewHTML += `
                    <div class="review-question ${questionClass}">
                        <h4>Question ${index + 1}: ${item.isCorrect ? '‚úÖ' : '‚ùå'}</h4>
                        <p><strong>Q:</strong> ${item.question}</p>
                        ${!item.isCorrect ? `
                            <div class="review-answer user-answer">
                                <strong>Your Answer:</strong> ${userAnswerText}
                            </div>
                            <div class="review-answer correct-answer">
                                <strong>Correct Answer:</strong> ${correctAnswerText}
                            </div>
                        ` : `
                            <div class="review-answer correct-answer">
                                <strong>Your Answer:</strong> ${userAnswerText} ‚úÖ
                            </div>
                        `}
                    </div>
                `;
            });

            reviewContent.innerHTML = reviewHTML;
            questionReview.style.display = 'block';
        }

        function restartExam() {
            currentExam = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            timeRemaining = 0;
            totalQuestions = 0;

            if (examTimer) {
                clearInterval(examTimer);
            }

            document.getElementById('results').style.display = 'none';
            document.getElementById('examContainer').style.display = 'none';
            document.getElementById('examSelection').style.display = 'block';
            document.getElementById('questionReview').style.display = 'none';

            document.getElementById('timer').style.background = '#ff6b6b';
            document.getElementById('timer').style.color = 'white';
        }

        // Modal event handlers
        window.onclick = function(event) {
            const modal = document.getElementById('quitModal');
            if (event.target === modal) {
                cancelQuit();
            }
        }

        document.addEventListener('keydown', function(event) {
            const modal = document.getElementById('quitModal');
            if (modal.style.display === 'block') {
                if (event.key === 'Escape') {
                    cancelQuit();
                } else if (event.key === 'Enter') {
                    confirmQuit();
                }
            }
        });

        // Initialize on page load
        window.onload = function() {
            console.log(`G2 Question bank loaded with ${questionBank.length} questions`);
            document.getElementById('examSelection').style.display = 'block';
            document.getElementById('examContainer').style.display = 'none';
            document.getElementById('results').style.display = 'none';
            document.getElementById('quitModal').style.display = 'none';
        };
    </script>
</body>
</html>