<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA Unit 3 - Properties of Natural Gas and Fuels Safe Handling</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .logo {
            width: 120px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .csa-logo {
            width: 100%;
            height: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .final-exam-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            grid-column: 1 / -1;
            font-size: 18px;
            padding: 25px;
        }

        .quiz-container {
            display: none;
        }

        .quiz-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .quiz-title {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-button {
            background: #6c757d;
            color: white;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .quit-button {
            background: #dc3545;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #00a085); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .score-poor { background: linear-gradient(135deg, #e17055, #d63031); }

        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .results-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .answers-review {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }

        .review-header {
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-review {
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
            margin-bottom: 15px;
        }

        .question-review:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .review-question-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .answer-comparison {
            display: grid;
            gap: 8px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .user-answer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .user-answer.correct {
            background: #d4edda;
            border: 1px solid #74b816;
            color: #155724;
        }

        .user-answer.incorrect {
            background: #f8d7da;
            border: 1px solid #e74c3c;
            color: #721c24;
        }

        .correct-answer {
            background: #d1ecf1;
            border: 1px solid #74b816;
            color: #0c5460;
        }

        .answer-label {
            font-weight: 600;
            margin-right: 10px;
            min-width: 80px;
        }

        .answer-text {
            flex: 1;
        }

        .answer-icon {
            margin-left: 10px;
            font-weight: bold;
        }

        .toggle-review {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .toggle-review:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lark-logo {
            height: 30px;
            width: auto;
        }

        .created-by {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Navigation -->
        <div id="mainMenu">
            <div class="logo">
                <svg class="csa-logo" viewBox="0 0 1024 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- CSA Square Logo with curved design -->
                    <rect x="0" y="150" width="300" height="300" fill="#1565C0" rx="20"/>
                    <!-- Green curved element -->
                    <path d="M 50 250 Q 150 200 250 250 Q 200 300 100 280 Q 75 265 50 250" fill="#7CB342"/>
                    <!-- White curved swoosh -->
                    <path d="M 0 350 Q 100 300 200 350 Q 250 380 300 400 L 300 450 Q 200 420 100 450 Q 50 430 0 450 Z" fill="white"/>
                    
                    <!-- CSA Text -->
                    <text x="350" y="280" font-family="Arial, sans-serif" font-size="120" font-weight="bold" fill="#1565C0">CSA</text>
                    
                    <!-- STANDARDS Text -->
                    <text x="0" y="550" font-family="Arial, sans-serif" font-size="80" font-weight="bold" fill="#7CB342">STANDARDS</text>
                </svg>
            </div>
            <h1>Unit 3 - Properties of Natural Gas & Fuels Safe Handling</h1>
            <p class="subtitle">Gas Trade Training - Chapter Questions</p>
            
            <div class="button-grid">
                <button class="nav-button" onclick="startQuiz('chapter1')">
                    Chapter 1<br>
                    <small>Properties and Safe Handling of Fuel Gases</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter2')">
                    Chapter 2<br>
                    <small>Combustion</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter3')">
                    Chapter 3<br>
                    <small>Gas Hazards</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('unit3Review')">
                    CSA Unit 3 Review<br>
                    <small>Properties of Natural Gas & Fuels Safe Handling</small>
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <h2 id="quizTitle" class="quiz-title"></h2>
                <div id="progressInfo"></div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="questionCard" class="question-card">
                <div id="questionNumber" class="question-number"></div>
                <div id="questionText" class="question-text"></div>
                <div id="answerOptions"></div>
            </div>

            <div class="quiz-controls">
                <button id="prevButton" class="control-button prev-button" onclick="previousQuestion()">Previous</button>
                <button id="quitButton" class="control-button quit-button">Quit Quiz</button>
                <button id="nextButton" class="control-button next-button" onclick="nextQuestion()">Next</button>
            </div>

            <!-- Footer for Quiz -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird -->
                        <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                        <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                        <circle cx="60" cy="65" r="4" fill="white"/>
                        <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                        <!-- Beak -->
                        <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                        <!-- Sound lines -->
                        <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <!-- LARK text -->
                        <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                        <!-- Subtitle -->
                        <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="results-container">
            <div id="scoreCircle" class="score-circle">
                <span id="scorePercentage"></span>
            </div>
            <h2 class="results-title">Quiz Complete!</h2>
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span id="totalQuestions"></span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span id="correctAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span id="incorrectAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Final Score:</span>
                    <span id="finalScore"></span>
                </div>
            </div>
            
            <button class="toggle-review" onclick="toggleAnswerReview()">Show Answer Review</button>
            
            <div id="answersReview" class="answers-review" style="display: none;">
                <div class="review-header">Answer Review</div>
                <div id="reviewContent"></div>
            </div>
            
            <button class="control-button next-button" onclick="returnToMenu()">Return to Menu</button>

            <!-- Footer for Results -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird -->
                        <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                        <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                        <circle cx="60" cy="65" r="4" fill="white"/>
                        <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                        <!-- Beak -->
                        <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                        <!-- Sound lines -->
                        <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <!-- LARK text -->
                        <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                        <!-- Subtitle -->
                        <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <span class="created-by">Created by</span>
                <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Bird -->
                    <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                    <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                    <circle cx="60" cy="65" r="4" fill="white"/>
                    <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                    <!-- Beak -->
                    <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                    <!-- Sound lines -->
                    <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <!-- LARK text -->
                    <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                    <!-- LABS text -->
                    <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                    <!-- Subtitle -->
                    <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Quiz data based on CSA Unit 3 materials
        const quizData = {
            chapter1: {
                title: "Chapter 1: Properties and Safe Handling of Fuel Gases",
                questions: [
                    {
                        question: "What is the main component of natural gas?",
                        options: [
                            "Butane",
                            "Methane",
                            "Propane",
                            "Carbon"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the chemical formula for methane?",
                        options: [
                            "C3H8",
                            "C4H10",
                            "CH4",
                            "C2H4"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the chemical formula for propane?",
                        options: [
                            "C4H10",
                            "CH4",
                            "C2H4",
                            "C3H8"
                        ],
                        correct: 3
                    },
                    {
                        question: "What substance is added to natural gas and propane to give them a distinctive odor?",
                        options: [
                            "Butane",
                            "Sulphur",
                            "Mercaptan",
                            "Ethane"
                        ],
                        correct: 2
                    },
                    {
                        question: "Define the term specific gravity.",
                        options: [
                            "Specific gravity is the comparison between the level of the volume of a gas (or liquid) and the level of an equal volume of air (or water).",
                            "Specific gravity is the comparison between the weight of the volume of a gas (or liquid) and the weight of an equal volume of air (or water).",
                            "Specific gravity is the comparison between the pressure of the volume of a gas (or liquid) and the pressure of an equal volume of air (or water)."
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the specific gravity of natural gas vapour?",
                        options: [
                            "0.55",
                            "0.75",
                            "1.25",
                            "1.52"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the specific gravity of propane vapour?",
                        options: [
                            "0.55",
                            "0.75",
                            "1.25",
                            "1.52"
                        ],
                        correct: 3
                    },
                    {
                        question: "What is the ratio of expansion from liquid to gas for natural gas?",
                        options: [
                            "1:1200",
                            "1:1500",
                            "1:600",
                            "1:270"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the boiling temperature for propane?",
                        options: [
                            "–260°F (–162 °C)",
                            "–44°F (–42.2 °C)",
                            "+212°F (+100 °C)",
                            "+100°F (+37.78 °C)"
                        ],
                        correct: 1
                    },
                    {
                        question: "Define the term calorific value.",
                        options: [
                            "The energy released when an unknown volume of fuel is burned.",
                            "The energy released when a given volume of fuel is burned.",
                            "The energy consumed when a given volume of fuel is burned."
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the accepted calorific value in Btu/ft³ for natural gas?",
                        options: [
                            "1000 Btu/ft³",
                            "1500 Btu/ft³",
                            "2520 Btu/ft³",
                            "3600 Btu/ft³"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the limit of flammability for propane?",
                        options: [
                            "4–15%",
                            "5-19%",
                            "2.4–9.5%",
                            "2-75%"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is 85%-95% of natural gas made up of?",
                        options: [
                            "Ethane",
                            "Methane",
                            "Nitrogen",
                            "Propane"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the specific gravity of liquid propane?",
                        options: [
                            "0.58",
                            "1.54",
                            "7.6",
                            "0.51"
                        ],
                        correct: 3
                    },
                    {
                        question: "At atmospheric pressure, propane gas expands at the ratio of _______ when changing from a liquid to a gas.",
                        options: [
                            "1:270",
                            "1:300",
                            "1:600",
                            "1:670"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the flame speed (inches/s) of natural gas?",
                        options: [
                            "11",
                            "10",
                            "12",
                            "9"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the maximum flame temperature (°F) for propane and natural gas?",
                        options: [
                            "2600",
                            "1600",
                            "3600",
                            "4600"
                        ],
                        correct: 2
                    },
                    {
                        question: "______________ is the temperature at which an air-gas mixture initiates and supports combustion. It varies according to the fuel gas used.",
                        options: [
                            "Flame temperature",
                            "Limits of flammability",
                            "Ignition temperature"
                        ],
                        correct: 2
                    },
                    {
                        question: "_________are the upper and lower ranges of gas in the air-gas mixture that supports combustion.",
                        options: [
                            "Limits of flammability",
                            "Flammability range",
                            "Flame temperatures"
                        ],
                        correct: 0
                    }
                ]
            },
            chapter2: {
                title: "Chapter 2: Combustion",
                questions: [
                    {
                        question: "What is the term used for the chemical process in which the rapid oxidation of fuel results in the production of heat?",
                        options: [
                            "Ignition",
                            "Explosion",
                            "Combustion"
                        ],
                        correct: 2
                    },
                    {
                        question: "Approximately what percentage of air is oxygen?",
                        options: [
                            "20%",
                            "25%",
                            "79%",
                            "1.2%"
                        ],
                        correct: 0
                    },
                    {
                        question: "What are the approximate ignition temperatures (in °F and °C) for propane?",
                        options: [
                            "1020°F (495 °C)",
                            "1300°F (700 °C)",
                            "1000°F (538 °C)",
                            "600°F (315 °C)"
                        ],
                        correct: 0
                    },
                    {
                        question: "What are the approximate ignition temperatures (in °F and °C) for natural gas?",
                        options: [
                            "1000°F (538 °C)",
                            "600°F (315 °C)",
                            "1300°F (700 °C)",
                            "1020°F (495 °C)"
                        ],
                        correct: 2
                    },
                    {
                        question: "What are the products of combustion for a hydrocarbon fuel?",
                        options: [
                            "CO4, H2O, and heat",
                            "CO2, H2O2, and heat",
                            "CO2, H2O, and heat",
                            "2CO2, H2O, and heat"
                        ],
                        correct: 2
                    },
                    {
                        question: "State the formula for perfect combustion for natural gas.",
                        options: [
                            "CH4 + 2O2 + 8N2 > CO2 + 2H2O + 8N2 + Heat",
                            "CH4 + 2O2 + 8N2 > 2CO + 2H2O + 8N2 + Heat",
                            "CH4 + 2O2 + 8N2 > CO2 + 4H2O + 8N2 + Heat"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is added to the combustion process to ensure complete combustion?",
                        options: [
                            "Primary air",
                            "Excess air",
                            "Ventilation air",
                            "Combustion air"
                        ],
                        correct: 1
                    },
                    {
                        question: "Name two products of incomplete combustion.",
                        options: [
                            "Water Vapour and Carbon dioxide",
                            "Nitrogen and Carbon",
                            "Carbon monoxide and aldehydes",
                            "Nitrogen and water vapour"
                        ],
                        correct: 2
                    },
                    {
                        question: "How are the three divisions of air supply categorized?",
                        options: [
                            "Combustion air, pressurized air, dilution air",
                            "Combustion air, excess air, primary air",
                            "Combustion air, excess air, dilution air"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the term used to describe the air that is mixed with fuel gas before the point of ignition?",
                        options: [
                            "Primary air",
                            "Excess air",
                            "Dilution air"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the purpose of dilution air?",
                        options: [
                            "To remove the hot vent gases and to control the draft influence on the combustion chamber",
                            "To increase the hot vent gases and to control the draft influence on the combustion chamber",
                            "To cool the hot vent gases and to control the draft influence on the combustion chamber"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the air-to-gas ratio that applies to all fuel gases?",
                        options: [
                            "Each (1000 Btu of fuel input) x 10 ft³ air = perfect combustion",
                            "Each (1000 Btu of fuel input) x 10 ft³ air = complete combustion",
                            "Each (1000 Btu of fuel input) x 10 ft³ air = perfect ignition"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the normal percentage of combustion air to excess air requirements for an atmospheric burner?",
                        options: [
                            "The volume of excess air equal to 10% of combustion air requirements is considered acceptable.",
                            "The volume of excess air equal to 50% of combustion air requirements is considered acceptable.",
                            "The volume of excess air equal to 100% of combustion air requirements is considered acceptable."
                        ],
                        correct: 1
                    },
                    {
                        question: "What are the total air volume supply requirements for an atmospheric burner?",
                        options: [
                            "10 ft³ of air for each 1000 Btu of input",
                            "50 ft³ of air for each 1000 Btu of input",
                            "30 ft³ of air for each 1000 Btu of input",
                            "15 ft³ of air for each 1000 Btu of input"
                        ],
                        correct: 2
                    },
                    {
                        question: "What are the three-colour zones of a stable Bunsen flame?",
                        options: [
                            "Center cone, top cone, outer mantle",
                            "Bottom cone, top cone, outer mantle",
                            "Inner cone, outer cone, inner mantle",
                            "Inner cone, outer cone, outer mantle"
                        ],
                        correct: 3
                    },
                    {
                        question: "Which of the following is not one of the Combustion Triangle elements?",
                        options: [
                            "Carbon dioxide",
                            "Fuel",
                            "Heat",
                            "Oxygen"
                        ],
                        correct: 0
                    },
                    {
                        question: "_________ is the chemical designation for natural gas. Its ignition temperature is 1200°F or 700°C.",
                        options: [
                            "CH2",
                            "CH3",
                            "CH4",
                            "CH5"
                        ],
                        correct: 2
                    },
                    {
                        question: "An ignition temperature of __________ °F or 495°C and a chemical designation of C3H8 identifies propane.",
                        options: [
                            "1030°F",
                            "1020°F",
                            "1050°F",
                            "1040°F"
                        ],
                        correct: 1
                    },
                    {
                        question: "___________________ is subdivided into the two classifications of primary air and secondary air.",
                        options: [
                            "Combustion air",
                            "Excess air",
                            "Ventilation air",
                            "Total air"
                        ],
                        correct: 0
                    },
                    {
                        question: "What type of air describes the volume of air required to allow the appliance to operate safely and efficiently?",
                        options: [
                            "Combustion air",
                            "Total air",
                            "Excess air",
                            "Ventilation air"
                        ],
                        correct: 1
                    },
                    {
                        question: "The volume of excess air required for the efficient operation of atmospheric burner-fired equipment is equal to _______________ of the combustion air requirement or 5 ft³ for each 1000 Btu.",
                        options: [
                            "25%",
                            "75%",
                            "100%",
                            "50%"
                        ],
                        correct: 3
                    },
                    {
                        question: "The volume of dilution air required for appliances equipped with a draft control device should be equal to the total of the combustion and excess air supplied the burner or 15 ft³ for each 1000 Btu.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "The combustion process must maintain a temperature of approximately _____________°F (700°C) for natural gas.",
                        options: [
                            "1000°F",
                            "1300°F",
                            "1200°F",
                            "1100°F"
                        ],
                        correct: 1
                    },
                    {
                        question: "100 000 Btu/h requires _________ ft³ combustion air.",
                        options: [
                            "1000",
                            "10",
                            "100",
                            "10 000"
                        ],
                        correct: 0
                    },
                    {
                        question: "255 000 Btu/h requires 2550 ft³ combustion air.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    }
                ]
            },
            chapter3: {
                title: "Chapter 3: Gas Hazards",
                questions: [
                    {
                        question: "Which of the following is a type of combustible gas indicator?",
                        options: [
                            "Handheld type",
                            "Pump type",
                            "Filament type",
                            "Wand type"
                        ],
                        correct: 2
                    },
                    {
                        question: "How are combustible gas indicators calibrated?",
                        options: [
                            "By applying a known concentration of gas to the instrument, then checking the response",
                            "By applying an unknown concentration of gas to the instrument, then checking the response",
                            "By checking the response of the instrument at a test point"
                        ],
                        correct: 0
                    },
                    {
                        question: "What must be the first concern when responding to a gas leak call?",
                        options: [
                            "Response time",
                            "Type of odour present",
                            "Safety (public and personal)"
                        ],
                        correct: 2
                    },
                    {
                        question: "Where is a good place to test when checking combustible gas if the natural gas appliances is located in the basement?",
                        options: [
                            "In the basement stairwell",
                            "At the front door of the house",
                            "At the vent termination of an appliance"
                        ],
                        correct: 0
                    },
                    {
                        question: "One of the methods to ventilate combustible gas is to open the doors and windows.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of the following is not a location that should be checked when testing for combustible gases?",
                        options: [
                            "All conduit entry points",
                            "Below grade cracks in basement walls",
                            "Around windows and doors",
                            "Floor drains"
                        ],
                        correct: 2
                    },
                    {
                        question: "How quickly will death occur if a person is exposed to a concentration of 800 ppm of CO?",
                        options: [
                            "30 minutes",
                            "2 to 3 hours",
                            "1 hour",
                            "8 hours"
                        ],
                        correct: 1
                    },
                    {
                        question: "What must be done if a crack is found in a furnace heat exchanger?",
                        options: [
                            "The furnace heat exchanger must be welded",
                            "The furnace heat exchanger be patched with furnace cement",
                            "Nothing, the furnace is safe to use",
                            "The heat exchanger or entire furnace must be replaced"
                        ],
                        correct: 3
                    },
                    {
                        question: "What can CO/Air concentration of 1600 ppm for 20 mins cause?",
                        options: [
                            "Dizziness, nausea, convulsions",
                            "Headache, dizziness, nausea",
                            "Death",
                            "Unconsciousness"
                        ],
                        correct: 1
                    },
                    {
                        question: "What can CO/Air concentration of 800 ppm for over 2 hrs cause?",
                        options: [
                            "Slight headache, tiredness, dizziness, nausea",
                            "Death",
                            "Unconsciousness",
                            "Dizziness, nausea, convulsions"
                        ],
                        correct: 1
                    },
                    {
                        question: "What can CO/Air concentration of 800 ppm for 2 hrs cause?",
                        options: [
                            "Unconsciousness",
                            "Frontal headache",
                            "Dizziness, nausea, convulsions",
                            "Headache, dizziness, nausea"
                        ],
                        correct: 0
                    },
                    {
                        question: "What can CO/Air concentration of 800 ppm for 45 mins cause?",
                        options: [
                            "Slight headache, tiredness, dizziness, nausea",
                            "Severe headache, dizziness, nausea",
                            "Dizziness, nausea",
                            "Dizziness, nausea, convulsions"
                        ],
                        correct: 3
                    },
                    {
                        question: "Down-draft spillage of a vent can be caused by the draw of an exhaust fan elsewhere in the building.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "The operation of a wood-burning fireplace on the main floor of a home can cause a chimney to which a basement furnace is venting to reverse its venting action.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    },
                    {
                        question: "Because a dryer is exhausted, not vented, its operation can't affect the proper venting of the gas appliances installed in an R2000 home.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    }
                ]
            },
            unit3Review: {
                title: "CSA Unit 3 Review - Properties of Natural Gas & Fuels Safe Handling",
                questions: []
            }
        };

        // Create randomized Unit 3 Review from all chapters
        function createUnit3Review() {
            const allQuestions = [
                ...quizData.chapter1.questions,
                ...quizData.chapter2.questions,
                ...quizData.chapter3.questions
            ];
            
            // Shuffle the questions
            for (let i = allQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allQuestions[i], allQuestions[j]] = [allQuestions[j], allQuestions[i]];
            }
            
            // Use all questions for the review
            quizData.unit3Review.questions = allQuestions;
        }

        // Initialize the review when the page loads
        createUnit3Review();

        // Quiz state
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function startQuiz(quizType) {
            // Recreate the review each time to ensure randomization
            if (quizType === 'unit3Review') {
                createUnit3Review();
            }
            
            currentQuiz = quizData[quizType];
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';

            document.getElementById('quizTitle').textContent = currentQuiz.title;
            
            // Set up quit button event listener
            const quitButton = document.getElementById('quitButton');
            if (quitButton) {
                quitButton.onclick = function() {
                    returnToMenu();
                };
            }
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressInfo').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            
            // Show question
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Show options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option';
                button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                button.onclick = () => selectAnswer(index);
                
                // Restore previous selection
                if (userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').textContent = 
                currentQuestionIndex === totalQuestions - 1 ? 'Finish Quiz' : 'Next';
        }

        function selectAnswer(answerIndex) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuiz.questions.length; i++) {
                if (userAnswers[i] === currentQuiz.questions[i].correct) {
                    score++;
                }
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('incorrectAnswers').textContent = totalQuestions - score;
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set score circle color based on performance
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
            } else if (percentage >= 80) {
                scoreCircle.classList.add('score-good');
            } else if (percentage >= 70) {
                scoreCircle.classList.add('score-fair');
            } else {
                scoreCircle.classList.add('score-poor');
            }
            
            // Generate answer review
            generateAnswerReview();
        }

        function generateAnswerReview() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            
            currentQuiz.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-review';
                
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = question.correct;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question-text';
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionDiv.appendChild(questionText);
                
                // Answer comparison
                const answerComparison = document.createElement('div');
                answerComparison.className = 'answer-comparison';
                
                // User's answer
                const userAnswerDiv = document.createElement('div');
                userAnswerDiv.className = `answer-row user-answer ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const userAnswerLabel = document.createElement('span');
                userAnswerLabel.className = 'answer-label';
                userAnswerLabel.textContent = 'Your answer:';
                
                const userAnswerText = document.createElement('span');
                userAnswerText.className = 'answer-text';
                
                if (userAnswerIndex !== undefined) {
                    const optionLetter = String.fromCharCode(65 + userAnswerIndex);
                    userAnswerText.textContent = `${optionLetter}) ${question.options[userAnswerIndex]}`;
                } else {
                    userAnswerText.textContent = 'No answer selected';
                }
                
                const userAnswerIcon = document.createElement('span');
                userAnswerIcon.className = 'answer-icon';
                userAnswerIcon.textContent = isCorrect ? '✓' : '✗';
                
                userAnswerDiv.appendChild(userAnswerLabel);
                userAnswerDiv.appendChild(userAnswerText);
                userAnswerDiv.appendChild(userAnswerIcon);
                
                // Correct answer (only show if user was wrong)
                if (!isCorrect) {
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'answer-row correct-answer';
                    
                    const correctAnswerLabel = document.createElement('span');
                    correctAnswerLabel.className = 'answer-label';
                    correctAnswerLabel.textContent = 'Correct:';
                    
                    const correctAnswerText = document.createElement('span');
                    correctAnswerText.className = 'answer-text';
                    const correctOptionLetter = String.fromCharCode(65 + correctAnswerIndex);
                    correctAnswerText.textContent = `${correctOptionLetter}) ${question.options[correctAnswerIndex]}`;
                    
                    const correctAnswerIcon = document.createElement('span');
                    correctAnswerIcon.className = 'answer-icon';
                    correctAnswerIcon.textContent = '✓';
                    
                    correctAnswerDiv.appendChild(correctAnswerLabel);
                    correctAnswerDiv.appendChild(correctAnswerText);
                    correctAnswerDiv.appendChild(correctAnswerIcon);
                    
                    answerComparison.appendChild(userAnswerDiv);
                    answerComparison.appendChild(correctAnswerDiv);
                } else {
                    answerComparison.appendChild(userAnswerDiv);
                }
                
                questionDiv.appendChild(answerComparison);
                reviewContent.appendChild(questionDiv);
            });
        }

        function toggleAnswerReview() {
            const reviewDiv = document.getElementById('answersReview');
            const button = document.querySelector('.toggle-review');
            
            if (reviewDiv.style.display === 'none') {
                reviewDiv.style.display = 'block';
                button.textContent = 'Hide Answer Review';
            } else {
                reviewDiv.style.display = 'none';
                button.textContent = 'Show Answer Review';
            }
        }

        function returnToMenu() {
            // Hide all containers
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const mainMenu = document.getElementById('mainMenu');
            
            if (quizContainer) {
                quizContainer.style.display = 'none';
            }
            if (resultsContainer) {
                resultsContainer.style.display = 'none';
            }
            if (mainMenu) {
                mainMenu.style.display = 'block';
            }
            
            // Reset quiz state
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            // Reset the answer review toggle
            const reviewDiv = document.getElementById('answersReview');
            const toggleButton = document.querySelector('.toggle-review');
            if (reviewDiv) {
                reviewDiv.style.display = 'none';
            }
            if (toggleButton) {
                toggleButton.textContent = 'Show Answer Review';
            }
        }
    </script>
</body>
</html>