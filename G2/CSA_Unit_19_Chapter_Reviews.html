<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA Unit 19 - Forced-air Furnaces</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .logo {
            width: 120px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .csa-logo {
            width: 100%;
            height: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .final-exam-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            grid-column: 1 / -1;
            font-size: 18px;
            padding: 25px;
        }

        .quiz-container {
            display: none;
        }

        .quiz-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .quiz-title {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-button {
            background: #6c757d;
            color: white;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .quit-button {
            background: #dc3545;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #00a085); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .score-poor { background: linear-gradient(135deg, #e17055, #d63031); }

        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .results-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .answers-review {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }

        .review-header {
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-review {
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
            margin-bottom: 15px;
        }

        .question-review:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .review-question-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .answer-comparison {
            display: grid;
            gap: 8px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .user-answer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .user-answer.correct {
            background: #d4edda;
            border: 1px solid #74b816;
            color: #155724;
        }

        .user-answer.incorrect {
            background: #f8d7da;
            border: 1px solid #e74c3c;
            color: #721c24;
        }

        .correct-answer {
            background: #d1ecf1;
            border: 1px solid #74b816;
            color: #0c5460;
        }

        .answer-label {
            font-weight: 600;
            margin-right: 10px;
            min-width: 80px;
        }

        .answer-text {
            flex: 1;
        }

        .answer-icon {
            margin-left: 10px;
            font-weight: bold;
        }

        .toggle-review {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .toggle-review:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lark-logo {
            height: 30px;
            width: auto;
        }

        .created-by {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Navigation -->
        <div id="mainMenu">
            <div class="logo">
                <svg class="csa-logo" viewBox="0 0 1024 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- CSA Square Logo with curved design -->
                    <rect x="0" y="150" width="300" height="300" fill="#1565C0" rx="20"/>
                    <!-- Green curved element -->
                    <path d="M 50 250 Q 150 200 250 250 Q 200 300 100 280 Q 75 265 50 250" fill="#7CB342"/>
                    <!-- White curved swoosh -->
                    <path d="M 0 350 Q 100 300 200 350 Q 250 380 300 400 L 300 450 Q 200 420 100 450 Q 50 430 0 450 Z" fill="white"/>
                    
                    <!-- CSA Text -->
                    <text x="350" y="280" font-family="Arial, sans-serif" font-size="120" font-weight="bold" fill="#1565C0">CSA</text>
                    
                    <!-- STANDARDS Text -->
                    <text x="0" y="550" font-family="Arial, sans-serif" font-size="80" font-weight="bold" fill="#7CB342">STANDARDS</text>
                </svg>
            </div>
            <h1>Unit 19 - Forced-air Furnaces</h1>
            <p class="subtitle">Gas Trade Training - Chapter Questions</p>
            
            <div class="button-grid">
                <button class="nav-button" onclick="startQuiz('chapter1')">
                    Chapter 1<br>
                    <small>Forced-air Furnaces</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter2')">
                    Chapter 2<br>
                    <small>Servicing of Mechanical Components</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter3')">
                    Chapter 3<br>
                    <small>Electrical Circuits and Components</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('finalExam')">
                    CSA Unit 19 Final Exam<br>
                    <small>Forced-air Furnaces</small>
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <h2 id="quizTitle" class="quiz-title"></h2>
                <div id="progressInfo"></div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="questionCard" class="question-card">
                <div id="questionNumber" class="question-number"></div>
                <div id="questionText" class="question-text"></div>
                <div id="answerOptions"></div>
            </div>

            <div class="quiz-controls">
                <button id="prevButton" class="control-button prev-button" onclick="previousQuestion()">Previous</button>
                <button id="quitButton" class="control-button quit-button">Quit Quiz</button>
                <button id="nextButton" class="control-button next-button" onclick="nextQuestion()">Next</button>
            </div>

            <!-- Footer for Quiz -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird -->
                        <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                        <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                        <circle cx="60" cy="65" r="4" fill="white"/>
                        <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                        <!-- Beak -->
                        <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                        <!-- Sound lines -->
                        <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <!-- LARK text -->
                        <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                        <!-- Subtitle -->
                        <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="results-container">
            <div id="scoreCircle" class="score-circle">
                <span id="scorePercentage"></span>
            </div>
            <h2 class="results-title">Quiz Complete!</h2>
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span id="totalQuestions"></span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span id="correctAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span id="incorrectAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Final Score:</span>
                    <span id="finalScore"></span>
                </div>
            </div>
            
            <button class="toggle-review" onclick="toggleAnswerReview()">Show Answer Review</button>
            
            <div id="answersReview" class="answers-review" style="display: none;">
                <div class="review-header">Answer Review</div>
                <div id="reviewContent"></div>
            </div>
            
            <button class="control-button next-button" onclick="returnToMenu()">Return to Menu</button>

            <!-- Footer for Results -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird -->
                        <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                        <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                        <circle cx="60" cy="65" r="4" fill="white"/>
                        <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                        <!-- Beak -->
                        <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                        <!-- Sound lines -->
                        <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                        <!-- LARK text -->
                        <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                        <!-- Subtitle -->
                        <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <span class="created-by">Created by</span>
                <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Bird -->
                    <ellipse cx="80" cy="80" rx="45" ry="30" fill="#4A90E2"/>
                    <ellipse cx="70" cy="70" rx="25" ry="18" fill="#357ABD"/>
                    <circle cx="60" cy="65" r="4" fill="white"/>
                    <circle cx="58" cy="64" r="2" fill="#2C5AA0"/>
                    <!-- Beak -->
                    <polygon points="30,75 15,80 30,85" fill="#FF6B6B"/>
                    <!-- Sound lines -->
                    <path d="M 5 65 Q 15 60 25 65" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 5 75 Q 15 70 25 75" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 5 85 Q 15 80 25 85" stroke="#FF6B6B" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <!-- LARK text -->
                    <text x="180" y="90" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#2C5AA0">LARK</text>
                    <!-- LABS text -->
                    <text x="180" y="130" font-family="Arial, sans-serif" font-size="32" fill="#95A5A6">LABS</text>
                    <!-- Subtitle -->
                    <text x="180" y="155" font-family="Arial, sans-serif" font-size="16" fill="#BDC3C7">SOFTWARE DEVELOPMENT</text>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Quiz data based on CSA Unit 19 materials
        const quizData = {
            chapter1: {
                title: "Chapter 1: Forced-air Furnaces",
                questions: [
                    {
                        question: "If the venting on a high efficiency furnace runs through unheated spaces, what must be done?",
                        options: [
                            "It must be insulated",
                            "It must be protected from damage",
                            "It must be increased by one pipe size",
                            "Vents from condensing appliances can NOT go through unheated spaces"
                        ],
                        correct: 0
                    },
                    {
                        question: "How would an installer determine the existing ductwork is adequately sized for the new high-efficient furnace?",
                        options: [
                            "Complete a heat loss calculation",
                            "Check the blower motor amp draw",
                            "Perform an external static pressure test",
                            "Confirm the temperature rise is within the manufacturer's specifications"
                        ],
                        correct: 2
                    },
                    {
                        question: "If an HRV is used in conjunction with a furnace, where is the HRV's warm air supply connected to the furnace system?",
                        options: [
                            "On the return air ducting but at least 3 m from the furnace",
                            "On the supply air ducting but at least 3 m from the furnace",
                            "On the return air ducting but no more than 3 m from the furnace",
                            "On the supply air ducting but no more than 3 m from the furnace"
                        ],
                        correct: 0
                    },
                    {
                        question: "If a furnace system has air-conditioning added, where does the cased coil go?",
                        options: [
                            "Downstream of the burner and downstream of the blower",
                            "Upstream of the burner and upstream of the blower",
                            "Downstream of the burner but upstream of the blower",
                            "Upstream of the burner but downstream of the blower"
                        ],
                        correct: 0
                    },
                    {
                        question: "In what position(s) can condensing furnaces be installed?",
                        options: [
                            "Up or horizontal left only",
                            "Up or horizontal left or horizontal right",
                            "Up, down, horizontal right and horizontal left",
                            "Only positions approved by the manufacturer"
                        ],
                        correct: 3
                    },
                    {
                        question: "What is the AFUE rating of a high-efficiency (condensing) furnace?",
                        options: [
                            "83% or greater",
                            "Greater than 83%",
                            "90% or greater",
                            "Greater than 90%"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which category of furnace is a high-efficiency appliance?",
                        options: [
                            "Category I",
                            "Category II",
                            "Category III",
                            "Category IV"
                        ],
                        correct: 3
                    },
                    {
                        question: "What type(s) of furnace(s) use an inducer fan?",
                        options: [
                            "Mid-efficiency only",
                            "High-efficiency only",
                            "Mid-efficiency and high-efficiency",
                            "Low-efficiency, mid-efficiency, and high-efficiency"
                        ],
                        correct: 2
                    },
                    {
                        question: "Why is condensate considered corrosive?",
                        options: [
                            "It has a low pH and low acidity",
                            "It has a high pH and low acidity",
                            "It has a high pH and high acidity",
                            "It has a low pH and high acidity"
                        ],
                        correct: 3
                    },
                    {
                        question: "What is the draft pressure in the vent from a condensing furnace?",
                        options: [
                            "Neutral",
                            "Positive",
                            "Negative",
                            "Positive or negative depending on input"
                        ],
                        correct: 1
                    },
                    {
                        question: "How are Type BH vents sized?",
                        options: [
                            "Using the furnace manufacturer's literature",
                            "Using the vent pipe manufacturer's literature",
                            "Using the vent sizing tables in the CSA B149.1 Code",
                            "Using the outlet size of the vent on the appliance and increasing one size for every 50 feet"
                        ],
                        correct: 0
                    },
                    {
                        question: "When upgrading to a high-efficiency furnace from a low-efficiency model how is the appliance input decided?",
                        options: [
                            "Complete a heat loss calculation",
                            "Replace the old furnace with the same input",
                            "Choose a model that has the same size supply air plenum",
                            "Choose a modulating furnace with a minimum output equal to 50% of the old furnace input"
                        ],
                        correct: 0
                    },
                    {
                        question: "Can the vent from a condensing appliance be connected to the B-vent of the appliance it replaces?",
                        options: [
                            "No, a new vent needs to be installed",
                            "Yes, if the existing vent is the correct size",
                            "Yes, if the existing B-vent is a side-wall termination",
                            "Yes, if an aluminum liner of the correct size is installed"
                        ],
                        correct: 0
                    },
                    {
                        question: "How is vent piping graded for a side-wall installation?",
                        options: [
                            "Perfectly horizontal",
                            "Toward the appliance",
                            "Away from the appliance",
                            "To a low point created mid-way in the system"
                        ],
                        correct: 1
                    }
                ]
            },
            chapter2: {
                title: "Chapter 2: Servicing of Mechanical Components",
                questions: [
                    {
                        question: "Must a defective heat exchanger in a dwelling unit be replaced immediately?",
                        options: [
                            "Yes",
                            "No, it can be temporarily repaired",
                            "No, it can be permanently repaired",
                            "No, only if the CO level is above the maximum acceptable for the appliance"
                        ],
                        correct: 0
                    },
                    {
                        question: "A high efficiency furnace incorporates how many heat exchangers?",
                        options: [
                            "One",
                            "Two, a primary and a tertiary",
                            "Two, a primary and a secondary",
                            "Three"
                        ],
                        correct: 2
                    },
                    {
                        question: "When would a gas technician/fitter use an incline manometer?",
                        options: [
                            "To check the manifold pressure",
                            "To complete an external static pressure test",
                            "To confirm the operation of the high-limit switch",
                            "To set the outlet pressure of a line-pressure regulator"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the purpose of a flame rollout switch?",
                        options: [
                            "Open in the event of spillage",
                            "Open when the combustion air is blocked",
                            "Protect the burner area from unusually high temperatures",
                            "Protect the heat exchanger area from unusually high temperatures"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the purpose of a diaphragm-style pressure switch on a condensing furnace?",
                        options: [
                            "To confirm the gas pressure is correct",
                            "To confirm induced draft fan is operating",
                            "To confirm the blower assembly is operating",
                            "To confirm the air supply differential pressure is within limitations"
                        ],
                        correct: 1
                    },
                    {
                        question: "On what type of furnace(s) could you see a combination high-limit/fan control?",
                        options: [
                            "Low-efficiency only",
                            "High-efficiency only",
                            "Low-efficiency and mid-efficiency",
                            "Mid-efficiency and high-efficiency"
                        ],
                        correct: 2
                    },
                    {
                        question: "What material is recommended for condensate piping after connecting to the appliance?",
                        options: [
                            "Rigid PVC piping",
                            "Flexible PVC tubing",
                            "Any steel pipe material",
                            "Any plastic pipe material"
                        ],
                        correct: 0
                    },
                    {
                        question: "How is temperature rise determined?",
                        options: [
                            "The ambient temperature plus the room air temperature",
                            "Add the return air temperature to the supply air temperature",
                            "Subtract the supply air temperature from the return air temperature",
                            "Subtract the return air temperature from the supply air temperature"
                        ],
                        correct: 3
                    },
                    {
                        question: "What type of furnace would use a vent damper?",
                        options: [
                            "Mid-efficiency only",
                            "Low efficiency only",
                            "Low-efficiency and mid-efficiency",
                            "All types of furnaces use vent dampers in the ducting system"
                        ],
                        correct: 2
                    },
                    {
                        question: "What tool should be used to clean the outside of a heat exchanger?",
                        options: [
                            "Soft brush",
                            "Wire brush",
                            "Sanding block",
                            "Never clean the outside of a heat exchanger"
                        ],
                        correct: 0
                    },
                    {
                        question: "When is a condensate pump required?",
                        options: [
                            "All condensing appliance installation",
                            "When a condensate trap cannot be installed",
                            "When the condensate cannot drain by gravity to the DWV system",
                            "When the condensate drain needs to be graded more than ¼ inch per foot"
                        ],
                        correct: 2
                    },
                    {
                        question: "Where does condensate form in a condensing appliance system?",
                        options: [
                            "Only in the primary heat exchanger",
                            "Only in the secondary heat exchanger",
                            "In the primary and secondary heat exchangers",
                            "In the secondary heat exchanger and the venting system"
                        ],
                        correct: 3
                    },
                    {
                        question: "How is manifold pressure measured on a residential furnace?",
                        options: [
                            "Upstream of the combination gas valve with the appliance shut off",
                            "Downstream of the combination gas valve with the appliance shut off",
                            "Upstream of the combination gas valve with the appliance operating",
                            "Downstream of the combination gas valve with the appliance operating"
                        ],
                        correct: 3
                    },
                    {
                        question: "Where is a combustion analysis performed?",
                        options: [
                            "In the combustion chamber",
                            "Should be measured after any draft control devices",
                            "Should be measured before any draft control devices",
                            "At the area where the primary and secondary air enters the appliance"
                        ],
                        correct: 2
                    }
                ]
            },
            chapter3: {
                title: "Chapter 3: Electrical Circuits and Components",
                questions: [
                    {
                        question: "Referencing a combination control, what is the approximate normal differential setting of the fan control?",
                        options: [
                            "25°F (14°C)",
                            "35°F (19°C)",
                            "45°F (25°C)",
                            "55°F (30°C)"
                        ],
                        correct: 0
                    },
                    {
                        question: "Referencing a mid-efficiency furnace, what causes the fan to shut off under normal operating conditions?",
                        options: [
                            "The pressure switch circuit opens",
                            "The IFC Fan-OFF timer is activated",
                            "The fan control cools down enough to open the circuit",
                            "The thermostat has reached setpoint temperature and opens the Fan-OFF circuit"
                        ],
                        correct: 2
                    },
                    {
                        question: "On which types of furnaces would you find an auxiliary limit control?",
                        options: [
                            "Only central furnaces",
                            "Downflow furnaces only",
                            "Horizontal or downflow furnaces",
                            "Upflow, horizontal, and downflow furnaces"
                        ],
                        correct: 2
                    },
                    {
                        question: "Do all rollout switches have to be manually reset?",
                        options: [
                            "Yes",
                            "No"
                        ],
                        correct: 1
                    },
                    {
                        question: "If the return air temperature is 70°F (21°C) and the temperature rise is 75°F (42°C), what is the supply temperature?",
                        options: [
                            "5°F (-15°C)",
                            "70°F (21°C)",
                            "75°F (24°C)",
                            "145°F (63°C)"
                        ],
                        correct: 3
                    },
                    {
                        question: "What component is designed to cause the burner to shut down if there is a blockage in the vent?",
                        options: [
                            "High-limit",
                            "Pressuretrol",
                            "Roll-out switch",
                            "Pressure switch"
                        ],
                        correct: 3
                    },
                    {
                        question: "What would be the required air flow if a furnace has a rated input of 60,000 Btuh, is 95% efficient, and the rating plate specifies a temperature rise of 40°- 60°F?",
                        options: [
                            "880 CFM",
                            "926 CFM",
                            "1056 CFM",
                            "1,111 CFM"
                        ],
                        correct: 2
                    },
                    {
                        question: "What voltage does the IFC receive from the thermostat circuit on a call for heat?",
                        options: [
                            "24 VAC",
                            "24 VDC",
                            "120 VAC",
                            "120 VDC"
                        ],
                        correct: 0
                    },
                    {
                        question: "How is the indoor blower circuit energized on a furnace incorporating an IFC?",
                        options: [
                            "The IFC uses electronic time delay",
                            "The IFC uses a temperature-activated switch",
                            "The furnace uses a separate fan control board",
                            "The Fan-ON switch closes in a combination high-limit/fan control"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the range of a typical modulating furnace?",
                        options: [
                            "Between 0% and 100% of input",
                            "Between 40% and 100% of input",
                            "Between 0% and 100% of capacity",
                            "Between 40% and 100% of capacity"
                        ],
                        correct: 3
                    },
                    {
                        question: "Why is it recommended to perform an ESP after retrofitting a furnace to existing ductwork?",
                        options: [
                            "To ensure the furnace is operating within the ESP limits",
                            "To ensure the furnace is operating within the temperature rise limits",
                            "To ensure the furnace is operating within the temperature rise limits and the ESP limits",
                            "To ensure the furnace is operating within the temperature rise limits, the ESP limits, and is not over-firing"
                        ],
                        correct: 2
                    }
                ]
            },
            finalExam: {
                title: "CSA Unit 19 Final Exam - Forced-air Furnaces",
                questions: [
                    {
                        question: "If the venting on a high efficiency furnace runs through unheated spaces, what must be done?",
                        options: [
                            "It must be insulated",
                            "It must be protected from damage",
                            "It must be increased by one pipe size",
                            "Vents from condensing appliances can NOT go through unheated spaces"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which category of furnace is a high-efficiency appliance?",
                        options: [
                            "Category I",
                            "Category II",
                            "Category III",
                            "Category IV"
                        ],
                        correct: 3
                    },
                    {
                        question: "What is the AFUE rating of a high-efficiency (condensing) furnace?",
                        options: [
                            "83% or greater",
                            "Greater than 83%",
                            "90% or greater",
                            "Greater than 90%"
                        ],
                        correct: 2
                    },
                    {
                        question: "Why is condensate considered corrosive?",
                        options: [
                            "It has a low pH and low acidity",
                            "It has a high pH and low acidity",
                            "It has a high pH and high acidity",
                            "It has a low pH and high acidity"
                        ],
                        correct: 3
                    },
                    {
                        question: "A high efficiency furnace incorporates how many heat exchangers?",
                        options: [
                            "One",
                            "Two, a primary and a tertiary",
                            "Two, a primary and a secondary",
                            "Three"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the purpose of a flame rollout switch?",
                        options: [
                            "Open in the event of spillage",
                            "Open when the combustion air is blocked",
                            "Protect the burner area from unusually high temperatures",
                            "Protect the heat exchanger area from unusually high temperatures"
                        ],
                        correct: 2
                    },
                    {
                        question: "How is temperature rise determined?",
                        options: [
                            "The ambient temperature plus the room air temperature",
                            "Add the return air temperature to the supply air temperature",
                            "Subtract the supply air temperature from the return air temperature",
                            "Subtract the return air temperature from the supply air temperature"
                        ],
                        correct: 3
                    },
                    {
                        question: "What material is recommended for condensate piping after connecting to the appliance?",
                        options: [
                            "Rigid PVC piping",
                            "Flexible PVC tubing",
                            "Any steel pipe material",
                            "Any plastic pipe material"
                        ],
                        correct: 0
                    },
                    {
                        question: "When is a condensate pump required?",
                        options: [
                            "All condensing appliance installation",
                            "When a condensate trap cannot be installed",
                            "When the condensate cannot drain by gravity to the DWV system",
                            "When the condensate drain needs to be graded more than ¼ inch per foot"
                        ],
                        correct: 2
                    },
                    {
                        question: "What voltage does the IFC receive from the thermostat circuit on a call for heat?",
                        options: [
                            "24 VAC",
                            "24 VDC",
                            "120 VAC",
                            "120 VDC"
                        ],
                        correct: 0
                    },
                    {
                        question: "If the return air temperature is 70°F (21°C) and the temperature rise is 75°F (42°C), what is the supply temperature?",
                        options: [
                            "5°F (-15°C)",
                            "70°F (21°C)",
                            "75°F (24°C)",
                            "145°F (63°C)"
                        ],
                        correct: 3
                    },
                    {
                        question: "What component is designed to cause the burner to shut down if there is a blockage in the vent?",
                        options: [
                            "High-limit",
                            "Pressuretrol",
                            "Roll-out switch",
                            "Pressure switch"
                        ],
                        correct: 3
                    },
                    {
                        question: "What is the range of a typical modulating furnace?",
                        options: [
                            "Between 0% and 100% of input",
                            "Between 40% and 100% of input",
                            "Between 0% and 100% of capacity",
                            "Between 40% and 100% of capacity"
                        ],
                        correct: 3
                    },
                    {
                        question: "How are Type BH vents sized?",
                        options: [
                            "Using the furnace manufacturer's literature",
                            "Using the vent pipe manufacturer's literature",
                            "Using the vent sizing tables in the CSA B149.1 Code",
                            "Using the outlet size of the vent on the appliance and increasing one size for every 50 feet"
                        ],
                        correct: 0
                    },
                    {
                        question: "Must a defective heat exchanger in a dwelling unit be replaced immediately?",
                        options: [
                            "Yes",
                            "No, it can be temporarily repaired",
                            "No, it can be permanently repaired",
                            "No, only if the CO level is above the maximum acceptable for the appliance"
                        ],
                        correct: 0
                    },
                    {
                        question: "How is vent piping graded for a side-wall installation?",
                        options: [
                            "Perfectly horizontal",
                            "Toward the appliance",
                            "Away from the appliance",
                            "To a low point created mid-way in the system"
                        ],
                        correct: 1
                    },
                    {
                        question: "Where does condensate form in a condensing appliance system?",
                        options: [
                            "Only in the primary heat exchanger",
                            "Only in the secondary heat exchanger",
                            "In the primary and secondary heat exchangers",
                            "In the secondary heat exchanger and the venting system"
                        ],
                        correct: 3
                    },
                    {
                        question: "On which types of furnaces would you find an auxiliary limit control?",
                        options: [
                            "Only central furnaces",
                            "Downflow furnaces only",
                            "Horizontal or downflow furnaces",
                            "Upflow, horizontal, and downflow furnaces"
                        ],
                        correct: 2
                    },
                    {
                        question: "What type(s) of furnace(s) use an inducer fan?",
                        options: [
                            "Mid-efficiency only",
                            "High-efficiency only",
                            "Mid-efficiency and high-efficiency",
                            "Low-efficiency, mid-efficiency, and high-efficiency"
                        ],
                        correct: 2
                    },
                    {
                        question: "How is manifold pressure measured on a residential furnace?",
                        options: [
                            "Upstream of the combination gas valve with the appliance shut off",
                            "Downstream of the combination gas valve with the appliance shut off",
                            "Upstream of the combination gas valve with the appliance operating",
                            "Downstream of the combination gas valve with the appliance operating"
                        ],
                        correct: 3
                    }
                ]
            }
        };

        // Quiz state
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function startQuiz(quizType) {
            currentQuiz = quizData[quizType];
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';

            document.getElementById('quizTitle').textContent = currentQuiz.title;
            
            // Set up quit button event listener
            const quitButton = document.getElementById('quitButton');
            if (quitButton) {
                quitButton.onclick = function() {
                    returnToMenu();
                };
            }
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressInfo').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            
            // Show question
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Show options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option';
                button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                button.onclick = () => selectAnswer(index);
                
                // Restore previous selection
                if (userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').textContent = 
                currentQuestionIndex === totalQuestions - 1 ? 'Finish Quiz' : 'Next';
        }

        function selectAnswer(answerIndex) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuiz.questions.length; i++) {
                if (userAnswers[i] === currentQuiz.questions[i].correct) {
                    score++;
                }
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('incorrectAnswers').textContent = totalQuestions - score;
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set score circle color based on performance
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
            } else if (percentage >= 80) {
                scoreCircle.classList.add('score-good');
            } else if (percentage >= 70) {
                scoreCircle.classList.add('score-fair');
            } else {
                scoreCircle.classList.add('score-poor');
            }
            
            // Generate answer review
            generateAnswerReview();
        }

        function generateAnswerReview() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            
            currentQuiz.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-review';
                
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = question.correct;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question-text';
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionDiv.appendChild(questionText);
                
                // Answer comparison
                const answerComparison = document.createElement('div');
                answerComparison.className = 'answer-comparison';
                
                // User's answer
                const userAnswerDiv = document.createElement('div');
                userAnswerDiv.className = `answer-row user-answer ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const userAnswerLabel = document.createElement('span');
                userAnswerLabel.className = 'answer-label';
                userAnswerLabel.textContent = 'Your answer:';
                
                const userAnswerText = document.createElement('span');
                userAnswerText.className = 'answer-text';
                
                if (userAnswerIndex !== undefined) {
                    const optionLetter = String.fromCharCode(65 + userAnswerIndex);
                    userAnswerText.textContent = `${optionLetter}) ${question.options[userAnswerIndex]}`;
                } else {
                    userAnswerText.textContent = 'No answer selected';
                }
                
                const userAnswerIcon = document.createElement('span');
                userAnswerIcon.className = 'answer-icon';
                userAnswerIcon.textContent = isCorrect ? '✓' : '✗';
                
                userAnswerDiv.appendChild(userAnswerLabel);
                userAnswerDiv.appendChild(userAnswerText);
                userAnswerDiv.appendChild(userAnswerIcon);
                
                // Correct answer (only show if user was wrong)
                if (!isCorrect) {
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'answer-row correct-answer';
                    
                    const correctAnswerLabel = document.createElement('span');
                    correctAnswerLabel.className = 'answer-label';
                    correctAnswerLabel.textContent = 'Correct:';
                    
                    const correctAnswerText = document.createElement('span');
                    correctAnswerText.className = 'answer-text';
                    const correctOptionLetter = String.fromCharCode(65 + correctAnswerIndex);
                    correctAnswerText.textContent = `${correctOptionLetter}) ${question.options[correctAnswerIndex]}`;
                    
                    const correctAnswerIcon = document.createElement('span');
                    correctAnswerIcon.className = 'answer-icon';
                    correctAnswerIcon.textContent = '✓';
                    
                    correctAnswerDiv.appendChild(correctAnswerLabel);
                    correctAnswerDiv.appendChild(correctAnswerText);
                    correctAnswerDiv.appendChild(correctAnswerIcon);
                    
                    answerComparison.appendChild(userAnswerDiv);
                    answerComparison.appendChild(correctAnswerDiv);
                } else {
                    answerComparison.appendChild(userAnswerDiv);
                }
                
                questionDiv.appendChild(answerComparison);
                reviewContent.appendChild(questionDiv);
            });
        }

        function toggleAnswerReview() {
            const reviewDiv = document.getElementById('answersReview');
            const button = document.querySelector('.toggle-review');
            
            if (reviewDiv.style.display === 'none') {
                reviewDiv.style.display = 'block';
                button.textContent = 'Hide Answer Review';
            } else {
                reviewDiv.style.display = 'none';
                button.textContent = 'Show Answer Review';
            }
        }

        function returnToMenu() {
            // Hide all containers
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const mainMenu = document.getElementById('mainMenu');
            
            if (quizContainer) {
                quizContainer.style.display = 'none';
            }
            if (resultsContainer) {
                resultsContainer.style.display = 'none';
            }
            // Show main menu
            if (mainMenu) {
                mainMenu.style.display = 'block';
            }
            
            // Reset quiz state
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            // Reset the answer review toggle
            const reviewDiv = document.getElementById('answersReview');
            const toggleButton = document.querySelector('.toggle-review');
            if (reviewDiv) {
                reviewDiv.style.display = 'none';
            }
            if (toggleButton) {
                toggleButton.textContent = 'Show Answer Review';
            }
        }
    </script>
</body>
</html>