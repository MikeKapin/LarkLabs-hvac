<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA Unit 9 - Intro to Gas Appliances</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .logo {
            width: 120px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .csa-logo {
            width: 100%;
            height: auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .final-exam-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            grid-column: 1 / -1;
            font-size: 18px;
            padding: 25px;
        }

        .quiz-container {
            display: none;
        }

        .quiz-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .quiz-title {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-text {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .control-button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-button {
            background: #6c757d;
            color: white;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .quit-button {
            background: #dc3545;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #00a085); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .score-poor { background: linear-gradient(135deg, #e17055, #d63031); }

        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .results-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .answers-review {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }

        .review-header {
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-review {
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
            margin-bottom: 15px;
        }

        .question-review:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .review-question-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .answer-comparison {
            display: grid;
            gap: 8px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .user-answer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .user-answer.correct {
            background: #d4edda;
            border: 1px solid #74b816;
            color: #155724;
        }

        .user-answer.incorrect {
            background: #f8d7da;
            border: 1px solid #e74c3c;
            color: #721c24;
        }

        .correct-answer {
            background: #d1ecf1;
            border: 1px solid #74b816;
            color: #0c5460;
        }

        .answer-label {
            font-weight: 600;
            margin-right: 10px;
            min-width: 80px;
        }

        .answer-text {
            flex: 1;
        }

        .answer-icon {
            margin-left: 10px;
            font-weight: bold;
        }

        .toggle-review {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .toggle-review:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 14px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lark-logo {
            height: 30px;
            width: auto;
        }

        .created-by {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Navigation -->
        <div id="mainMenu">
            <div class="logo">
                <svg class="csa-logo" viewBox="0 0 1024 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- CSA Square Logo with curved design -->
                    <rect x="0" y="150" width="300" height="300" fill="#1565C0" rx="20"/>
                    <!-- Green curved element -->
                    <path d="M 50 250 Q 150 200 250 250 Q 200 300 100 280 Q 75 265 50 250" fill="#7CB342"/>
                    <!-- White curved swoosh -->
                    <path d="M 0 350 Q 100 300 200 350 Q 250 380 300 400 L 300 450 Q 200 420 100 450 Q 50 430 0 450 Z" fill="white"/>
                    
                    <!-- CSA Text -->
                    <text x="350" y="280" font-family="Arial, sans-serif" font-size="120" font-weight="bold" fill="#1565C0">CSA</text>
                    
                    <!-- STANDARDS Text -->
                    <text x="0" y="550" font-family="Arial, sans-serif" font-size="80" font-weight="bold" fill="#7CB342">STANDARDS</text>
                </svg>
            </div>
            <h1>Unit 9 - Intro to Gas Appliances</h1>
            <p class="subtitle">Gas Trade Training - Chapter Questions</p>
            
            <div class="button-grid">
                <button class="nav-button" onclick="startQuiz('chapter1')">
                    Chapter 1<br>
                    <small>Venting</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter2')">
                    Chapter 2<br>
                    <small>Operation and Applications of Various Burners</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter3')">
                    Chapter 3<br>
                    <small>Pilots and Ignition Systems</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter4')">
                    Chapter 4<br>
                    <small>Controls and Safeties</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter5')">
                    Chapter 5<br>
                    <small>Non-vented and Vented Gas</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter6')">
                    Chapter 6<br>
                    <small>Requirements for Converting an Appliance</small>
                </button>
                <button class="nav-button" onclick="startQuiz('chapter7')">
                    Chapter 7<br>
                    <small>Reactivation of Appliances</small>
                </button>
                <button class="nav-button final-exam-button" onclick="startQuiz('finalExam')">
                    CSA Unit 9 Final Exam<br>
                    <small>Intro to Gas Appliances - All Chapters</small>
                </button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <h2 id="quizTitle" class="quiz-title"></h2>
                <div id="progressInfo"></div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="questionCard" class="question-card">
                <div id="questionNumber" class="question-number"></div>
                <div id="questionText" class="question-text"></div>
                <div id="answerOptions"></div>
            </div>

            <div class="quiz-controls">
                <button id="prevButton" class="control-button prev-button" onclick="previousQuestion()">Previous</button>
                <button id="quitButton" class="control-button quit-button">Quit Quiz</button>
                <button id="nextButton" class="control-button next-button" onclick="nextQuestion()">Next</button>
            </div>

            <!-- Footer for Quiz -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- HVAC Unit Main Body -->
                        <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                        
                        <!-- Fan/Blower Circle -->
                        <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                        <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                        <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                        
                        <!-- Fan Blades -->
                        <g transform="translate(90,80)">
                            <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                            <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                        </g>
                        
                        <!-- Control Panel Lines -->
                        <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                        <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                        <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                        <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                        
                        <!-- Status Light -->
                        <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                        
                        <!-- Unit Feet -->
                        <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        
                        <!-- LARK text -->
                        <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                        <!-- Subtitle -->
                        <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" class="results-container">
            <div id="scoreCircle" class="score-circle">
                <span id="scorePercentage"></span>
            </div>
            <h2 class="results-title">Quiz Complete!</h2>
            <div class="results-details">
                <div class="detail-item">
                    <span>Total Questions:</span>
                    <span id="totalQuestions"></span>
                </div>
                <div class="detail-item">
                    <span>Correct Answers:</span>
                    <span id="correctAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Incorrect Answers:</span>
                    <span id="incorrectAnswers"></span>
                </div>
                <div class="detail-item">
                    <span>Final Score:</span>
                    <span id="finalScore"></span>
                </div>
            </div>
            
            <button class="toggle-review" onclick="toggleAnswerReview()">Show Answer Review</button>
            
            <div id="answersReview" class="answers-review" style="display: none;">
                <div class="review-header">Answer Review</div>
                <div id="reviewContent"></div>
            </div>
            
            <button class="control-button next-button" onclick="returnToMenu()">Return to Menu</button>

            <!-- Footer for Results -->
            <div class="footer">
                <div class="footer-content">
                    <span class="created-by">Created by</span>
                    <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- HVAC Unit Main Body -->
                        <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                        
                        <!-- Fan/Blower Circle -->
                        <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                        <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                        <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                        
                        <!-- Fan Blades -->
                        <g transform="translate(90,80)">
                            <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                            <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                        </g>
                        
                        <!-- Control Panel Lines -->
                        <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                        <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                        <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                        <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                        <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                        
                        <!-- Status Light -->
                        <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                        
                        <!-- Unit Feet -->
                        <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                        
                        <!-- LARK text -->
                        <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                        <!-- LABS text -->
                        <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                        <!-- Subtitle -->
                        <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <span class="created-by">Created by</span>
                <svg class="lark-logo" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- HVAC Unit Main Body -->
                    <rect x="20" y="30" width="140" height="100" fill="#2E4A6B" rx="8"/>
                    
                    <!-- Fan/Blower Circle -->
                    <circle cx="90" cy="80" r="35" fill="none" stroke="white" stroke-width="4"/>
                    <circle cx="90" cy="80" r="28" fill="none" stroke="white" stroke-width="2"/>
                    <circle cx="90" cy="80" r="20" fill="none" stroke="white" stroke-width="2"/>
                    
                    <!-- Fan Blades -->
                    <g transform="translate(90,80)">
                        <path d="M -15,0 Q -8,-12 0,-15 Q 8,-12 15,0 Q 8,12 0,15 Q -8,12 -15,0" fill="white" opacity="0.8"/>
                        <path d="M 0,-15 Q 12,-8 15,0 Q 12,8 0,15 Q -12,8 -15,0 Q -12,-8 0,-15" fill="white" opacity="0.6"/>
                    </g>
                    
                    <!-- Control Panel Lines -->
                    <rect x="125" y="45" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="55" width="20" height="3" fill="white" rx="1"/>
                    <rect x="125" y="65" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="75" width="18" height="3" fill="white" rx="1"/>
                    <rect x="125" y="85" width="22" height="3" fill="white" rx="1"/>
                    <rect x="125" y="95" width="25" height="3" fill="white" rx="1"/>
                    <rect x="125" y="105" width="20" height="3" fill="white" rx="1"/>
                    
                    <!-- Status Light -->
                    <circle cx="135" cy="115" r="3" fill="#4CAF50"/>
                    
                    <!-- Unit Feet -->
                    <rect x="35" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                    <rect x="117" y="130" width="8" height="6" fill="#2E4A6B" rx="2"/>
                    
                    <!-- LARK text -->
                    <text x="180" y="85" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#2E4A6B">LARK</text>
                    <!-- LABS text -->
                    <text x="180" y="115" font-family="Arial, sans-serif" font-size="28" fill="#5A7A9A">Labs</text>
                    <!-- Subtitle -->
                    <text x="180" y="140" font-family="Arial, sans-serif" font-size="14" fill="#7A8A9A">HVAC MOBILE TOOLS AND TRAINING</text>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Quiz data based on CSA Unit 9 materials
        const quizData = {
            chapter1: {
                title: "Chapter 1: Venting",
                questions: [
                    {
                        question: "What two products are produced by the complete combustion of natural gas or propane?",
                        options: [
                            "Carbon dioxide, water vapour",
                            "Carbon monoxide, oxygen",
                            "Carbon dioxide, oxygen",
                            "Carbon monoxide, water vapour"
                        ],
                        correct: 0
                    },
                    {
                        question: "What are the conditions that provide a natural draft venting system with the greatest amount of draft?",
                        options: [
                            "Low stack temperature, high outdoor temperature, high stack height",
                            "High stack temperature, high outdoor temperature, high stack height",
                            "High stack temperature, low outdoor temperature, high stack height",
                            "Low stack temperature, low outdoor temperature, high stack height"
                        ],
                        correct: 2
                    },
                    {
                        question: "What device allows dilution air to enter the venting system of an atmospherically fired appliance?",
                        options: [
                            "Combustion air opening",
                            "Burner air shutter",
                            "Draft hood",
                            "Barometric damper"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which type of vent is required when flue gas temperatures exceed 470°F (243°C)?",
                        options: [
                            "B vent",
                            "BW vent",
                            "Chimney",
                            "L vent"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which type of vent has a double-wall construction with a dead air space between the walls?",
                        options: [
                            "BW vent",
                            "L vent",
                            "B vent",
                            "Single-wall vent"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which type of vent draws in combustion air and emits flue gases from the same vent?",
                        options: [
                            "Power vent",
                            "BH vent",
                            "Direct vent",
                            "Single-wall vent"
                        ],
                        correct: 2
                    },
                    {
                        question: "How does increasing vent temperature or height affect the draft of a natural draft (buoyancy vented) venting system?",
                        options: [
                            "It decreases the draft",
                            "It does not affect the draft",
                            "It increases the draft"
                        ],
                        correct: 2
                    },
                    {
                        question: "To what ULC Standard must all plastic material used in type \"BH\" venting systems be approved?",
                        options: [
                            "ULC Standard CAN4-S605",
                            "ULC Standard S636",
                            "ULC Standard S609"
                        ],
                        correct: 1
                    },
                    {
                        question: "When is a single-acting barometric damper allowed on a propane or natural gas appliance?",
                        options: [
                            "When connected to the same chimney as an oil-fired appliance",
                            "For an incinerator only",
                            "When connected to the same chimney as a wood-fired appliance"
                        ],
                        correct: 1
                    },
                    {
                        question: "What determines the adjustment of a barometric damper?",
                        options: [
                            "The type of burner and combustion chamber and/or the manufacturer's literature",
                            "The damper is preset based on the input of the appliance"
                        ],
                        correct: 0
                    },
                    {
                        question: "How many screws are required at each joint of single wall venting material?",
                        options: [
                            "At least two",
                            "One to prevent the vent from separating",
                            "Three"
                        ],
                        correct: 2
                    }
                ]
            },
            chapter2: {
                title: "Chapter 2: Operation and Applications of Various Burners",
                questions: [
                    {
                        question: "What term is used to describe a burner flame that moves back through the burner nozzle?",
                        options: [
                            "Delayed ignition",
                            "Lazy flame",
                            "Flashback"
                        ],
                        correct: 2
                    },
                    {
                        question: "Through which device is fuel discharged to an atmospheric burner?",
                        options: [
                            "Orifice",
                            "Burner venturi",
                            "Burner ports"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which type of atmospheric burner produces a single large flame?",
                        options: [
                            "Induced draft",
                            "Single or mono-port burner",
                            "Forced draft"
                        ],
                        correct: 1
                    },
                    {
                        question: "Drilled port, drilled pipe, slotted port, and ribbon port are all types of what?",
                        options: [
                            "Single port atmospheric burners",
                            "Radiant head atmospheric burners",
                            "Multiport atmospheric burners",
                            "Pulse combustion atmospheric burners"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the recommended maximum port diameter for drilled port atmospheric burners?",
                        options: [
                            "No. 29 drill",
                            "No. 12 drill",
                            "No. 42 drill",
                            "No. 56 drill"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the recommended minimum port diameter for drilled port atmospheric burners?",
                        options: [
                            "No. 56 drill",
                            "No. 12 drill",
                            "No. 42 drill",
                            "No. 29 drill"
                        ],
                        correct: 2
                    },
                    {
                        question: "What type of burner has combustion air supplied by a fan or blower under sufficient pressure to overcome the restriction of the burner and the appliance?",
                        options: [
                            "Fan assisted burner",
                            "Natural draft burner",
                            "Forced draft burner"
                        ],
                        correct: 2
                    },
                    {
                        question: "What type of burner has a fan located downstream of the combustion zone?",
                        options: [
                            "Forced draft burner",
                            "Induced draft burner",
                            "Atmospheric burner"
                        ],
                        correct: 1
                    },
                    {
                        question: "What device is used to regulate gas supply to an aspirator-type burner?",
                        options: [
                            "Zero governor",
                            "Orifice",
                            "Blower mixer"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which atmospheric burners are most susceptible to flashback?",
                        options: [
                            "Ribbon burners",
                            "Ring burners",
                            "Mono-port"
                        ],
                        correct: 2
                    },
                    {
                        question: "What helps to keep the flame retained at the burner port of a mono-port burner?",
                        options: [
                            "Gas pressure",
                            "Flame spreader",
                            "Crimped ring"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is a \"multiport\" burner susceptible to?",
                        options: [
                            "Clogging with lint from the inside",
                            "Delayed ignition",
                            "Sooting"
                        ],
                        correct: 1
                    }
                ]
            },
            chapter3: {
                title: "Chapter 3: Pilots and Ignition Systems",
                questions: [
                    {
                        question: "Aerated and non-aerating are types of what?",
                        options: [
                            "Ignition systems",
                            "Flame sensing devices",
                            "Pilot burners"
                        ],
                        correct: 2
                    },
                    {
                        question: "What is the most common problem associated with aerated pilots?",
                        options: [
                            "Clogging due to dust or lint",
                            "Lifting or blowing",
                            "Noisy"
                        ],
                        correct: 0
                    },
                    {
                        question: "When you discover a noisy, lifting, blowing flame on a non-aerating pilot, what is the cause of the problem?",
                        options: [
                            "High gas pressure",
                            "Low gas pressure",
                            "Blocked vent",
                            "Orifice too large"
                        ],
                        correct: 0
                    },
                    {
                        question: "When you discover a hard, sharp flame on an aerating pilot, what is the cause of the problem?",
                        options: [
                            "High gas pressure",
                            "Orifice too large",
                            "Orifice too small",
                            "Excessive draft at pilot location"
                        ],
                        correct: 2
                    },
                    {
                        question: "When a flame detector that acts to prevent gas from flowing to the main burner, unless a proper pilot flame is proven, monitors a pilot flame, you call this flame a:",
                        options: [
                            "Proven pilot",
                            "Proved pilot",
                            "Intermittent pilot",
                            "Standing pilot"
                        ],
                        correct: 1
                    },
                    {
                        question: "How is a piezoelectric voltage generated?",
                        options: [
                            "Through a mechanical force",
                            "Through a battery"
                        ],
                        correct: 0
                    },
                    {
                        question: "How has the use of modern automatic ignition systems affected the time in which a flame failure is detected?",
                        options: [
                            "Flame failure rarely occurs as a result of modern ignition systems",
                            "Flame failure is detected much faster",
                            "There are fewer delayed ignitions"
                        ],
                        correct: 1
                    },
                    {
                        question: "What causes the bimetal strip to curve with changes in temperature?",
                        options: [
                            "One side of the strip is shorter than the other side",
                            "The welding temperature is too high",
                            "The two metals that are joined have different temperature coefficients of expansion"
                        ],
                        correct: 2
                    },
                    {
                        question: "What causes the resistance of a thermistor to change?",
                        options: [
                            "A temperature change",
                            "Humidity",
                            "Time"
                        ],
                        correct: 0
                    }
                ]
            },
            chapter4: {
                title: "Chapter 4: Controls and Safeties",
                questions: [
                    {
                        question: "What is the purpose of an operating aquastat?",
                        options: [
                            "To maintain water pressure in a boiler system",
                            "To ensure water flow",
                            "To energize or de-energize the main gas valve in response to the water temperature"
                        ],
                        correct: 2
                    },
                    {
                        question: "Is the temperature setting of a high-limit aquastat higher or lower than the setting of the operating aquastat?",
                        options: [
                            "Lower",
                            "Higher",
                            "The same"
                        ],
                        correct: 1
                    },
                    {
                        question: "Does the furnace fan continue to run if the high-limit switch opens the furnace control circuit?",
                        options: [
                            "Yes",
                            "No"
                        ],
                        correct: 0
                    },
                    {
                        question: "What causes the contacts of a steam boiler operating pressuretrol to open?",
                        options: [
                            "The water level in the boiler increases",
                            "A rise in steam pressure",
                            "The water level in the boiler decreases"
                        ],
                        correct: 1
                    },
                    {
                        question: "What activates a flame roll-out switch?",
                        options: [
                            "Spillage of flue products from the draft hood opening",
                            "The opening of the high limit",
                            "A rise in temperature"
                        ],
                        correct: 2
                    }
                ]
            },
            chapter5: {
                title: "Chapter 5: Non-vented and Vented Gas",
                questions: [
                    {
                        question: "Which of the following is not a way in which heat is transferred?",
                        options: [
                            "Vibration",
                            "Conduction",
                            "Radiation",
                            "Convection"
                        ],
                        correct: 0
                    },
                    {
                        question: "In which direction does heat energy flow?",
                        options: [
                            "It flows from cold to warm",
                            "It flows from warm to cold"
                        ],
                        correct: 1
                    },
                    {
                        question: "What happens when a fluid is heated?",
                        options: [
                            "It expands and becomes lighter",
                            "It reduces volume",
                            "It boils"
                        ],
                        correct: 0
                    },
                    {
                        question: "What controls the drying period of a gas-fired clothes dryer?",
                        options: [
                            "The thermostat",
                            "Moisture sensor or timer",
                            "The high limit"
                        ],
                        correct: 1
                    },
                    {
                        question: "What normally controls the automatic gas valve found on a forced warm-air furnace?",
                        options: [
                            "The high limit control",
                            "The air circulating fan",
                            "A thermostat mounted in the space being heated"
                        ],
                        correct: 2
                    },
                    {
                        question: "Where is the blower located on a down-flow furnace?",
                        options: [
                            "Above the heat exchanger",
                            "Below the heat exchanger",
                            "At the same level as the heat exchanger"
                        ],
                        correct: 0
                    },
                    {
                        question: "Name two ways in which the burner can be controlled on a unit heater.",
                        options: [
                            "Opening a window, manual shut off valve on the gas line",
                            "A wall-mounted thermostat, manual switch"
                        ],
                        correct: 1
                    },
                    {
                        question: "What factor must be considered when installing swimming pool heaters that would not be a concern with a hot-water space-heating boiler?",
                        options: [
                            "High flow rate",
                            "Low water temperature",
                            "Thermostat location"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which of the following conditions are not regulated in a hot water boiler?",
                        options: [
                            "Firing of the boiler",
                            "Boiler water temperature",
                            "Venting pressure",
                            "Circulating pump"
                        ],
                        correct: 2
                    },
                    {
                        question: "Which type of water heating system can be used for both domestic hot water supply and space heating?",
                        options: [
                            "Combination unit",
                            "Any power vented water heater",
                            "Fin-type boiler"
                        ],
                        correct: 0
                    },
                    {
                        question: "How is the heat directed to the floor in a low-intensity infrared heater?",
                        options: [
                            "By the use of ceiling fan",
                            "Through convection",
                            "The tubes radiate heat to the reflectors which in turn direct the heat to the floor"
                        ],
                        correct: 2
                    },
                    {
                        question: "What three types of gas-fired units are used to heat a single room or other small areas?",
                        options: [
                            "Room space heaters, Wall furnace, Baseboard heater",
                            "Room space heaters, Steam boiler, Baseboard heater",
                            "Baseboard heater, Room space heater, Infrared heater"
                        ],
                        correct: 0
                    },
                    {
                        question: "Many gas-fired rooftop units provide both heating and cooling functions.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 0
                    }
                ]
            },
            chapter6: {
                title: "Chapter 6: Requirements for Converting an Appliance between Propane and Natural Gas",
                questions: [
                    {
                        question: "Only authorized individuals are permitted to perform fuel type conversion on appliances with inputs of:",
                        options: [
                            "400 000 Btu/h or more",
                            "200 000 Btu/h or less",
                            "400 000 Btu/h or less",
                            "200 000 Btu/h or more"
                        ],
                        correct: 3
                    },
                    {
                        question: "Which of the following factors does not affect the sizing of the burner orifice?",
                        options: [
                            "Type of gas",
                            "Position of the burner in relation to the pilot",
                            "Appliance input",
                            "Manifold pressure"
                        ],
                        correct: 1
                    },
                    {
                        question: "Under what conditions may an appliance not certified for conversion be converted?",
                        options: [
                            "The conversion must be tested and labelled by the inspection authority or an agency authorized by the inspection authority",
                            "The orifice must be properly sized and the pressure properly regulated"
                        ],
                        correct: 0
                    },
                    {
                        question: "If gas supply piping must be changed when converting an appliance, what must be done with the old piping?",
                        options: [
                            "The old piping can be cleaned and restocked for further use with the same fuel it was used for previously",
                            "The piping cannot be used for the same fuel",
                            "Old piping is to be removed or abandoned in a safe manner"
                        ],
                        correct: 2
                    },
                    {
                        question: "What device is normally used to check the manifold gas pressure of a newly converted appliance?",
                        options: [
                            "A manometer",
                            "A spring gauge"
                        ],
                        correct: 0
                    },
                    {
                        question: "Where would you find information on propane orifice sizing?",
                        options: [
                            "The manufacturers and the propane storage and handling code",
                            "The manufactures and the propane storage and handling regulation",
                            "The propane storage and handling regulation and the propane storage and handling code"
                        ],
                        correct: 0
                    },
                    {
                        question: "What are the installer's responsibilities regarding the propane supply system when conducting a conversion from propane to natural gas and the propane tank is no longer going to be used?",
                        options: [
                            "Shut off all valves, disconnect the pipe or tubing, plug the openings",
                            "Shut off all valves and dispose of the tank",
                            "Nothing, the tank is the customer's responsibility"
                        ],
                        correct: 0
                    },
                    {
                        question: "Who must test and label the appliance if the manufacturer does not make a similar model in the fuel the appliance is to be converted to?",
                        options: [
                            "The person doing the conversion",
                            "The homeowner",
                            "The inspection authority or an agency authorized by the inspection authority (field approved)"
                        ],
                        correct: 2
                    },
                    {
                        question: "What must be done after any conversion to ensure the input is correct?",
                        options: [
                            "Test the manifold pressure",
                            "Visually check the flame",
                            "Check the safety system works properly (thermostat, high limit)"
                        ],
                        correct: 0
                    }
                ]
            },
            chapter7: {
                title: "Chapter 7: Reactivation of Appliances",
                questions: [
                    {
                        question: "What does scorching on the appliance combustion chamber or surrounding area indicate?",
                        options: [
                            "Overheating",
                            "Incomplete combustion",
                            "Corrosion"
                        ],
                        correct: 0
                    },
                    {
                        question: "What does scaling on the appliance combustion chamber or surrounding area indicate?",
                        options: [
                            "Incomplete combustion",
                            "Heat exchanger cracks",
                            "Corrosion"
                        ],
                        correct: 2
                    },
                    {
                        question: "How long must the gas pressure be indicated on the manometer (or pressure testing gauge)?",
                        options: [
                            "5 minutes",
                            "10 minutes",
                            "2 minutes"
                        ],
                        correct: 1
                    },
                    {
                        question: "What procedure must be performed on the control valves and piping before appliance light-up?",
                        options: [
                            "Visual inspection for alignment",
                            "Soap test",
                            "Use a lit taper at all connections downstream of the control valve to check for leaks"
                        ],
                        correct: 1
                    },
                    {
                        question: "The main valve to a natural gas regulator/meter set should be turned on quickly when reactivating a system.",
                        options: [
                            "True",
                            "False"
                        ],
                        correct: 1
                    },
                    {
                        question: "Why is it necessary to make sure there are no open lines when activating a system?",
                        options: [
                            "To prevent an explosion",
                            "To allow for the regulator to lock up",
                            "To prevent asphyxiation of persons in the area"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the purpose of a meter \"dial test\"?",
                        options: [
                            "To ensure the meter is measuring properly",
                            "To test for leaks in the system up to the inlets of the gas controls"
                        ],
                        correct: 1
                    },
                    {
                        question: "Why is it important to examine the chimney or vent stack when visiting a premise to work on gas equipment?",
                        options: [
                            "To reduce the risk of CO poisoning due to venting system problems",
                            "To ensure there are no animals in the vent that could get hurt",
                            "To ensure the chimney or vent has been properly cleaned"
                        ],
                        correct: 0
                    },
                    {
                        question: "What should be used as a reference when relighting an appliance?",
                        options: [
                            "The directions listed with the igniter",
                            "The lighting instructions on the appliance rating plate",
                            "The Codebook"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is indicated if the interior of a draft diverter is coated with black powder?",
                        options: [
                            "The vent needs to be replaced",
                            "The burner either needs adjustment or cleaning",
                            "The appliance needs to be replaced"
                        ],
                        correct: 1
                    }
                ]
            },
            finalExam: {
                title: "CSA Unit 9 Final Exam - Intro to Gas Appliances",
                questions: []
            }
        };

        // Function to shuffle array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Create final exam with all questions randomized
        function createFinalExam() {
            const allQuestions = [];
            
            // Collect all questions from all chapters
            Object.keys(quizData).forEach(key => {
                if (key !== 'finalExam') {
                    allQuestions.push(...quizData[key].questions);
                }
            });
            
            // Shuffle and assign to final exam
            quizData.finalExam.questions = shuffleArray(allQuestions);
        }

        // Initialize final exam on page load
        createFinalExam();

        // Quiz state
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        function startQuiz(quizType) {
            currentQuiz = quizData[quizType];
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            // Shuffle questions for individual chapters too (except final exam which is already shuffled)
            if (quizType !== 'finalExam') {
                currentQuiz.questions = shuffleArray(currentQuiz.questions);
            }

            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';

            document.getElementById('quizTitle').textContent = currentQuiz.title;
            
            // Set up quit button event listener
            const quitButton = document.getElementById('quitButton');
            if (quitButton) {
                quitButton.onclick = function() {
                    returnToMenu();
                };
            }
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const totalQuestions = currentQuiz.questions.length;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressInfo').textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
            
            // Show question
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Show options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option';
                button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                button.onclick = () => selectAnswer(index);
                
                // Restore previous selection
                if (userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').textContent = 
                currentQuestionIndex === totalQuestions - 1 ? 'Finish Quiz' : 'Next';
        }

        function selectAnswer(answerIndex) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuiz.questions.length; i++) {
                if (userAnswers[i] === currentQuiz.questions[i].correct) {
                    score++;
                }
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const totalQuestions = currentQuiz.questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('incorrectAnswers').textContent = totalQuestions - score;
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set score circle color based on performance
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
            } else if (percentage >= 80) {
                scoreCircle.classList.add('score-good');
            } else if (percentage >= 70) {
                scoreCircle.classList.add('score-fair');
            } else {
                scoreCircle.classList.add('score-poor');
            }
            
            // Generate answer review
            generateAnswerReview();
        }

        function generateAnswerReview() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            
            currentQuiz.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-review';
                
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = question.correct;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question-text';
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionDiv.appendChild(questionText);
                
                // Answer comparison
                const answerComparison = document.createElement('div');
                answerComparison.className = 'answer-comparison';
                
                // User's answer
                const userAnswerDiv = document.createElement('div');
                userAnswerDiv.className = `answer-row user-answer ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const userAnswerLabel = document.createElement('span');
                userAnswerLabel.className = 'answer-label';
                userAnswerLabel.textContent = 'Your answer:';
                
                const userAnswerText = document.createElement('span');
                userAnswerText.className = 'answer-text';
                
                if (userAnswerIndex !== undefined) {
                    const optionLetter = String.fromCharCode(65 + userAnswerIndex);
                    userAnswerText.textContent = `${optionLetter}) ${question.options[userAnswerIndex]}`;
                } else {
                    userAnswerText.textContent = 'No answer selected';
                }
                
                const userAnswerIcon = document.createElement('span');
                userAnswerIcon.className = 'answer-icon';
                userAnswerIcon.textContent = isCorrect ? '✓' : '✗';
                
                userAnswerDiv.appendChild(userAnswerLabel);
                userAnswerDiv.appendChild(userAnswerText);
                userAnswerDiv.appendChild(userAnswerIcon);
                
                // Correct answer (only show if user was wrong)
                if (!isCorrect) {
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'answer-row correct-answer';
                    
                    const correctAnswerLabel = document.createElement('span');
                    correctAnswerLabel.className = 'answer-label';
                    correctAnswerLabel.textContent = 'Correct:';
                    
                    const correctAnswerText = document.createElement('span');
                    correctAnswerText.className = 'answer-text';
                    const correctOptionLetter = String.fromCharCode(65 + correctAnswerIndex);
                    correctAnswerText.textContent = `${correctOptionLetter}) ${question.options[correctAnswerIndex]}`;
                    
                    const correctAnswerIcon = document.createElement('span');
                    correctAnswerIcon.className = 'answer-icon';
                    correctAnswerIcon.textContent = '✓';
                    
                    correctAnswerDiv.appendChild(correctAnswerLabel);
                    correctAnswerDiv.appendChild(correctAnswerText);
                    correctAnswerDiv.appendChild(correctAnswerIcon);
                    
                    answerComparison.appendChild(userAnswerDiv);
                    answerComparison.appendChild(correctAnswerDiv);
                } else {
                    answerComparison.appendChild(userAnswerDiv);
                }
                
                questionDiv.appendChild(answerComparison);
                reviewContent.appendChild(questionDiv);
            });
        }

        function toggleAnswerReview() {
            const reviewDiv = document.getElementById('answersReview');
            const button = document.querySelector('.toggle-review');
            
            if (reviewDiv.style.display === 'none') {
                reviewDiv.style.display = 'block';
                button.textContent = 'Hide Answer Review';
            } else {
                reviewDiv.style.display = 'none';
                button.textContent = 'Show Answer Review';
            }
        }

        function returnToMenu() {
            // Hide all containers
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const mainMenu = document.getElementById('mainMenu');
            
            if (quizContainer) {
                quizContainer.style.display = 'none';
            }
            if (resultsContainer) {
                resultsContainer.style.display = 'none';
            }
            if (mainMenu) {
                mainMenu.style.display = 'block';
            }
            
            // Reset quiz state
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            
            // Reset the answer review toggle
            const reviewDiv = document.getElementById('answersReview');
            const toggleButton = document.querySelector('.toggle-review');
            if (reviewDiv) {
                reviewDiv.style.display = 'none';
            }
            if (toggleButton) {
                toggleButton.textContent = 'Show Answer Review';
            }

            // Recreate final exam to shuffle questions again
            createFinalExam();
        }
    </script>
</body>
</html>