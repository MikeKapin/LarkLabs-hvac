<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LARK Labs HVAC Tools - Free Professional Tools & Training</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2c3e50 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(52, 152, 219, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(52, 152, 219, 0.3);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
            display: flex;
            align-items: center;
            gap: 20px;
            transform: scale(2);
            transform-origin: left center;
        }

        .logo-bird {
            position: relative;
            display: inline-block;
        }

        .logo-bird svg {
            width: 80px;
            height: 80px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            transition: all 0.3s;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
        }

        /* Hero Section */
        .hero {
            padding: 220px 0 80px 0;
            text-align: center;
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), 
                        radial-gradient(circle at 30% 20%, rgba(52, 152, 219, 0.1) 0%, transparent 70%);
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #ffffff, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: #ecf0f1;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 30px;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            margin: 0 10px;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(52, 152, 219, 0.4);
        }

        .cta-button.secondary {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }

        /* Main Content */
        .main-content {
            padding: 80px 0;
        }

        /* Updated padding for main sections to prevent header obstruction */
        .main-content-with-header {
            padding: 250px 0 80px 0;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
            color: #3498db;
        }

        /* Tools Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s;
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(52, 152, 219, 0.2);
            border-color: rgba(52, 152, 219, 0.3);
        }

        .tool-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #3498db;
        }

        .tool-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #ffffff;
        }

        .tool-card p {
            color: #bdc3c7;
            margin-bottom: 1.5rem;
        }

        .tool-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .status-available {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }

        .status-coming-soon {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }

        /* Community Styles */
        .community-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 1rem;
        }

        .community-nav-item {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            color: #bdc3c7;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .community-nav-item.active, .community-nav-item:hover {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border-color: #3498db;
            transform: translateY(-2px);
        }

        .community-section {
            display: none;
        }

        .community-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        /* Discussion Threads */
        .thread-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .new-thread-form {
            background: rgba(52, 152, 219, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(52, 152, 219, 0.2);
        }

        .thread-input-group {
            margin-bottom: 1rem;
        }

        .thread-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #3498db;
            font-weight: 600;
        }

        .thread-title-input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .thread-category-select {
            width: 200px;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            margin-right: 1rem;
        }

        .thread-content-input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            resize: vertical;
            min-height: 80px;
        }

        .thread-input-group input::placeholder,
        .thread-input-group textarea::placeholder,
        .thread-input-group select {
            color: #bdc3c7;
        }

        .thread-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .thread-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.2);
            border-color: rgba(52, 152, 219, 0.3);
        }

        .thread-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .thread-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .thread-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .thread-author {
            color: #3498db;
            font-weight: 500;
        }

        .thread-time {
            color: #95a5a6;
            font-size: 0.9rem;
        }

        .thread-category {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .thread-stats {
            display: flex;
            gap: 1rem;
            color: #95a5a6;
            font-size: 0.9rem;
        }

        .thread-preview {
            color: #ecf0f1;
            line-height: 1.5;
            margin-top: 0.5rem;
        }

        /* User Directory */
        .user-directory {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .user-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            text-align: center;
        }

        .user-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.2);
            border-color: rgba(52, 152, 219, 0.3);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #3498db, #2980b9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1rem;
            color: white;
            font-weight: bold;
        }

        .user-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .user-title {
            color: #3498db;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .user-location {
            color: #95a5a6;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .user-badges {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .user-badge {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .user-badge.certified {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }

        .user-badge.expert {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
        }

        .connect-button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .connect-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        /* Chat Messages - Enhanced */
        .chat-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-input-area {
            margin-bottom: 2rem;
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            resize: vertical;
            min-height: 60px;
        }

        .chat-input::placeholder {
            color: #bdc3c7;
        }

        .chat-messages {
            max-height: 500px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .chat-message {
            background: rgba(255, 255, 255, 0.08);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .chat-message:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(52, 152, 219, 0.3);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .message-author-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .message-author {
            font-weight: bold;
            color: #3498db;
        }

        .message-author-badge {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .message-time {
            font-size: 0.8rem;
            color: #bdc3c7;
        }

        .message-content {
            color: #ecf0f1;
            line-height: 1.6;
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .reply-button {
            background: none;
            border: 1px solid #3498db;
            color: #3498db;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .reply-button:hover {
            background: #3498db;
            color: white;
            transform: translateY(-1px);
        }

        .like-button {
            background: none;
            border: 1px solid #27ae60;
            color: #27ae60;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .like-button:hover, .like-button.liked {
            background: #27ae60;
            color: white;
            transform: translateY(-1px);
        }

        .reply {
            margin-left: 2rem;
            margin-top: 1rem;
            border-left: 3px solid #27ae60;
            padding-left: 1rem;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 8px;
            padding: 1rem;
        }

        /* Filter and Search */
        .community-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-search {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .filter-category {
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-category.active {
            background: linear-gradient(45deg, #3498db, #2980b9);
            border-color: #3498db;
        }

        /* Newsletter Signup */
        .newsletter-signup {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin: 2rem 0;
        }

        .newsletter-signup h3 {
            color: #3498db;
            margin-bottom: 1rem;
        }

        .newsletter-form {
            display: flex;
            gap: 1rem;
            max-width: 400px;
            margin: 0 auto;
        }

        .newsletter-form input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .newsletter-form button {
            padding: 12px 24px;
            background: #3498db;
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        /* About Section */
        .about-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .feature-item {
            text-align: center;
            padding: 1rem;
        }

        .feature-item .icon {
            font-size: 2.5rem;
            color: #3498db;
            margin-bottom: 1rem;
        }

        /* Quote */
        .quote {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin: 2rem 0;
            font-style: italic;
            font-size: 1.1rem;
        }

        /* Footer */
        footer {
            background: rgba(0, 0, 0, 0.3);
            padding: 2rem 0;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 4rem;
        }

        /* HVAC Calculator Modal */
        .calculator-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            overflow-y: auto;
        }

        .calculator-modal.active {
            display: block;
        }

        .close-calculator {
            position: fixed;
            top: 20px;
            right: 30px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            z-index: 10001;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .close-calculator:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* HVAC Calculator Styles (embedded) */
        .calculator-content {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            height: 100vh;
            padding: 0;
            margin: 0;
            position: relative;
            overflow: hidden;
        }

        .calc-container {
            width: 100%;
            max-width: none;
            margin: 0;
            background: white;
            border-radius: 0;
            box-shadow: none;
            overflow-y: auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .calc-header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            z-index: 1001;
        }

        .calc-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .calc-header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .calc-main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
            flex: 1;
            background: white;
            position: relative;
            z-index: 1001;
        }

        .calc-input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .calc-section-title {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .calc-form-group {
            margin-bottom: 20px;
        }

        .calc-form-group label {
            display: block;
            margin-bottom: 8px;
            color: #34495e;
            font-weight: 500;
        }

        .calc-form-group input, .calc-form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .calc-form-group input:focus, .calc-form-group select:focus {
            outline: none;
            border-color: #3498db;
        }

        .calc-unit-toggle {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9em;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .calc-unit-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .calc-calculate-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .calc-calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .calc-results-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        .calc-result-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 5px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .calc-result-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .calc-result-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #27ae60;
        }

        .calc-climate-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }

        .calc-warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }

        .calc-footer {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            text-align: center;
            padding: 25px;
            border-top: 3px solid #3498db;
            position: relative;
            z-index: 1001;
        }

        .calc-footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-size: 1.1em;
        }

        .calc-lark-logo {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1em;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .calc-tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: #3498db;
            margin-left: 5px;
        }

        .calc-tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .calc-tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* Super-Heat & Sub-Cooling Calculator Modal */
        .superheat-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
        }

        .superheat-modal.active {
            display: block;
        }

        .superheat-modal .calculator-content {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .superheat-modal .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .superheat-modal h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .calc-section {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .calc-section h2 {
            margin-bottom: 20px;
            color: #4ecdc4;
            font-size: 1.8em;
            text-align: center;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #e0e0e0;
        }

        .input-group select, .input-group input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-group select:focus, .input-group input:focus {
            outline: none;
            background: #fff;
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.5);
        }

        .result {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .result.good {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }

        .result.warning {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }

        .result.bad {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .refrigerant-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #4ecdc4;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .info-card h3 {
            color: #4ecdc4;
            margin-bottom: 10px;
        }

        .reset-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .safety-warning {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #fff;
        }

        .a2l-indicator {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-left: 10px;
        }

        /* P-T Chart Modal Styles */
        .pt-chart-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.9);
            overscroll-behavior: contain;
        }

        .pt-chart-modal.active {
            display: block;
        }

        .pt-chart-modal .calculator-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            max-height: 100vh;
        }

        .pt-chart-modal .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
        }

        .pt-chart-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .pt-chart-header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .pt-chart-header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .pt-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 15px;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .pt-control-group {
            display: flex;
            flex-direction: column;
        }

        .pt-control-group label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .pt-controls select, .pt-controls input, .pt-controls button {
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .pt-controls select:focus, .pt-controls input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .pt-controls button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pt-controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .pt-chart-container {
            position: relative;
            height: 600px;
            margin-bottom: 30px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .pt-info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .pt-info-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
        }

        .pt-info-card.a2l {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.3);
        }

        .pt-info-card.natural {
            background: linear-gradient(135deg, #00b894, #00a085);
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.3);
        }

        .pt-info-card h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .pt-info-card p {
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .pt-properties-table {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        .pt-properties-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .pt-properties-table th, .pt-properties-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .pt-properties-table th {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            font-weight: 600;
        }

        .pt-properties-table tr:hover {
            background: rgba(52, 152, 219, 0.05);
        }

        .pt-loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .pt-error {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
                gap: 0.5rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .tools-grid {
                grid-template-columns: 1fr;
            }

            .tool-card {
                padding: 1.5rem;
            }

            .chat-input-area {
                flex-direction: column;
            }

            .newsletter-form {
                flex-direction: column;
            }

            .calc-main-content, .calculator-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
                overflow-y: auto;
            }

            .calc-header h1 {
                font-size: 2em;
            }

            .calc-footer-content {
                flex-direction: column;
                gap: 10px;
            }

            .close-calculator {
                top: 10px;
                right: 15px;
                padding: 8px 16px;
                font-size: 0.9em;
            }

            .pt-controls {
                grid-template-columns: 1fr;
            }
            
            .pt-chart-container {
                height: 400px;
            }

            .main-content-with-header {
                padding: 220px 0 80px 0;
            }
        }

        /* External Link Icon */
        .external-link::after {
            content: "‚Üó";
            font-size: 0.8em;
            margin-left: 5px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">
                <div class="logo-bird">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bird body -->
                        <ellipse cx="50" cy="55" rx="25" ry="20" fill="#4A90E2"/>
                        
                        <!-- Bird head -->
                        <circle cx="65" cy="40" r="15" fill="#5BA3F5"/>
                        
                        <!-- Eye -->
                        <circle cx="70" cy="37" r="3" fill="white"/>
                        <circle cx="71" cy="36" r="1.5" fill="black"/>
                        
                        <!-- Beak -->
                        <polygon points="85,40 75,38 75,42" fill="#FF6B6B"/>
                        
                        <!-- Wing detail -->
                        <ellipse cx="45" cy="50" rx="12" ry="15" fill="#3498db"/>
                        
                        <!-- Tail -->
                        <ellipse cx="25" cy="60" rx="8" ry="12" fill="#3498db"/>
                        
                        <!-- Sound waves -->
                        <path d="M 95 35 Q 90 30 95 25" stroke="#FF6B6B" stroke-width="2" fill="none"/>
                        <path d="M 92 40 Q 87 35 92 30" stroke="#FF6B6B" stroke-width="2" fill="none"/>
                        <path d="M 95 45 Q 90 40 95 35" stroke="#FF6B6B" stroke-width="2" fill="none"/>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1.8rem; font-weight: bold; color: #3498db;">LARK</div>
                    <div style="font-size: 1.2rem; font-weight: normal; color: #95a5a6; margin-top: -5px;">LABS</div>
                </div>
            </div>
            <ul class="nav-links">
                <li><a onclick="showSection('home')" class="active">Home</a></li>
                <li><a onclick="showSection('tools')">Tools</a></li>
                <li><a onclick="showSection('training')">Training</a></li>
                <li><a onclick="showSection('community')">Community</a></li>
                <li><a onclick="showSection('resources')">Resources</a></li>
                <li><a onclick="showSection('about')">About</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- HOME SECTION -->
        <section id="home" class="section active">
            <div class="hero">
                <div class="container">
                    <h1>Free HVAC Tools & Training</h1>
                    <p>Professional-grade calculators, training simulators, and community resources - completely free for HVAC technicians, students, and educators</p>
                    <a href="#" class="cta-button" onclick="showSection('tools')">Browse Tools</a>
                    <a href="#" class="cta-button secondary" onclick="showSection('training')">Start Training</a>
                </div>
            </div>

            <div class="container main-content">
                <div class="quote">
                    "The right tools and training make all the difference in professional HVAC work" - LARK Labs
                </div>

                <h2 class="section-title">What We Offer</h2>
                <div class="tools-grid">
                    <div class="tool-card" onclick="showSection('tools')">
                        <div class="tool-icon">üßÆ</div>
                        <h3>Professional Calculators</h3>
                        <p>Load calculations, unit conversions, and refrigeration charts for everyday use</p>
                        <span class="tool-status status-available">Available Now</span>
                    </div>
                    <div class="tool-card" onclick="showSection('training')">
                        <div class="tool-icon">üéì</div>
                        <h3>Exam Simulators</h3>
                        <p>TSSA G2 & G3 practice exams to help you pass your certification</p>
                        <span class="tool-status status-available">Available Now</span>
                    </div>
                    <div class="tool-card" onclick="showSection('community')">
                        <div class="tool-icon">üí¨</div>
                        <h3>Community Support</h3>
                        <p>Connect with other technicians and students to share knowledge</p>
                        <span class="tool-status status-available">Available Now</span>
                    </div>
                    <div class="tool-card" onclick="showSection('resources')">
                        <div class="tool-icon">üìö</div>
                        <h3>Gas Codes & Regulations</h3>
                        <p>Search through CSA B149.1, TSSA regulations, and safety standards</p>
                        <span class="tool-status status-available">Available Now</span>
                    </div>
                </div>

                <div class="newsletter-signup">
                    <h3>Stay Updated</h3>
                    <p>Get notified when new tools and features are released</p>
                    <div class="newsletter-form">
                        <input type="email" placeholder="Enter your email">
                        <button type="submit">Subscribe</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- TOOLS SECTION -->
        <section id="tools" class="section">
            <div class="container main-content-with-header">
                <h2 class="section-title">HVAC Tools & Calculators</h2>
                
                <div class="tools-grid">
                    <div class="tool-card" onclick="window.open('https://codecompass-api.vercel.app/', '_blank')">
                        <div class="tool-icon">üß≠</div>
                        <h3>Code Compass</h3>
                        <p>Our flagship gas code and regulations search tool for quick reference</p>
                        <span class="tool-status status-available external-link">Launch App</span>
                    </div>
                    <div class="tool-card" onclick="showCalculator()">
                        <div class="tool-icon">üè†</div>
                        <h3>Heat & Cooling Load Calculator</h3>
                        <p>Calculate heating and cooling requirements for residential and commercial spaces with Canadian climate data</p>
                        <span class="tool-status status-available">Launch Calculator</span>
                    </div>
                    <div class="tool-card" onclick="showSuperheatCalculator()">
                        <div class="tool-icon">üå°Ô∏è</div>
                        <h3>Superheat & Subcooling Calculator</h3>
                        <p>Calculate superheat and subcooling values for system diagnostics with comprehensive refrigerant database</p>
                        <span class="tool-status status-available">Launch Calculator</span>
                    </div>
                    <div class="tool-card" onclick="showPTChartModal()">
                        <div class="tool-icon">üìä</div>
                        <h3>Refrigeration P-T Charts</h3>
                        <p>Interactive pressure-temperature charts for all common refrigerants including A2L and natural refrigerants</p>
                        <span class="tool-status status-available">Launch P-T Charts</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üå™Ô∏è</div>
                        <h3>Duct Sizing Calculator</h3>
                        <p>Size ductwork for optimal airflow and efficiency</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üìê</div>
                        <h3>Unit Converter</h3>
                        <p>Convert between imperial and metric units instantly</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üìä</div>
                        <h3>Psychrometric Calculator</h3>
                        <p>Advanced air property calculations and analysis</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- TRAINING SECTION -->
        <section id="training" class="section">
            <div class="container main-content-with-header">
                <h2 class="section-title">HVAC Training & Certification</h2>
                
                <div class="tools-grid">
                    <div class="tool-card" onclick="window.open('./TSSA_G2_Exam_SimulatorV3.html', '_blank')">
                        <div class="tool-icon">üî•</div>
                        <h3>TSSA G2 Practice Exam</h3>
                        <p>Master your Gas Technician 2 certification with comprehensive practice exams</p>
                        <span class="tool-status status-available external-link">Start Exam</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./TSSA_G3_Exam_SimulatorV3.html', '_blank')">
                        <div class="tool-icon">üî•</div>
                        <h3>TSSA G3 Practice Exam</h3>
                        <p>Prepare for your Gas Technician 3 certification with realistic practice tests</p>
                        <span class="tool-status status-available external-link">Start Exam</span>
                    </div>
                    <div class="tool-card" onclick="showCSAChapterQuestions()">
                        <div class="tool-icon">üìö</div>
                        <h3>CSA Gas Technician Chapter Questions</h3>
                        <p>Interactive study guides covering Units 1-9 with chapter-by-chapter questions</p>
                        <span class="tool-status status-available">Available Now</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üéì</div>
                        <h3>CSA Gas Technician 2 - Learning Module</h3>
                        <p>Comprehensive learning module for Gas Technician 2 certification training</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üéì</div>
                        <h3>CSA Gas Technician 3 - Learning Module</h3>
                        <p>Comprehensive learning module for Gas Technician 3 certification training</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üé•</div>
                        <h3>Video Tutorials</h3>
                        <p>Step-by-step video guides for common HVAC procedures</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                </div>

                <div class="quote">
                    "Education is the foundation of excellence in the HVAC industry" - LARK Labs
                </div>
            </div>
        </section>

        <!-- CSA CHAPTER QUESTIONS SECTION -->
        <section id="csa-chapters" class="section">
            <div class="container main-content-with-header">
                <h2 class="section-title">CSA Gas Technician Chapter Questions</h2>
                <p style="text-align: center; margin-bottom: 2rem; color: #bdc3c7;">
                    Interactive chapter-by-chapter study guides for CSA Gas Trade Training. Each unit contains comprehensive questions to help you master the material.
                </p>
                
                <div class="tools-grid">
                    <div class="tool-card" onclick="window.open('./CSA_Unit_1_Safety_Chapter_Reviews.html', '_blank')">
                        <div class="tool-icon">üõ°Ô∏è</div>
                        <h3>Unit 1 - Safety</h3>
                        <p>On-the-Job Safety, Government Acts, Hazardous Materials, Fire Safety</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_2_Chapter_Reviews.html', '_blank')">
                        <div class="tool-icon">üîß</div>
                        <h3>Unit 2 - Tools & Equipment</h3>
                        <p>Fasteners, Hand Tools, Power Tools, Measuring & Testing Instruments</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_3_Chapter_Reviews.html', '_blank')">
                        <div class="tool-icon">‚õΩ</div>
                        <h3>Unit 3 - Gas Properties</h3>
                        <p>Fuel Gas Properties, Combustion, Gas Hazards & Safe Handling</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_4_&_4a_Chapter_Reviews.html', '_blank')">
                        <div class="tool-icon">üìã</div>
                        <h3>Unit 4 & 4a - Codes</h3>
                        <p>Utilization Codes, Acts, Regulations & Ontario Supplement</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_5_Basic_Electricity_Chapter_Reviews.html', '_blank')">
                        <div class="tool-icon">‚ö°</div>
                        <h3>Unit 5 - Basic Electricity</h3>
                        <p>Electrical Safety, Theory, Circuits, Magnetism, AC/DC & Instruments</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_6_Technical_Drawing_Manuals_Graphs_Reviews.html', '_blank')">
                        <div class="tool-icon">üìê</div>
                        <h3>Unit 6 - Technical Drawings, Manuals and Graphs</h3>
                        <p>Technical Drawings, Reference Manuals, Charts & Graph Interpretation</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_7_Customer_Relations_Chapter_Reviews.html', '_blank')">
                        <div class="tool-icon">ü§ù</div>
                        <h3>Unit 7 - Customer Relations</h3>
                        <p>Professional Communication, Customer Service & Workplace Relations</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_8_Intro_to_Piping_Reviews.html', '_blank')">
                        <div class="tool-icon">üî©</div>
                        <h3>Unit 8 - Intro to Gas Piping Systems</h3>
                        <p>Gas Piping Materials, Installation Methods & System Components</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                    <div class="tool-card" onclick="window.open('./CSA_Unit_9_Intro_to_Gas_Appliances_Reviews.html', '_blank')">
                        <div class="tool-icon">üî•</div>
                        <h3>Unit 9 - Intro to Gas Appliances</h3>
                        <p>Gas Appliance Types, Components, Operation & Safety Features</p>
                        <span class="tool-status status-available external-link">Study Now</span>
                    </div>
                </div>

                <div class="quote">
                    "Each unit builds upon the previous knowledge - master each chapter to ensure comprehensive understanding" - LARK Labs
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <button class="cta-button" onclick="showSection('training')">‚Üê Back to Training</button>
                </div>
            </div>
        </section>

        <!-- COMMUNITY SECTION -->
        <section id="community" class="section">
            <div class="container main-content-with-header">
                <h2 class="section-title">HVAC Community Hub</h2>
                <p style="text-align: center; margin-bottom: 2rem; color: #bdc3c7;">
                    Connect with fellow HVAC professionals, students, and educators. Share knowledge, ask questions, and build your network.
                </p>

                <!-- Community Navigation -->
                <div class="community-nav">
                    <div class="community-nav-item active" onclick="showCommunitySection('discussions')">
                        üí¨ Discussions
                    </div>
                    <div class="community-nav-item" onclick="showCommunitySection('directory')">
                        üë• User Directory
                    </div>
                    <div class="community-nav-item" onclick="showCommunitySection('chat')">
                        üó®Ô∏è Live Chat
                    </div>
                </div>

                <!-- DISCUSSIONS SECTION -->
                <div id="community-discussions" class="community-section active">
                    <div class="thread-container">
                        <h3 style="color: #3498db; margin-bottom: 1.5rem; font-size: 1.4rem;">Discussion Threads</h3>
                        
                        <!-- New Thread Form -->
                        <div class="new-thread-form">
                            <h4 style="color: #3498db; margin-bottom: 1rem;">Start a New Discussion</h4>
                            <div class="thread-input-group">
                                <label>Thread Title</label>
                                <input type="text" id="threadTitle" class="thread-title-input" placeholder="Enter a descriptive title for your discussion...">
                            </div>
                            <div class="thread-input-group" style="display: flex; gap: 1rem; align-items: center;">
                                <div>
                                    <label>Category</label>
                                    <select id="threadCategory" class="thread-category-select">
                                        <option value="general">General Discussion</option>
                                        <option value="troubleshooting">Troubleshooting</option>
                                        <option value="education">Education & Training</option>
                                        <option value="codes">Codes & Regulations</option>
                                        <option value="equipment">Equipment & Tools</option>
                                        <option value="career">Career Advice</option>
                                    </select>
                                </div>
                            </div>
                            <div class="thread-input-group">
                                <label>Content</label>
                                <textarea id="threadContent" class="thread-content-input" placeholder="Share your thoughts, ask questions, or start a discussion..."></textarea>
                            </div>
                            <button class="cta-button" onclick="createThread()" style="margin-top: 1rem;">
                                üöÄ Start Discussion
                            </button>
                        </div>

                        <!-- Filters -->
                        <div class="community-filters">
                            <input type="text" class="filter-search" placeholder="üîç Search discussions..." id="threadSearch">
                            <div class="filter-category active" data-category="all">All</div>
                            <div class="filter-category" data-category="general">General</div>
                            <div class="filter-category" data-category="troubleshooting">Troubleshooting</div>
                            <div class="filter-category" data-category="education">Education</div>
                            <div class="filter-category" data-category="codes">Codes</div>
                        </div>

                        <!-- Thread List -->
                        <div id="threadList">
                            <div class="thread-item" data-category="troubleshooting">
                                <div class="thread-header">
                                    <div>
                                        <div class="thread-title">Heat pump not heating efficiently in cold weather</div>
                                        <div class="thread-meta">
                                            <span class="thread-author">Mike R. (G2 Certified)</span>
                                            <span class="thread-time">2 hours ago</span>
                                            <span class="thread-category">Troubleshooting</span>
                                        </div>
                                    </div>
                                    <div class="thread-stats">
                                        <span>üí¨ 8 replies</span>
                                        <span>üëÅÔ∏è 45 views</span>
                                    </div>
                                </div>
                                <div class="thread-preview">
                                    I have a client with a heat pump that's struggling to maintain temperature when it gets below -10¬∞C. The backup electric heat is kicking in too often. Has anyone dealt with similar issues? Looking for troubleshooting steps...
                                </div>
                            </div>

                            <div class="thread-item" data-category="education">
                                <div class="thread-header">
                                    <div>
                                        <div class="thread-title">Best resources for studying CSA B149.1?</div>
                                        <div class="thread-meta">
                                            <span class="thread-author">Sarah K. (Student)</span>
                                            <span class="thread-time">5 hours ago</span>
                                            <span class="thread-category">Education</span>
                                        </div>
                                    </div>
                                    <div class="thread-stats">
                                        <span>üí¨ 12 replies</span>
                                        <span>üëÅÔ∏è 78 views</span>
                                    </div>
                                </div>
                                <div class="thread-preview">
                                    I'm preparing for my G2 exam and finding the gas code challenging. What study methods worked best for you? Are there any specific sections I should focus on more than others?
                                </div>
                            </div>

                            <div class="thread-item" data-category="codes">
                                <div class="thread-header">
                                    <div>
                                        <div class="thread-title">2024 Code Updates - What's Changed?</div>
                                        <div class="thread-meta">
                                            <span class="thread-author">Tom W. (Inspector)</span>
                                            <span class="thread-time">1 day ago</span>
                                            <span class="thread-category">Codes</span>
                                        </div>
                                    </div>
                                    <div class="thread-stats">
                                        <span>üí¨ 15 replies</span>
                                        <span>üëÅÔ∏è 156 views</span>
                                    </div>
                                </div>
                                <div class="thread-preview">
                                    Let's discuss the major updates in the 2024 gas codes. I've compiled a list of key changes that affect field work. What changes have you noticed impacting your daily operations?
                                </div>
                            </div>

                            <div class="thread-item" data-category="equipment">
                                <div class="thread-header">
                                    <div>
                                        <div class="thread-title">Recommendations for digital manifold gauges</div>
                                        <div class="thread-meta">
                                            <span class="thread-author">Alex P. (Technician)</span>
                                            <span class="thread-time">2 days ago</span>
                                            <span class="thread-category">Equipment</span>
                                        </div>
                                    </div>
                                    <div class="thread-stats">
                                        <span>üí¨ 6 replies</span>
                                        <span>üëÅÔ∏è 89 views</span>
                                    </div>
                                </div>
                                <div class="thread-preview">
                                    Looking to upgrade from analog gauges to digital. What brands and models do you recommend? Main priorities are accuracy, durability, and ease of use in the field.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- USER DIRECTORY SECTION -->
                <div id="community-directory" class="community-section">
                    <div class="thread-container">
                        <h3 style="color: #3498db; margin-bottom: 1.5rem; font-size: 1.4rem;">HVAC Professional Directory</h3>
                        <p style="color: #bdc3c7; margin-bottom: 2rem;">Connect with fellow professionals in your area or specialization. Build your network and share knowledge.</p>
                        
                        <div class="community-filters">
                            <input type="text" class="filter-search" placeholder="üîç Search by name, location, or specialization..." id="userSearch">
                            <div class="filter-category active" data-filter="all">All Users</div>
                            <div class="filter-category" data-filter="certified">Certified</div>
                            <div class="filter-category" data-filter="instructors">Instructors</div>
                            <div class="filter-category" data-filter="students">Students</div>
                        </div>

                        <div class="user-directory">
                            <div class="user-card" data-type="certified instructor">
                                <div class="user-avatar">MR</div>
                                <div class="user-name">Mike Rodriguez</div>
                                <div class="user-title">Senior HVAC Technician & Instructor</div>
                                <div class="user-location">üìç Toronto, ON</div>
                                <div class="user-badges">
                                    <span class="user-badge certified">G2 Certified</span>
                                    <span class="user-badge expert">20+ Years</span>
                                </div>
                                <button class="connect-button" onclick="connectWithUser('Mike Rodriguez')">
                                    ü§ù Connect
                                </button>
                            </div>

                            <div class="user-card" data-type="student">
                                <div class="user-avatar">SK</div>
                                <div class="user-name">Sarah Kim</div>
                                <div class="user-title">HVAC Student</div>
                                <div class="user-location">üìç Vancouver, BC</div>
                                <div class="user-badges">
                                    <span class="user-badge">2nd Year Student</span>
                                </div>
                                <button class="connect-button" onclick="connectWithUser('Sarah Kim')">
                                    ü§ù Connect
                                </button>
                            </div>

                            <div class="user-card" data-type="certified">
                                <div class="user-avatar">TW</div>
                                <div class="user-name">Tom Wilson</div>
                                <div class="user-title">Gas Inspector</div>
                                <div class="user-location">üìç Calgary, AB</div>
                                <div class="user-badges">
                                    <span class="user-badge certified">G3 Certified</span>
                                    <span class="user-badge expert">Inspector</span>
                                </div>
                                <button class="connect-button" onclick="connectWithUser('Tom Wilson')">
                                    ü§ù Connect
                                </button>
                            </div>

                            <div class="user-card" data-type="certified">
                                <div class="user-avatar">LP</div>
                                <div class="user-name">Lisa Park</div>
                                <div class="user-title">Refrigeration Specialist</div>
                                <div class="user-location">üìç Montreal, QC</div>
                                <div class="user-badges">
                                    <span class="user-badge certified">G2 Certified</span>
                                    <span class="user-badge">Refrigeration</span>
                                </div>
                                <button class="connect-button" onclick="connectWithUser('Lisa Park')">
                                    ü§ù Connect
                                </button>
                            </div>

                            <div class="user-card" data-type="instructor">
                                <div class="user-avatar">DJ</div>
                                <div class="user-name">David Johnson</div>
                                <div class="user-title">College Program Coordinator</div>
                                <div class="user-location">üìç London, ON</div>
                                <div class="user-badges">
                                    <span class="user-badge expert">Educator</span>
                                    <span class="user-badge certified">G2 & G3</span>
                                </div>
                                <button class="connect-button" onclick="connectWithUser('David Johnson')">
                                    ü§ù Connect
                                </button>
                            </div>

                            <div class="user-card" data-type="student">
                                <div class="user-avatar">AR</div>
                                <div class="user-name">Alex Rivera</div>
                                <div class="user-title">Apprentice Technician</div>
                                <div class="user-location">üìç Ottawa, ON</div>
                                <div class="user-badges">
                                    <span class="user-badge">1st Year</span>
                                </div>
                                <button class="connect-button" onclick="connectWithUser('Alex Rivera')">
                                    ü§ù Connect
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LIVE CHAT SECTION -->
                <div id="community-chat" class="community-section">
                    <div class="chat-container">
                        <h3 style="color: #3498db; margin-bottom: 1.5rem; font-size: 1.4rem;">Live Community Chat</h3>
                        <p style="color: #bdc3c7; margin-bottom: 2rem;">Real-time discussions with the HVAC community. Get quick answers and share insights.</p>
                        
                        <div class="chat-input-area">
                            <textarea id="chatInput" class="chat-input" placeholder="Ask a question or share your knowledge with the HVAC community..."></textarea>
                            <button class="cta-button" onclick="postMessage()">üí¨ Post Message</button>
                        </div>

                        <div class="chat-messages" id="chatMessages">
                            <div class="chat-message">
                                <div class="message-header">
                                    <div class="message-author-info">
                                        <span class="message-author">Mike T.</span>
                                        <span class="message-author-badge">G2 Certified</span>
                                    </div>
                                    <span class="message-time">2 hours ago</span>
                                </div>
                                <div class="message-content">
                                    Just passed my G2 exam using the practice simulator here! The questions were very similar to the real exam. Thanks LARK Labs! üéâ
                                </div>
                                <div class="message-actions">
                                    <button class="like-button" onclick="toggleLike(this)">üëç Like (3)</button>
                                    <button class="reply-button" onclick="showReplyBox(this)">üí¨ Reply</button>
                                </div>
                                <div class="reply">
                                    <div class="message-header">
                                        <div class="message-author-info">
                                            <span class="message-author">Sarah K.</span>
                                            <span class="message-author-badge">Instructor</span>
                                        </div>
                                        <span class="message-time">1 hour ago</span>
                                    </div>
                                    <div class="message-content">
                                        Congratulations Mike! That's exactly why we built these tools. Keep up the great work! üëç
                                    </div>
                                </div>
                            </div>

                            <div class="chat-message">
                                <div class="message-header">
                                    <div class="message-author-info">
                                        <span class="message-author">Alex R.</span>
                                        <span class="message-author-badge">Student</span>
                                    </div>
                                    <span class="message-time">4 hours ago</span>
                                </div>
                                <div class="message-content">
                                    Can someone explain the difference between superheat and subcooling? I'm studying for my G2 and getting confused. ü§î
                                </div>
                                <div class="message-actions">
                                    <button class="like-button" onclick="toggleLike(this)">üëç Like (1)</button>
                                    <button class="reply-button" onclick="showReplyBox(this)">üí¨ Reply</button>
                                </div>
                                <div class="reply">
                                    <div class="message-header">
                                        <div class="message-author-info">
                                            <span class="message-author">Tom W.</span>
                                            <span class="message-author-badge">Expert</span>
                                        </div>
                                        <span class="message-time">3 hours ago</span>
                                    </div>
                                    <div class="message-content">
                                        Superheat is how much hotter the refrigerant vapor is above its saturation temperature. Subcooling is how much cooler the liquid refrigerant is below its saturation temperature. Both are crucial for proper system operation! üå°Ô∏è
                                    </div>
                                </div>
                            </div>

                            <div class="chat-message">
                                <div class="message-header">
                                    <div class="message-author-info">
                                        <span class="message-author">Lisa M.</span>
                                        <span class="message-author-badge">Technician</span>
                                    </div>
                                    <span class="message-time">6 hours ago</span>
                                </div>
                                <div class="message-content">
                                    Quick tip: When sizing ductwork, always account for fittings and transitions. They add significant pressure drop that many people forget about. üå™Ô∏è
                                </div>
                                <div class="message-actions">
                                    <button class="like-button" onclick="toggleLike(this)">üëç Like (7)</button>
                                    <button class="reply-button" onclick="showReplyBox(this)">üí¨ Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- RESOURCES SECTION -->
        <section id="resources" class="section">
            <div class="container main-content-with-header">
                <h2 class="section-title">Codes & Resources</h2>
                
                <div class="tools-grid">
                    <div class="tool-card" onclick="window.open('https://codecompass-api.vercel.app/', '_blank')">
                        <div class="tool-icon">üìã</div>
                        <h3>Code Compass - Gas Codes</h3>
                        <p>Search through gas codes and regulations quickly and efficiently</p>
                        <span class="tool-status status-available external-link">Access Now</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üìñ</div>
                        <h3>CSA B149.1 Reference</h3>
                        <p>Natural gas and propane installation code quick reference guide</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">‚öñÔ∏è</div>
                        <h3>TSSA Regulations</h3>
                        <p>Technical Standards and Safety Authority regulations and updates</p>
                        <span class="tool-status status-coming-soon">Coming Soon</span>
                    </div>
                </div>

                <div class="quote">
                    "Knowledge of codes and regulations is essential for safe, professional HVAC work" - LARK Labs
                </div>
            </div>
        </section>

        <!-- ABOUT SECTION -->
        <section id="about" class="section">
            <div class="container main-content-with-header">
                <h2 class="section-title">About LARK Labs</h2>
                
                <div class="about-content">
                    <p><strong>LARK Labs</strong> was founded with a mission to bridge the gap between traditional HVAC education and the digital age. With 20 years of field experience and 10 years of teaching experience, including serving as Program Coordinator at Fanshawe College, we understand the real-world challenges faced by HVAC professionals.</p>

                    <div class="quote">
                        "Technology should serve people, not the other way around" - LARK Labs Philosophy
                    </div>

                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="icon">üéì</div>
                            <h4>Educational Excellence</h4>
                            <p>Tools designed by educators for real learning outcomes</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon">üîß</div>
                            <h4>Field Experience</h4>
                            <p>Solutions grounded in 20+ years of hands-on HVAC work</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon">üíª</div>
                            <h4>Modern Technology</h4>
                            <p>Cutting-edge tools that work seamlessly on any device</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon">üåü</div>
                            <h4>Community First</h4>
                            <p>Free tools that serve the HVAC professional community</p>
                        </div>
                    </div>

                    <h3>Who We Serve</h3>
                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="icon">üéì</div>
                            <h4>Students</h4>
                            <p>Aspiring HVAC professionals seeking comprehensive learning resources</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon">üë®‚Äçüè´</div>
                            <h4>Educators</h4>
                            <p>Teachers and trainers looking for innovative instructional tools</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon">üîß</div>
                            <h4>Technicians</h4>
                            <p>Working professionals who need reliable tools for daily operations</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon">üëî</div>
                            <h4>Business Owners</h4>
                            <p>HVAC companies seeking to improve efficiency and employee development</p>
                        </div>
                    </div>

                    <p>At LARK Labs, we're not just developing software ‚Äì we're cultivating the future of the HVAC industry. Through innovative technology, comprehensive education, and unwavering commitment to excellence, we're helping to ensure that the next generation of HVAC professionals is better equipped and better prepared.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- HVAC CALCULATOR MODAL -->
    <div id="calculatorModal" class="calculator-modal">
        <button class="close-calculator" onclick="hideCalculator()">‚úï Close Calculator</button>
        <div class="calculator-content">
            <div class="calc-container">
                <div class="calc-header">
                    <h1>üè† Canadian HVAC Load Calculator</h1>
                    <p>Professional heating and cooling load calculations for Canadian climates</p>
                </div>

                <div class="calc-main-content">
                    <div class="calc-input-section">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 class="calc-section-title" style="margin-bottom: 0;">Building Information</h2>
                            <button class="calc-unit-toggle" onclick="toggleUnits()">
                                üìè Switch to <span id="unit-display">Imperial</span>
                            </button>
                        </div>
                        
                        <div class="calc-form-group">
                            <label for="province">Province/Territory <span class="calc-tooltip" data-tooltip="Climate data varies significantly across Canada">‚ÑπÔ∏è</span></label>
                            <select id="province">
                                <option value="">Select Province/Territory</option>
                                <option value="BC">British Columbia</option>
                                <option value="AB">Alberta</option>
                                <option value="SK">Saskatchewan</option>
                                <option value="MB">Manitoba</option>
                                <option value="ON" selected>Ontario</option>
                                <option value="QC">Quebec</option>
                                <option value="NB">New Brunswick</option>
                                <option value="NS">Nova Scotia</option>
                                <option value="PE">Prince Edward Island</option>
                                <option value="NL">Newfoundland and Labrador</option>
                                <option value="YT">Yukon</option>
                                <option value="NT">Northwest Territories</option>
                                <option value="NU">Nunavut</option>
                            </select>
                        </div>

                        <div class="calc-form-group">
                            <label for="area">Floor Area <span id="area-unit">(ft¬≤)</span> <span class="calc-tooltip" data-tooltip="Total conditioned floor area">‚ÑπÔ∏è</span></label>
                            <input type="number" id="area" placeholder="e.g., 1600" min="1">
                        </div>

                        <div class="calc-form-group">
                            <label for="ceiling-height">Ceiling Height <span id="height-unit">(ft)</span></label>
                            <input type="number" id="ceiling-height" placeholder="e.g., 8" min="6" max="16" step="0.1" value="8">
                        </div>

                        <div class="calc-form-group">
                            <label for="insulation">Insulation Level</label>
                            <select id="insulation">
                                <option value="poor">Poor (R-8 walls, R-20 attic)</option>
                                <option value="average" selected>Average (R-12 walls, R-30 attic)</option>
                                <option value="good">Good (R-20 walls, R-40 attic)</option>
                                <option value="excellent">Excellent (R-24+ walls, R-50+ attic)</option>
                            </select>
                        </div>

                        <div class="calc-form-group">
                            <label for="windows">Window Area <span id="window-unit">(ft¬≤)</span> <span class="calc-tooltip" data-tooltip="Total area of all windows and doors with glass">‚ÑπÔ∏è</span></label>
                            <input type="number" id="windows" placeholder="e.g., 270" min="0">
                        </div>

                        <div class="calc-form-group">
                            <label for="window-type">Window Type</label>
                            <select id="window-type">
                                <option value="single">Single Pane</option>
                                <option value="double" selected>Double Pane</option>
                                <option value="triple">Triple Pane</option>
                                <option value="low-e">Low-E Double Pane</option>
                                <option value="low-e-triple">Low-E Triple Pane</option>
                            </select>
                        </div>

                        <div class="calc-form-group">
                            <label for="occupants">Number of Occupants</label>
                            <input type="number" id="occupants" placeholder="e.g., 4" min="1" value="4">
                        </div>

                        <div class="calc-form-group">
                            <label for="building-age">Building Age</label>
                            <select id="building-age">
                                <option value="new">New (2010+)</option>
                                <option value="recent">Recent (1990-2009)</option>
                                <option value="older" selected>Older (1970-1989)</option>
                                <option value="old">Old (Pre-1970)</option>
                            </select>
                        </div>

                        <button class="calc-calculate-btn" onclick="calculateLoads()">
                            üî•‚ùÑÔ∏è Calculate Heating & Cooling Loads
                        </button>
                    </div>

                    <div class="calc-results-section">
                        <h2 class="calc-section-title">Calculation Results</h2>
                        <div id="results">
                            <p style="text-align: center; color: #7f8c8d; margin-top: 50px; font-size: 1.1em;">
                                Enter building details and click calculate to see your heating and cooling load requirements.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="calc-footer">
                    <div class="calc-footer-content">
                        <span>Created by</span>
                        <div class="calc-lark-logo">üê¶ Lark Labs</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SUPERHEAT & SUBCOOLING CALCULATOR MODAL -->
    <div id="superheatModal" class="superheat-modal">
        <button class="close-calculator" onclick="hideSuperheatCalculator()">‚úï Close Calculator</button>
        <div class="calculator-content">
            <div class="container">
                <h1>üîß HVAC Super-Heat & Sub-Cooling Calculator</h1>
                
                <div class="calculator-grid">
                    <!-- Super-Heat Calculator -->
                    <div class="calc-section">
                        <h2>üå°Ô∏è Super-Heat Calculator</h2>
                        
                        <div class="input-group">
                            <label for="sh-refrigerant">Refrigerant Type:</label>
                            <select id="sh-refrigerant">
                                <option value="">Select Refrigerant</option>
                                <optgroup label="Traditional Refrigerants">
                                    <option value="R22">R-22 (HCFC)</option>
                                    <option value="R134a">R-134a (HFC)</option>
                                    <option value="R404A">R-404A (HFC)</option>
                                    <option value="R407C">R-407C (HFC)</option>
                                    <option value="R410A">R-410A (HFC)</option>
                                </optgroup>
                                <optgroup label="A2L Low-GWP Refrigerants">
                                    <option value="R32">R-32 (HFC - A2L)</option>
                                    <option value="R454B">R-454B (HFO Blend - A2L)</option>
                                    <option value="R454C">R-454C (HFO Blend - A2L)</option>
                                    <option value="R455A">R-455A (HFO Blend - A2L)</option>
                                    <option value="R452B">R-452B (HFO Blend - A2L)</option>
                                    <option value="R466A">R-466A (HFO Blend - A2L)</option>
                                </optgroup>
                                <optgroup label="Natural Refrigerants">
                                    <option value="R290">R-290 (Propane - A3)</option>
                                    <option value="R600a">R-600a (Isobutane - A3)</option>
                                    <option value="R744">R-744 (CO2 - A1)</option>
                                </optgroup>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="suction-pressure">Suction Pressure (PSIG):</label>
                            <input type="number" id="suction-pressure" placeholder="Enter suction pressure">
                        </div>

                        <div class="input-group">
                            <label for="suction-temp">Suction Line Temperature (¬∞F):</label>
                            <input type="number" id="suction-temp" placeholder="Enter suction line temp">
                        </div>

                        <button class="reset-btn" onclick="calculateSuperheat()">Calculate Super-Heat</button>
                        <button class="reset-btn" onclick="resetSuperheat()">Reset</button>

                        <div id="superheat-result" class="result">
                            Enter values to calculate super-heat
                        </div>
                    </div>

                    <!-- Sub-Cooling Calculator -->
                    <div class="calc-section">
                        <h2>‚ùÑÔ∏è Sub-Cooling Calculator</h2>
                        
                        <div class="input-group">
                            <label for="sc-refrigerant">Refrigerant Type:</label>
                            <select id="sc-refrigerant">
                                <option value="">Select Refrigerant</option>
                                <optgroup label="Traditional Refrigerants">
                                    <option value="R22">R-22 (HCFC)</option>
                                    <option value="R134a">R-134a (HFC)</option>
                                    <option value="R404A">R-404A (HFC)</option>
                                    <option value="R407C">R-407C (HFC)</option>
                                    <option value="R410A">R-410A (HFC)</option>
                                </optgroup>
                                <optgroup label="A2L Low-GWP Refrigerants">
                                    <option value="R32">R-32 (HFC - A2L)</option>
                                    <option value="R454B">R-454B (HFO Blend - A2L)</option>
                                    <option value="R454C">R-454C (HFO Blend - A2L)</option>
                                    <option value="R455A">R-455A (HFO Blend - A2L)</option>
                                    <option value="R452B">R-452B (HFO Blend - A2L)</option>
                                    <option value="R466A">R-466A (HFO Blend - A2L)</option>
                                </optgroup>
                                <optgroup label="Natural Refrigerants">
                                    <option value="R290">R-290 (Propane - A3)</option>
                                    <option value="R600a">R-600a (Isobutane - A3)</option>
                                    <option value="R744">R-744 (CO2 - A1)</option>
                                </optgroup>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="discharge-pressure">Discharge Pressure (PSIG):</label>
                            <input type="number" id="discharge-pressure" placeholder="Enter discharge pressure">
                        </div>

                        <div class="input-group">
                            <label for="liquid-temp">Liquid Line Temperature (¬∞F):</label>
                            <input type="number" id="liquid-temp" placeholder="Enter liquid line temp">
                        </div>

                        <button class="reset-btn" onclick="calculateSubcooling()">Calculate Sub-Cooling</button>
                        <button class="reset-btn" onclick="resetSubcooling()">Reset</button>

                        <div id="subcooling-result" class="result">
                            Enter values to calculate sub-cooling
                        </div>
                    </div>
                </div>

                <!-- Refrigerant Information Display -->
                <div id="refrigerant-info" class="refrigerant-info" style="display: none;">
                    <h3>Refrigerant Information</h3>
                    <div id="refrigerant-details"></div>
                </div>

                <!-- Quick Reference -->
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Typical Super-Heat Ranges</h3>
                        <p><strong>Residential AC:</strong> 8-12¬∞F</p>
                        <p><strong>Heat Pumps:</strong> 5-15¬∞F</p>
                        <p><strong>Commercial:</strong> 10-20¬∞F</p>
                        <p><strong>Low Temp:</strong> 20-30¬∞F</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>Typical Sub-Cooling Ranges</h3>
                        <p><strong>Residential AC:</strong> 8-12¬∞F</p>
                        <p><strong>Heat Pumps:</strong> 5-15¬∞F</p>
                        <p><strong>Commercial:</strong> 10-20¬∞F</p>
                        <p><strong>TXV Systems:</strong> 10-15¬∞F</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>A2L Safety Notes</h3>
                        <p>‚ö†Ô∏è Mildly flammable</p>
                        <p>üîß Special tools required</p>
                        <p>üìã Additional training needed</p>
                        <p>üõ°Ô∏è Enhanced safety protocols</p>
                    </div>
                </div>

                <!-- Footer -->
                <footer style="text-align: center; margin-top: 40px; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; border-top: 1px solid rgba(255, 255, 255, 0.2);">
                    <p style="margin: 0; color: #e0e0e0; font-size: 16px;">Created By <strong style="color: #4ecdc4;">LARK Labs</strong></p>
                </footer>
            </div>
        </div>
    </div>

    <!-- P-T CHART MODAL -->
    <div id="ptChartModal" class="pt-chart-modal">
        <button class="close-calculator" onclick="hidePTChartModal()">‚úï Close P-T Charts</button>
        <div class="calculator-content">
            <div class="container">
                <div class="pt-chart-header">
                    <h1>üå°Ô∏è Refrigeration P-T Chart Generator</h1>
                    <p>Interactive Pressure-Temperature charts for refrigeration analysis</p>
                </div>

                <div class="pt-controls">
                    <div class="pt-control-group">
                        <label for="pt-refrigerant">Refrigerant Type:</label>
                        <select id="pt-refrigerant">
                            <optgroup label="Traditional HFCs/HCFCs">
                                <option value="R22">R-22 (HCFC-22)</option>
                                <option value="R134a">R-134a (HFC-134a)</option>
                                <option value="R410A">R-410A (HFC-410A)</option>
                                <option value="R407C">R-407C (HFC-407C)</option>
                                <option value="R404A">R-404A (HFC-404A)</option>
                            </optgroup>
                            <optgroup label="A2L Refrigerants (Mildly Flammable)">
                                <option value="R32">R-32 (HFC-32) üî•</option>
                                <option value="R454B">R-454B (HFO Blend) üî•</option>
                                <option value="R452A">R-452A (HFC/HFO Blend) üî•</option>
                                <option value="R454A">R-454A (HFO Blend) üî•</option>
                                <option value="R1234yf">R-1234yf (HFO-1234yf) üî•</option>
                                <option value="R1234ze">R-1234ze (HFO-1234ze) üî•</option>
                            </optgroup>
                            <optgroup label="Natural Refrigerants">
                                <option value="R290">R-290 (Propane) üî•</option>
                                <option value="R600a">R-600a (Isobutane) üî•</option>
                                <option value="R717">R-717 (Ammonia) ‚ö†Ô∏è</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="pt-control-group">
                        <label for="pt-tempMin">Min Temperature (¬∞C):</label>
                        <input type="number" id="pt-tempMin" value="-40" step="5">
                    </div>

                    <div class="pt-control-group">
                        <label for="pt-tempMax">Max Temperature (¬∞C):</label>
                        <input type="number" id="pt-tempMax" value="60" step="5">
                    </div>

                    <div class="pt-control-group">
                        <label for="pt-chartType">Chart Type:</label>
                        <select id="pt-chartType">
                            <option value="saturation">Saturation Curve</option>
                            <option value="isotherms">Isotherms</option>
                            <option value="both">Both</option>
                        </select>
                    </div>

                    <div class="pt-control-group">
                        <label>&nbsp;</label>
                        <button onclick="generatePTChart()">Generate P-T Chart</button>
                    </div>
                </div>

                <div class="pt-chart-container">
                    <canvas id="ptChart"></canvas>
                </div>

                <div class="pt-info-panel">
                    <div class="pt-info-card">
                        <h3>üìä Chart Information</h3>
                        <p id="pt-chartInfo">Select a refrigerant and generate chart to see information</p>
                    </div>

                    <div class="pt-info-card">
                        <h3>üß™ Refrigerant Properties</h3>
                        <p id="pt-refProperties">Properties will be displayed after chart generation</p>
                    </div>
                </div>

                <div class="pt-properties-table">
                    <h3>üìã Thermodynamic Properties</h3>
                    <div id="pt-propertiesTableContainer">
                        <div class="pt-loading">Generate a chart to see detailed properties</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 LARK Labs - Free HVAC Tools & Training Resources</p>
            <p>Empowering HVAC professionals with innovative technology solutions</p>
            <p>Contact: <a href="mailto:info@larklabs.dev" style="color: #3498db;">info@larklabs.dev</a></p>
        </div>
    </footer>

    <script>
        // Global unit system variable for calculator
        let isMetric = false;

        // Global variables for superheat calculator
        let refrigerantData = {};

        // Global variable for P-T chart
        let ptChart = null;

        // Canadian climate data by province (heating degree days and cooling degree days)
        const climateData = {
            'BC': { hdd: 2800, cdd: 150, winterTemp: -8, summerTemp: 28, zone: 'Marine West Coast', winterTempF: 18, summerTempF: 82 },
            'AB': { hdd: 4500, cdd: 280, winterTemp: -25, summerTemp: 26, zone: 'Continental', winterTempF: -13, summerTempF: 79 },
            'SK': { hdd: 5200, cdd: 350, winterTemp: -28, summerTemp: 25, zone: 'Continental', winterTempF: -18, summerTempF: 77 },
            'MB': { hdd: 5100, cdd: 320, winterTemp: -27, summerTemp: 26, zone: 'Continental', winterTempF: -17, summerTempF: 79 },
            'ON': { hdd: 3800, cdd: 300, winterTemp: -18, summerTemp: 28, zone: 'Continental', winterTempF: 0, summerTempF: 82 },
            'QC': { hdd: 4200, cdd: 250, winterTemp: -22, summerTemp: 26, zone: 'Continental', winterTempF: -8, summerTempF: 79 },
            'NB': { hdd: 4100, cdd: 180, winterTemp: -18, summerTemp: 24, zone: 'Maritime', winterTempF: 0, summerTempF: 75 },
            'NS': { hdd: 3600, cdd: 120, winterTemp: -12, summerTemp: 23, zone: 'Maritime', winterTempF: 10, summerTempF: 73 },
            'PE': { hdd: 3800, cdd: 150, winterTemp: -14, summerTemp: 24, zone: 'Maritime', winterTempF: 7, summerTempF: 75 },
            'NL': { hdd: 4800, cdd: 80, winterTemp: -18, summerTemp: 20, zone: 'Maritime', winterTempF: 0, summerTempF: 68 },
            'YT': { hdd: 6500, cdd: 100, winterTemp: -35, summerTemp: 20, zone: 'Subarctic', winterTempF: -31, summerTempF: 68 },
            'NT': { hdd: 7200, cdd: 120, winterTemp: -35, summerTemp: 22, zone: 'Subarctic', winterTempF: -31, summerTempF: 72 },
            'NU': { hdd: 8500, cdd: 50, winterTemp: -40, summerTemp: 15, zone: 'Arctic', winterTempF: -40, summerTempF: 59 }
        };

        // Insulation R-values (Imperial and Metric)
        const insulationValues = {
            'poor': { wall: 8, ceiling: 20, floor: 12 },
            'average': { wall: 12, ceiling: 30, floor: 20 },
            'good': { wall: 20, ceiling: 40, floor: 25 },
            'excellent': { wall: 24, ceiling: 50, floor: 30 }
        };

        // Window U-values (Imperial: BTU/hr¬∑ft¬≤¬∑¬∞F, Metric: W/m¬≤¬∑K)
        const windowUValues = {
            'single': { imperial: 1.02, metric: 5.8 },
            'double': { imperial: 0.49, metric: 2.8 },
            'triple': { imperial: 0.32, metric: 1.8 },
            'low-e': { imperial: 0.35, metric: 2.0 },
            'low-e-triple': { imperial: 0.21, metric: 1.2 }
        };

        // P-T Chart refrigerant data with thermodynamic properties
        const ptRefrigerantData = {
            // Traditional HFCs/HCFCs
            R22: {
                name: "R-22 (HCFC-22)",
                criticalTemp: 96.15,
                criticalPressure: 4990,
                molecularWeight: 86.47,
                ozoneDepleting: true,
                globalWarmingPotential: 1810,
                boilingPoint: -40.8,
                safetyClass: "A1",
                flammable: false,
                // Antoine equation coefficients for vapor pressure calculation
                antoine: { A: 8.2365, B: 1253.2, C: 230.0 }
            },
            R134a: {
                name: "R-134a (HFC-134a)",
                criticalTemp: 101.06,
                criticalPressure: 4059,
                molecularWeight: 102.03,
                ozoneDepleting: false,
                globalWarmingPotential: 1430,
                boilingPoint: -26.3,
                safetyClass: "A1",
                flammable: false,
                antoine: { A: 8.0956, B: 1214.4, C: 233.86 }
            },
            R410A: {
                name: "R-410A (HFC-410A)",
                criticalTemp: 71.34,
                criticalPressure: 4901,
                molecularWeight: 72.58,
                ozoneDepleting: false,
                globalWarmingPotential: 2088,
                boilingPoint: -51.6,
                safetyClass: "A1",
                flammable: false,
                antoine: { A: 8.1764, B: 1123.1, C: 231.4 }
            },
            R407C: {
                name: "R-407C (HFC-407C)",
                criticalTemp: 86.74,
                criticalPressure: 4631,
                molecularWeight: 86.2,
                ozoneDepleting: false,
                globalWarmingPotential: 1774,
                boilingPoint: -43.6,
                safetyClass: "A1",
                flammable: false,
                antoine: { A: 8.1234, B: 1198.7, C: 229.5 }
            },
            R404A: {
                name: "R-404A (HFC-404A)",
                criticalTemp: 72.13,
                criticalPressure: 3734,
                molecularWeight: 97.6,
                ozoneDepleting: false,
                globalWarmingPotential: 3922,
                boilingPoint: -46.6,
                safetyClass: "A1",
                flammable: false,
                antoine: { A: 8.0876, B: 1157.3, C: 228.9 }
            },
            
            // A2L Refrigerants (Mildly Flammable)
            R32: {
                name: "R-32 (HFC-32)",
                criticalTemp: 78.11,
                criticalPressure: 5782,
                molecularWeight: 52.02,
                ozoneDepleting: false,
                globalWarmingPotential: 675,
                boilingPoint: -51.7,
                safetyClass: "A2L",
                flammable: true,
                flammabilityLevel: "Lower (A2L)",
                antoine: { A: 8.3487, B: 1119.2, C: 231.2 }
            },
            R454B: {
                name: "R-454B (HFO Blend)",
                criticalTemp: 95.8,
                criticalPressure: 4730,
                molecularWeight: 68.4,
                ozoneDepleting: false,
                globalWarmingPotential: 466,
                boilingPoint: -46.1,
                safetyClass: "A2L",
                flammable: true,
                flammabilityLevel: "Lower (A2L)",
                antoine: { A: 8.1987, B: 1198.4, C: 232.1 }
            },
            R452A: {
                name: "R-452A (HFC/HFO Blend)",
                criticalTemp: 83.6,
                criticalPressure: 4520,
                molecularWeight: 69.5,
                ozoneDepleting: false,
                globalWarmingPotential: 2140,
                boilingPoint: -49.2,
                safetyClass: "A2L",
                flammable: true,
                flammabilityLevel: "Lower (A2L)",
                antoine: { A: 8.2145, B: 1156.8, C: 230.5 }
            },
            R454A: {
                name: "R-454A (HFO Blend)",
                criticalTemp: 81.2,
                criticalPressure: 4680,
                molecularWeight: 63.7,
                ozoneDepleting: false,
                globalWarmingPotential: 238,
                boilingPoint: -49.8,
                safetyClass: "A2L",
                flammable: true,
                flammabilityLevel: "Lower (A2L)",
                antoine: { A: 8.2987, B: 1134.5, C: 229.8 }
            },
            R1234yf: {
                name: "R-1234yf (HFO-1234yf)",
                criticalTemp: 94.7,
                criticalPressure: 3382,
                molecularWeight: 114.04,
                ozoneDepleting: false,
                globalWarmingPotential: 4,
                boilingPoint: -29.5,
                safetyClass: "A2L",
                flammable: true,
                flammabilityLevel: "Lower (A2L)",
                antoine: { A: 8.0876, B: 1182.5, C: 235.2 }
            },
            R1234ze: {
                name: "R-1234ze (HFO-1234ze)",
                criticalTemp: 109.4,
                criticalPressure: 3636,
                molecularWeight: 114.04,
                ozoneDepleting: false,
                globalWarmingPotential: 7,
                boilingPoint: -19.0,
                safetyClass: "A2L",
                flammable: true,
                flammabilityLevel: "Lower (A2L)",
                antoine: { A: 7.9876, B: 1267.3, C: 238.4 }
            },

            // Natural Refrigerants
            R290: {
                name: "R-290 (Propane)",
                criticalTemp: 96.74,
                criticalPressure: 4251,
                molecularWeight: 44.1,
                ozoneDepleting: false,
                globalWarmingPotential: 3,
                boilingPoint: -42.1,
                safetyClass: "A3",
                flammable: true,
                flammabilityLevel: "Higher (A3)",
                antoine: { A: 8.1126, B: 1050.2, C: 233.2 }
            },
            R600a: {
                name: "R-600a (Isobutane)",
                criticalTemp: 134.66,
                criticalPressure: 3629,
                molecularWeight: 58.12,
                ozoneDepleting: false,
                globalWarmingPotential: 3,
                boilingPoint: -11.7,
                safetyClass: "A3",
                flammable: true,
                flammabilityLevel: "Higher (A3)",
                antoine: { A: 8.0322, B: 1167.4, C: 239.8 }
            },
            R717: {
                name: "R-717 (Ammonia)",
                criticalTemp: 132.25,
                criticalPressure: 11333,
                molecularWeight: 17.03,
                ozoneDepleting: false,
                globalWarmingPotential: 0,
                boilingPoint: -33.3,
                safetyClass: "B2L",
                flammable: true,
                flammabilityLevel: "Lower (B2L)",
                antoine: { A: 8.9073, B: 1426.4, C: 240.2 }
            }
        };

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeRefrigerantData();
            setupEventListeners();
            initializeFilters();
        });

        // Initialize refrigerant data for superheat calculator
        function initializeRefrigerantData() {
            refrigerantData = {
                'R22': {
                    name: 'R-22 (HCFC-22)',
                    type: 'HCFC',
                    safety: 'A1',
                    gwp: 1810,
                    pressureTemp: {
                        20: 43.0, 25: 47.5, 30: 52.5, 35: 57.8, 40: 63.5, 45: 69.5, 50: 76.0,
                        55: 83.0, 60: 90.5, 65: 98.5, 70: 107.0, 75: 116.0, 80: 125.5, 85: 135.5,
                        90: 146.0, 95: 157.0, 100: 169.0, 105: 181.5, 110: 194.5, 115: 208.0,
                        120: 222.0, 125: 237.0, 130: 252.5
                    }
                },
                'R134a': {
                    name: 'R-134a (HFC-134a)',
                    type: 'HFC',
                    safety: 'A1',
                    gwp: 1430,
                    pressureTemp: {
                        20: 21.0, 25: 24.0, 30: 27.5, 35: 31.5, 40: 35.7, 45: 40.3, 50: 45.2,
                        55: 50.5, 60: 56.2, 65: 62.3, 70: 68.8, 75: 75.7, 80: 83.1, 85: 91.0,
                        90: 99.4, 95: 108.3, 100: 117.8, 105: 127.9, 110: 138.6, 115: 149.9,
                        120: 161.9, 125: 174.6, 130: 188.0
                    }
                },
                'R404A': {
                    name: 'R-404A (HFC Blend)',
                    type: 'HFC Blend',
                    safety: 'A1',
                    gwp: 3922,
                    pressureTemp: {
                        '-20': 9.5, '-15': 12.0, '-10': 15.0, '-5': 18.5, 0: 22.5, 5: 27.0, 10: 32.0,
                        15: 37.5, 20: 43.5, 25: 50.0, 30: 57.0, 35: 64.5, 40: 72.8, 45: 81.5,
                        50: 91.0, 55: 101.0, 60: 112.0, 65: 123.5, 70: 136.0, 75: 149.0,
                        80: 163.0, 85: 177.5, 90: 193.0
                    }
                },
                'R407C': {
                    name: 'R-407C (HFC Blend)',
                    type: 'HFC Blend',
                    safety: 'A1',
                    gwp: 1774,
                    pressureTemp: {
                        20: 42.0, 25: 46.5, 30: 51.5, 35: 57.0, 40: 63.0, 45: 69.5, 50: 76.5,
                        55: 84.0, 60: 92.0, 65: 100.5, 70: 109.5, 75: 119.0, 80: 129.0, 85: 140.0,
                        90: 151.5, 95: 163.5, 100: 176.0, 105: 189.0, 110: 203.0, 115: 217.5,
                        120: 233.0, 125: 249.0, 130: 266.0
                    }
                },
                'R410A': {
                    name: 'R-410A (HFC Blend)',
                    type: 'HFC Blend',
                    safety: 'A1',
                    gwp: 2088,
                    pressureTemp: {
                        20: 71.0, 25: 78.0, 30: 85.5, 35: 93.5, 40: 102.0, 45: 111.0, 50: 120.5,
                        55: 130.5, 60: 141.0, 65: 152.0, 70: 164.0, 75: 176.5, 80: 189.5, 85: 203.0,
                        90: 217.5, 95: 232.5, 100: 248.0, 105: 264.5, 110: 281.5, 115: 299.0,
                        120: 317.5, 125: 336.5, 130: 356.0
                    }
                },
                'R32': {
                    name: 'R-32 (HFC-32)',
                    type: 'HFC',
                    safety: 'A2L',
                    gwp: 675,
                    pressureTemp: {
                        20: 78.0, 25: 86.0, 30: 94.5, 35: 103.5, 40: 113.0, 45: 123.0, 50: 133.5,
                        55: 144.5, 60: 156.0, 65: 168.0, 70: 180.5, 75: 193.5, 80: 207.0, 85: 221.0,
                        90: 235.5, 95: 250.5, 100: 266.0, 105: 282.0, 110: 298.5, 115: 315.5,
                        120: 333.0, 125: 351.0, 130: 369.5
                    }
                },
                'R454B': {
                    name: 'R-454B (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 466,
                    pressureTemp: {
                        20: 43.5, 25: 48.0, 30: 53.0, 35: 58.5, 40: 64.5, 45: 71.0, 50: 78.0,
                        55: 85.5, 60: 93.5, 65: 102.0, 70: 111.0, 75: 120.5, 80: 130.5, 85: 141.0,
                        90: 152.0, 95: 164.0, 100: 176.5, 105: 189.5, 110: 203.0, 115: 217.0,
                        120: 231.5, 125: 247.0, 130: 263.0
                    }
                },
                'R454C': {
                    name: 'R-454C (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 148,
                    pressureTemp: {
                        20: 42.8, 25: 47.2, 30: 52.2, 35: 57.6, 40: 63.5, 45: 69.8, 50: 76.6,
                        55: 84.0, 60: 91.8, 65: 100.2, 70: 109.2, 75: 118.8, 80: 129.0, 85: 139.8,
                        90: 151.2, 95: 163.2, 100: 175.8, 105: 189.0, 110: 202.8, 115: 217.2,
                        120: 232.2, 125: 247.8, 130: 264.0
                    }
                },
                'R455A': {
                    name: 'R-455A (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 148,
                    pressureTemp: {
                        20: 70.5, 25: 77.5, 30: 85.0, 35: 93.0, 40: 101.5, 45: 110.5, 50: 120.0,
                        55: 130.0, 60: 140.5, 65: 151.5, 70: 163.0, 75: 175.0, 80: 187.5, 85: 200.5,
                        90: 214.0, 95: 228.0, 100: 242.5, 105: 257.5, 110: 273.0, 115: 289.0,
                        120: 305.5, 125: 322.5, 130: 340.0
                    }
                },
                'R452B': {
                    name: 'R-452B (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 698,
                    pressureTemp: {
                        20: 70.8, 25: 77.8, 30: 85.3, 35: 93.3, 40: 101.8, 45: 110.8, 50: 120.3,
                        55: 130.3, 60: 140.8, 65: 151.8, 70: 163.3, 75: 175.3, 80: 187.8, 85: 200.8,
                        90: 214.3, 95: 228.3, 100: 242.8, 105: 257.8, 110: 273.3, 115: 289.3,
                        120: 305.8, 125: 322.8, 130: 340.3
                    }
                },
                'R466A': {
                    name: 'R-466A (HFO Blend)',
                    type: 'HFO Blend',
                    safety: 'A2L',
                    gwp: 733,
                    pressureTemp: {
                        20: 71.2, 25: 78.2, 30: 85.7, 35: 93.7, 40: 102.2, 45: 111.2, 50: 120.7,
                        55: 130.7, 60: 141.2, 65: 152.2, 70: 163.7, 75: 175.7, 80: 188.2, 85: 201.2,
                        90: 214.7, 95: 228.7, 100: 243.2, 105: 258.2, 110: 273.7, 115: 289.7,
                        120: 306.2, 125: 323.2, 130: 340.7
                    }
                },
                'R290': {
                    name: 'R-290 (Propane)',
                    type: 'Natural',
                    safety: 'A3',
                    gwp: 3,
                    pressureTemp: {
                        20: 36.0, 25: 41.0, 30: 46.5, 35: 52.5, 40: 59.0, 45: 66.0, 50: 73.5,
                        55: 81.5, 60: 90.0, 65: 99.0, 70: 108.5, 75: 118.5, 80: 129.0, 85: 140.0,
                        90: 151.5, 95: 163.5, 100: 176.0, 105: 189.0, 110: 202.5, 115: 216.5,
                        120: 231.0, 125: 246.0, 130: 261.5
                    }
                },
                'R600a': {
                    name: 'R-600a (Isobutane)',
                    type: 'Natural',
                    safety: 'A3',
                    gwp: 3,
                    pressureTemp: {
                        20: 7.5, 25: 9.0, 30: 10.8, 35: 12.8, 40: 15.0, 45: 17.5, 50: 20.3,
                        55: 23.5, 60: 27.0, 65: 30.8, 70: 35.0, 75: 39.5, 80: 44.5, 85: 49.8,
                        90: 55.5, 95: 61.5, 100: 68.0, 105: 75.0, 110: 82.5, 115: 90.5,
                        120: 99.0, 125: 108.0, 130: 117.5
                    }
                },
                'R744': {
                    name: 'R-744 (CO2)',
                    type: 'Natural',
                    safety: 'A1',
                    gwp: 1,
                    pressureTemp: {
                        '-20': 200.0, '-15': 230.0, '-10': 263.0, '-5': 300.0, 0: 340.0, 5: 383.0, 10: 430.0,
                        15: 481.0, 20: 536.0, 25: 595.0, 30: 659.0, 35: 727.0, 40: 800.0, 45: 878.0,
                        50: 962.0, 55: 1051.0, 60: 1146.0, 65: 1247.0, 70: 1354.0, 75: 1468.0,
                        80: 1589.0, 85: 1717.0, '87.7': 1800.0
                    }
                }
            };
        }

        function setupEventListeners() {
            const shRefrigerant = document.getElementById('sh-refrigerant');
            const scRefrigerant = document.getElementById('sc-refrigerant');
            const suctionPressure = document.getElementById('suction-pressure');
            const suctionTemp = document.getElementById('suction-temp');
            const dischargePressure = document.getElementById('discharge-pressure');
            const liquidTemp = document.getElementById('liquid-temp');

            if (shRefrigerant) {
                shRefrigerant.addEventListener('change', function() {
                    calculateSuperheat();
                    updateRefrigerantInfo('sh');
                });
            }

            if (scRefrigerant) {
                scRefrigerant.addEventListener('change', function() {
                    calculateSubcooling();
                    updateRefrigerantInfo('sc');
                });
            }

            if (suctionPressure) {
                suctionPressure.addEventListener('input', calculateSuperheat);
            }

            if (suctionTemp) {
                suctionTemp.addEventListener('input', calculateSuperheat);
            }

            if (dischargePressure) {
                dischargePressure.addEventListener('input', calculateSubcooling);
            }

            if (liquidTemp) {
                liquidTemp.addEventListener('input', calculateSubcooling);
            }

            // Newsletter signup
            const newsletterButton = document.querySelector('.newsletter-form button');
            if (newsletterButton) {
                newsletterButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    const email = document.querySelector('.newsletter-form input').value;
                    if (email) {
                        alert('Thank you for subscribing! You will receive updates about new tools and features.');
                        document.querySelector('.newsletter-form input').value = '';
                    } else {
                        alert('Please enter a valid email address.');
                    }
                });
            }

            // Allow posting message with Enter key
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        postMessage();
                    }
                });
            }

            // Animate tool cards on hover
            const toolCards = document.querySelectorAll('.tool-card');
            toolCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // Close calculator with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hideCalculator();
                    hideSuperheatCalculator();
                    hidePTChartModal();
                }
            });
        }

        // Navigation functionality
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update navigation
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            // Find and activate current nav link
            const currentLink = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
            if (currentLink) {
                currentLink.classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Function to show CSA Chapter Questions
        function showCSAChapterQuestions() {
            showSection('csa-chapters');
        }

        // Load Calculator Modal Functions
        function showCalculator() {
            document.getElementById('calculatorModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideCalculator() {
            document.getElementById('calculatorModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Superheat Calculator Modal Functions
        function showSuperheatCalculator() {
            document.getElementById('superheatModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideSuperheatCalculator() {
            document.getElementById('superheatModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // P-T Chart Modal Functions
        function showPTChartModal() {
            document.getElementById('ptChartModal').classList.add('active');
            // Don't hide body overflow for P-T charts to allow scrolling
            // Initialize with default chart
            setTimeout(() => {
                generatePTChart();
            }, 300);
        }

        function hidePTChartModal() {
            document.getElementById('ptChartModal').classList.remove('active');
            // Reset body overflow in case other modals changed it
            document.body.style.overflow = 'auto';
        }

        // P-T Chart Functions
        function calculateSaturationPressure(temp, antoine) {
            // Antoine equation: log10(P) = A - B/(C + T)
            // P in kPa, T in ¬∞C
            const logP = antoine.A - antoine.B / (antoine.C + temp);
            return Math.pow(10, logP);
        }

        function generateTemperatureRange(min, max, steps = 50) {
            const range = [];
            const step = (max - min) / steps;
            for (let i = 0; i <= steps; i++) {
                range.push(min + i * step);
            }
            return range;
        }

        function generatePTChart() {
            const refrigerant = document.getElementById('pt-refrigerant').value || 'R22';
            const tempMin = parseFloat(document.getElementById('pt-tempMin').value);
            const tempMax = parseFloat(document.getElementById('pt-tempMax').value);
            const chartType = document.getElementById('pt-chartType').value;

            if (tempMin >= tempMax) {
                alert('Minimum temperature must be less than maximum temperature');
                return;
            }

            const refData = ptRefrigerantData[refrigerant];
            if (!refData) {
                alert('Refrigerant data not found');
                return;
            }

            // Generate temperature range
            const temperatures = generateTemperatureRange(tempMin, tempMax, 100);
            
            // Calculate saturation pressures
            const saturationData = temperatures.map(temp => {
                if (temp >= refData.criticalTemp) return null;
                const pressure = calculateSaturationPressure(temp, refData.antoine);
                return { x: temp, y: pressure };
            }).filter(point => point !== null);

            // Prepare chart datasets
            const datasets = [];

            if (chartType === 'saturation' || chartType === 'both') {
                datasets.push({
                    label: 'Saturation Curve',
                    data: saturationData,
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 3,
                    fill: false,
                    tension: 0.4,
                    pointRadius: 0,
                    pointHoverRadius: 6
                });
            }

            if (chartType === 'isotherms' || chartType === 'both') {
                // Add isotherms (constant temperature lines)
                const isothermTemps = [-20, 0, 20, 40];
                isothermTemps.forEach((temp, index) => {
                    if (temp >= tempMin && temp <= tempMax && temp < refData.criticalTemp) {
                        const pressure = calculateSaturationPressure(temp, refData.antoine);
                        const colors = ['#3498db', '#2ecc71', '#f39c12', '#9b59b6'];
                        datasets.push({
                            label: `${temp}¬∞C Isotherm`,
                            data: [{ x: temp, y: 0 }, { x: temp, y: pressure * 1.5 }],
                            borderColor: colors[index % colors.length],
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        });
                    }
                });
            }

            // Destroy existing chart
            if (ptChart) {
                ptChart.destroy();
            }

            // Create new chart
            const ctx = document.getElementById('ptChart').getContext('2d');
            ptChart = new Chart(ctx, {
                type: 'line',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `P-T Chart for ${refData.name}`,
                            font: { size: 18, weight: 'bold' },
                            color: '#2c3e50'
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'nearest',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: T=${context.parsed.x.toFixed(1)}¬∞C, P=${context.parsed.y.toFixed(1)} kPa`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Temperature (¬∞C)',
                                font: { size: 14, weight: 'bold' }
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            type: 'logarithmic',
                            title: {
                                display: true,
                                text: 'Pressure (kPa)',
                                font: { size: 14, weight: 'bold' }
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(0);
                                }
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });

            // Update info panels
            updatePTInfoPanels(refData, tempMin, tempMax);
            generatePTPropertiesTable(refData, temperatures.filter(t => t >= tempMin && t <= tempMax && t < refData.criticalTemp));
        }

        function updatePTInfoPanels(refData, tempMin, tempMax) {
            const safetyIcon = refData.flammable ? 
                (refData.safetyClass === 'A2L' ? 'üî•' : 
                 refData.safetyClass === 'A3' ? 'üî•üî•' : 
                 refData.safetyClass === 'B2L' ? '‚ö†Ô∏èüî•' : '‚ö†Ô∏è') : '‚úÖ';

            document.getElementById('pt-chartInfo').innerHTML = `
                <strong>Refrigerant:</strong> ${refData.name} ${safetyIcon}<br>
                <strong>Temperature Range:</strong> ${tempMin}¬∞C to ${tempMax}¬∞C<br>
                <strong>Critical Temperature:</strong> ${refData.criticalTemp.toFixed(1)}¬∞C<br>
                <strong>Critical Pressure:</strong> ${refData.criticalPressure.toFixed(0)} kPa<br>
                <strong>Safety Class:</strong> ${refData.safetyClass}
            `;

            const flammabilityText = refData.flammable ? 
                `${refData.flammabilityLevel || 'Yes'}` : 'Non-flammable';

            document.getElementById('pt-refProperties').innerHTML = `
                <strong>Molecular Weight:</strong> ${refData.molecularWeight} g/mol<br>
                <strong>Boiling Point:</strong> ${refData.boilingPoint.toFixed(1)}¬∞C<br>
                <strong>GWP:</strong> ${refData.globalWarmingPotential}<br>
                <strong>ODP:</strong> ${refData.ozoneDepleting ? 'Yes' : 'No'}<br>
                <strong>Flammability:</strong> ${flammabilityText}
            `;

            // Update card styling based on refrigerant type
            const chartInfoCard = document.getElementById('pt-chartInfo').parentElement;
            const propertiesCard = document.getElementById('pt-refProperties').parentElement;
            
            // Reset classes
            chartInfoCard.className = 'pt-info-card';
            propertiesCard.className = 'pt-info-card';
            
            // Add appropriate class based on safety classification
            if (refData.safetyClass === 'A2L') {
                chartInfoCard.classList.add('a2l');
                propertiesCard.classList.add('a2l');
            } else if (refData.safetyClass === 'A3' || refData.safetyClass === 'B2L') {
                chartInfoCard.classList.add('natural');
                propertiesCard.classList.add('natural');
            }
        }

        function generatePTPropertiesTable(refData, temperatures) {
            const tableContainer = document.getElementById('pt-propertiesTableContainer');
            
            // Sample temperatures for the table
            const sampleTemps = temperatures.filter((temp, index) => index % 10 === 0).slice(0, 10);
            
            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Temperature (¬∞C)</th>
                            <th>Sat. Pressure (kPa)</th>
                            <th>Sat. Pressure (bar)</th>
                            <th>Sat. Pressure (psi)</th>
                            <th>Safety Class</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            sampleTemps.forEach(temp => {
                const pressureKPa = calculateSaturationPressure(temp, refData.antoine);
                const pressureBar = pressureKPa / 100;
                const pressurePsi = pressureKPa * 0.145038;
                const safetyIcon = refData.safetyClass === 'A2L' ? 'üî•' : 
                                  refData.safetyClass === 'A3' ? 'üî•üî•' : 
                                  refData.safetyClass === 'B2L' ? '‚ö†Ô∏èüî•' : 
                                  refData.safetyClass === 'A1' ? '‚úÖ' : '‚ö†Ô∏è';

                tableHTML += `
                    <tr>
                        <td>${temp.toFixed(1)}</td>
                        <td>${pressureKPa.toFixed(1)}</td>
                        <td>${pressureBar.toFixed(2)}</td>
                        <td>${pressurePsi.toFixed(1)}</td>
                        <td>${refData.safetyClass} ${safetyIcon}</td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            tableContainer.innerHTML = tableHTML;
        }

        // Load Calculator Functions
        function toggleUnits() {
            isMetric = !isMetric;
            const unitDisplay = document.getElementById('unit-display');
            const areaUnit = document.getElementById('area-unit');
            const heightUnit = document.getElementById('height-unit');
            const windowUnit = document.getElementById('window-unit');
            
            const areaInput = document.getElementById('area');
            const heightInput = document.getElementById('ceiling-height');
            const windowInput = document.getElementById('windows');

            if (isMetric) {
                unitDisplay.textContent = 'Imperial';
                areaUnit.textContent = '(m¬≤)';
                heightUnit.textContent = '(m)';
                windowUnit.textContent = '(m¬≤)';
                
                // Convert current values to metric
                if (areaInput.value) areaInput.value = Math.round(parseFloat(areaInput.value) * 0.092903);
                if (heightInput.value) heightInput.value = (parseFloat(heightInput.value) * 0.3048).toFixed(1);
                else heightInput.value = '2.4';
                if (windowInput.value) windowInput.value = Math.round(parseFloat(windowInput.value) * 0.092903);
                
                areaInput.placeholder = 'e.g., 150';
                heightInput.placeholder = 'e.g., 2.4';
                windowInput.placeholder = 'e.g., 25';
                
                heightInput.min = '2';
                heightInput.max = '5';
            } else {
                unitDisplay.textContent = 'Metric';
                areaUnit.textContent = '(ft¬≤)';
                heightUnit.textContent = '(ft)';
                windowUnit.textContent = '(ft¬≤)';
                
                // Convert current values to imperial
                if (areaInput.value) areaInput.value = Math.round(parseFloat(areaInput.value) / 0.092903);
                if (heightInput.value) heightInput.value = (parseFloat(heightInput.value) / 0.3048).toFixed(1);
                else heightInput.value = '8';
                if (windowInput.value) windowInput.value = Math.round(parseFloat(windowInput.value) / 0.092903);
                
                areaInput.placeholder = 'e.g., 1600';
                heightInput.placeholder = 'e.g., 8';
                windowInput.placeholder = 'e.g., 270';
                
                heightInput.min = '6';
                heightInput.max = '16';
            }
        }

        function calculateLoads() {
            // Get input values
            const province = document.getElementById('province').value;
            let area = parseFloat(document.getElementById('area').value);
            let ceilingHeight = parseFloat(document.getElementById('ceiling-height').value);
            const insulation = document.getElementById('insulation').value;
            let windowArea = parseFloat(document.getElementById('windows').value);
            const windowType = document.getElementById('window-type').value;
            const occupants = parseInt(document.getElementById('occupants').value);
            const buildingAge = document.getElementById('building-age').value;

            // Validation
            if (!province || !area || windowArea === null || !occupants) {
                alert('Please fill in all required fields.');
                return;
            }

            // Convert imperial to metric for calculations if needed
            let areaM2 = isMetric ? area : area * 0.092903;
            let heightM = isMetric ? ceilingHeight : ceilingHeight * 0.3048;
            let windowAreaM2 = isMetric ? windowArea : windowArea * 0.092903;

            const climate = climateData[province];
            const insul = insulationValues[insulation];
            const windowU = windowUValues[windowType].metric; // Always use metric for calculations
            const volume = areaM2 * heightM;

            // Calculate heat loss components
            const wallArea = Math.sqrt(areaM2) * 4 * heightM - windowAreaM2; // Approximate wall area
            const ceilingArea = areaM2;
            const floorArea = areaM2;

            // Heat loss calculations (W)
            const wallLoss = (wallArea / insul.wall) * (21 - climate.winterTemp);
            const ceilingLoss = (ceilingArea / insul.ceiling) * (21 - climate.winterTemp);
            const floorLoss = (floorArea / insul.floor) * (21 - climate.winterTemp) * 0.5; // Ground temp factor
            const windowLoss = windowAreaM2 * windowU * (21 - climate.winterTemp);
            
            // Air infiltration (assuming 0.5 ACH for average building)
            const infiltrationMultiplier = buildingAge === 'new' ? 0.3 : buildingAge === 'recent' ? 0.4 : buildingAge === 'older' ? 0.6 : 0.8;
            const infiltrationLoss = volume * infiltrationMultiplier * 1.2 * 1000 * (21 - climate.winterTemp) / 3600;

            const totalHeatLoss = wallLoss + ceilingLoss + floorLoss + windowLoss + infiltrationLoss;

            // Add safety factor and equipment sizing
            const designHeatLoad = totalHeatLoss * 1.2; // 20% safety factor
            const heatingCapacityBtu = designHeatLoad * 3.412; // Convert W to BTU/h

            // Cooling load calculations
            const coolingLoad = calculateCoolingLoad(areaM2, windowAreaM2, windowU, occupants, climate, insul);
            const coolingCapacityBtu = coolingLoad * 3.412;
            const coolingTons = coolingCapacityBtu / 12000; // Convert to tons

            // Display results
            displayResults({
                province,
                climate,
                designHeatLoad,
                heatingCapacityBtu,
                coolingLoad,
                coolingCapacityBtu,
                coolingTons,
                area: areaM2,
                areaDisplay: area,
                insulation,
                windowType
            });
        }

        function calculateCoolingLoad(areaM2, windowAreaM2, windowU, occupants, climate, insul) {
            // Simplified cooling load calculation
            const wallArea = Math.sqrt(areaM2) * 4 * 2.4 - windowAreaM2;
            
            // Solar heat gain through windows (W)
            const solarGain = windowAreaM2 * 300; // Average solar heat gain factor for Canada
            
            // Heat gain through walls and roof
            const wallGain = (wallArea / insul.wall) * (climate.summerTemp - 21) * 0.7; // Reduced due to thermal mass
            const roofGain = (areaM2 / insul.ceiling) * (climate.summerTemp - 21 + 10); // +10¬∞C for roof surface temp
            
            // Internal gains
            const occupantGain = occupants * 100; // 100W per person
            const applianceGain = areaM2 * 5; // 5W/m¬≤ for appliances and lighting
            
            // Ventilation load
            const ventilationGain = areaM2 * 2 * 1.2 * 1000 * (climate.summerTemp - 21) / 3600; // 2 L/s per m¬≤
            
            return solarGain + wallGain + roofGain + occupantGain + applianceGain + ventilationGain;
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            const areaUnit = isMetric ? 'm¬≤' : 'ft¬≤';
            const loadUnit = isMetric ? 'W/m¬≤' : 'BTU/h¬∑ft¬≤';
            const winterTemp = isMetric ? data.climate.winterTemp + '¬∞C' : data.climate.winterTempF + '¬∞F';
            const summerTemp = isMetric ? data.climate.summerTemp + '¬∞C' : data.climate.summerTempF + '¬∞F';
            
            // Calculate load densities
            const heatingDensity = isMetric ? 
                Math.round(data.designHeatLoad / data.area) : 
                Math.round(data.heatingCapacityBtu / data.areaDisplay);
            const coolingDensity = isMetric ? 
                Math.round(data.coolingLoad / data.area) : 
                Math.round(data.coolingCapacityBtu / data.areaDisplay);
            
            resultsDiv.innerHTML = `
                <div class="calc-result-item">
                    <h3>üî• Heating Load</h3>
                    <div class="calc-result-value">${Math.round(data.designHeatLoad).toLocaleString()} W</div>
                    <div style="margin-top: 8px; color: #666;">
                        ${Math.round(data.heatingCapacityBtu).toLocaleString()} BTU/h
                    </div>
                </div>

                <div class="calc-result-item">
                    <h3>‚ùÑÔ∏è Cooling Load</h3>
                    <div class="calc-result-value">${Math.round(data.coolingLoad).toLocaleString()} W</div>
                    <div style="margin-top: 8px; color: #666;">
                        ${Math.round(data.coolingCapacityBtu).toLocaleString()} BTU/h<br>
                        ${data.coolingTons.toFixed(1)} Tons
                    </div>
                </div>

                <div class="calc-result-item">
                    <h3>üìä Load Density</h3>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <span>Heating: <strong>${heatingDensity} ${loadUnit}</strong></span>
                        <span>Cooling: <strong>${coolingDensity} ${loadUnit}</strong></span>
                    </div>
                </div>

                <div class="calc-climate-info">
                    <h4>üå°Ô∏è Climate Information - ${data.province}</h4>
                    <p><strong>Zone:</strong> ${data.climate.zone}</p>
                    <p><strong>Design Temperatures:</strong></p>
                    <p>‚Ä¢ Winter: ${winterTemp} | Summer: ${summerTemp}</p>
                    <p><strong>Degree Days:</strong> ${data.climate.hdd.toLocaleString()} HDD | ${data.climate.cdd} CDD</p>
                </div>

                <div class="calc-warning">
                    <strong>‚ö†Ô∏è Professional Note:</strong> These calculations provide estimates based on simplified methods. 
                    For final equipment sizing and installation, consult with a licensed HVAC professional who can perform 
                    detailed Manual J calculations and consider local building codes.
                </div>
            `;
        }

        // Superheat Calculator Functions
        function interpolateTemperature(pressure, pressureTempData) {
            const pressures = Object.keys(pressureTempData).map(Number).sort(function(a, b) { return a - b; });
            const temperatures = pressures.map(function(p) { return pressureTempData[p]; });
            
            // Find the two pressures that bracket our input
            let lowerIndex = -1;
            for (let i = 0; i < temperatures.length - 1; i++) {
                if (pressure >= temperatures[i] && pressure <= temperatures[i + 1]) {
                    lowerIndex = i;
                    break;
                }
            }
            
            if (lowerIndex === -1) {
                // Extrapolate
                if (pressure < temperatures[0]) {
                    return pressures[0];
                } else {
                    return pressures[pressures.length - 1];
                }
            }
            
            // Linear interpolation
            const p1 = temperatures[lowerIndex];
            const p2 = temperatures[lowerIndex + 1];
            const t1 = pressures[lowerIndex];
            const t2 = pressures[lowerIndex + 1];
            
            return t1 + (pressure - p1) * (t2 - t1) / (p2 - p1);
        }

        function calculateSuperheat() {
            const refrigerant = document.getElementById('sh-refrigerant').value;
            const suctionPressure = parseFloat(document.getElementById('suction-pressure').value);
            const suctionTemp = parseFloat(document.getElementById('suction-temp').value);
            const resultDiv = document.getElementById('superheat-result');

            if (!refrigerant || isNaN(suctionPressure) || isNaN(suctionTemp)) {
                resultDiv.textContent = 'Please fill in all fields';
                resultDiv.className = 'result';
                return;
            }

            const refData = refrigerantData[refrigerant];
            if (!refData) {
                resultDiv.textContent = 'Refrigerant data not available';
                resultDiv.className = 'result';
                return;
            }

            // Convert gauge pressure to absolute pressure for calculation
            const absolutePressure = suctionPressure + 14.7;
            const saturatedTemp = interpolateTemperature(absolutePressure, refData.pressureTemp);
            const superheat = suctionTemp - saturatedTemp;

            let className = 'result';
            let message = 'Super-Heat: ' + superheat.toFixed(1) + '¬∞F';

            // Determine if superheat is in acceptable range
            if (superheat >= 5 && superheat <= 20) {
                className = 'result good';
                message += ' ‚úì GOOD';
            } else if (superheat >= 20 && superheat <= 30) {
                className = 'result warning';
                message += ' ‚ö†Ô∏è HIGH';
            } else if (superheat < 5) {
                className = 'result bad';
                message += ' ‚ùå TOO LOW';
            } else {
                className = 'result bad';
                message += ' ‚ùå TOO HIGH';
            }

            message += '\nSaturated Temp: ' + saturatedTemp.toFixed(1) + '¬∞F';

            resultDiv.textContent = message;
            resultDiv.className = className;
        }

        function calculateSubcooling() {
            const refrigerant = document.getElementById('sc-refrigerant').value;
            const dischargePressure = parseFloat(document.getElementById('discharge-pressure').value);
            const liquidTemp = parseFloat(document.getElementById('liquid-temp').value);
            const resultDiv = document.getElementById('subcooling-result');

            if (!refrigerant || isNaN(dischargePressure) || isNaN(liquidTemp)) {
                resultDiv.textContent = 'Please fill in all fields';
                resultDiv.className = 'result';
                return;
            }

            const refData = refrigerantData[refrigerant];
            if (!refData) {
                resultDiv.textContent = 'Refrigerant data not available';
                resultDiv.className = 'result';
                return;
            }

            // Convert gauge pressure to absolute pressure for calculation
            const absolutePressure = dischargePressure + 14.7;
            const saturatedTemp = interpolateTemperature(absolutePressure, refData.pressureTemp);
            const subcooling = saturatedTemp - liquidTemp;

            let className = 'result';
            let message = 'Sub-Cooling: ' + subcooling.toFixed(1) + '¬∞F';

            // Determine if subcooling is in acceptable range
            if (subcooling >= 5 && subcooling <= 20) {
                className = 'result good';
                message += ' ‚úì GOOD';
            } else if (subcooling >= 20 && subcooling <= 30) {
                className = 'result warning';
                message += ' ‚ö†Ô∏è HIGH';
            } else if (subcooling < 5) {
                className = 'result bad';
                message += ' ‚ùå TOO LOW';
            } else {
                className = 'result bad';
                message += ' ‚ùå TOO HIGH';
            }

            message += '\nSaturated Temp: ' + saturatedTemp.toFixed(1) + '¬∞F';

            resultDiv.textContent = message;
            resultDiv.className = className;
        }

        function updateRefrigerantInfo(section) {
            const refrigerant = document.getElementById(section + '-refrigerant').value;
            const infoDiv = document.getElementById('refrigerant-info');
            const detailsDiv = document.getElementById('refrigerant-details');

            if (!refrigerant) {
                infoDiv.style.display = 'none';
                return;
            }

            const refData = refrigerantData[refrigerant];
            if (!refData) return;

            let safetyWarning = '';
            if (refData.safety === 'A2L') {
                safetyWarning = '<div class="safety-warning">‚ö†Ô∏è A2L REFRIGERANT: Mildly flammable - Special handling procedures required</div>';
            } else if (refData.safety === 'A3') {
                safetyWarning = '<div class="safety-warning">üî• A3 REFRIGERANT: Highly flammable - Extreme caution required</div>';
            }

            const a2lIndicator = refData.safety === 'A2L' ? '<span class="a2l-indicator">A2L</span>' : '';

            detailsDiv.innerHTML = '<h4>' + refData.name + ' ' + a2lIndicator + '</h4>' +
                '<p><strong>Type:</strong> ' + refData.type + '</p>' +
                '<p><strong>Safety Classification:</strong> ' + refData.safety + '</p>' +
                '<p><strong>Global Warming Potential (GWP):</strong> ' + refData.gwp + '</p>' +
                safetyWarning;

            infoDiv.style.display = 'block';
        }

        function resetSuperheat() {
            document.getElementById('sh-refrigerant').value = '';
            document.getElementById('suction-pressure').value = '';
            document.getElementById('suction-temp').value = '';
            document.getElementById('superheat-result').textContent = 'Enter values to calculate super-heat';
            document.getElementById('superheat-result').className = 'result';
            document.getElementById('refrigerant-info').style.display = 'none';
        }

        function resetSubcooling() {
            document.getElementById('sc-refrigerant').value = '';
            document.getElementById('discharge-pressure').value = '';
            document.getElementById('liquid-temp').value = '';
            document.getElementById('subcooling-result').textContent = 'Enter values to calculate sub-cooling';
            document.getElementById('subcooling-result').className = 'result';
            document.getElementById('refrigerant-info').style.display = 'none';
        }

        // Community functionality
        function showCommunitySection(sectionName) {
            // Hide all community sections
            const sections = document.querySelectorAll('.community-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Show selected section
            document.getElementById(`community-${sectionName}`).classList.add('active');
            
            // Update navigation
            const navItems = document.querySelectorAll('.community-nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
        }

        function createThread() {
            const title = document.getElementById('threadTitle').value;
            const category = document.getElementById('threadCategory').value;
            const content = document.getElementById('threadContent').value;

            if (!title.trim() || !content.trim()) {
                alert('Please fill in both title and content for your thread.');
                return;
            }

            const categoryLabels = {
                'general': 'General Discussion',
                'troubleshooting': 'Troubleshooting',
                'education': 'Education & Training',
                'codes': 'Codes & Regulations',
                'equipment': 'Equipment & Tools',
                'career': 'Career Advice'
            };

            const threadList = document.getElementById('threadList');
            const newThread = document.createElement('div');
            newThread.className = 'thread-item';
            newThread.setAttribute('data-category', category);
            
            newThread.innerHTML = `
                <div class="thread-header">
                    <div>
                        <div class="thread-title">${title}</div>
                        <div class="thread-meta">
                            <span class="thread-author">You (Visitor)</span>
                            <span class="thread-time">just now</span>
                            <span class="thread-category">${categoryLabels[category]}</span>
                        </div>
                    </div>
                    <div class="thread-stats">
                        <span>üí¨ 0 replies</span>
                        <span>üëÅÔ∏è 1 view</span>
                    </div>
                </div>
                <div class="thread-preview">${content.substring(0, 200)}${content.length > 200 ? '...' : ''}</div>
            `;

            threadList.insertBefore(newThread, threadList.firstChild);

            // Clear form
            document.getElementById('threadTitle').value = '';
            document.getElementById('threadContent').value = '';
            document.getElementById('threadCategory').value = 'general';

            // Animate new thread
            newThread.style.transform = 'translateY(-20px)';
            newThread.style.opacity = '0';
            setTimeout(() => {
                newThread.style.transform = 'translateY(0)';
                newThread.style.opacity = '1';
                newThread.style.transition = 'all 0.5s ease';
            }, 100);

            alert('Thread created successfully! üéâ');
        }

        function connectWithUser(userName) {
            alert(`Connection request sent to ${userName}! ü§ù\n\nIn a full version, this would:\n‚Ä¢ Send a connection request\n‚Ä¢ Allow direct messaging\n‚Ä¢ Show shared interests\n‚Ä¢ Enable collaboration`);
        }

        function toggleLike(button) {
            const isLiked = button.classList.contains('liked');
            const currentLikes = parseInt(button.textContent.match(/\d+/)[0]);
            
            if (isLiked) {
                button.classList.remove('liked');
                button.textContent = `üëç Like (${currentLikes - 1})`;
            } else {
                button.classList.add('liked');
                button.textContent = `üëç Like (${currentLikes + 1})`;
            }
        }

        function postMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) {
                alert('Please enter a message before posting.');
                return;
            }
            
            const chatMessages = document.getElementById('chatMessages');
            const newMessage = document.createElement('div');
            newMessage.className = 'chat-message';
            newMessage.innerHTML = `
                <div class="message-header">
                    <div class="message-author-info">
                        <span class="message-author">You</span>
                        <span class="message-author-badge">Visitor</span>
                    </div>
                    <span class="message-time">just now</span>
                </div>
                <div class="message-content">${message}</div>
                <div class="message-actions">
                    <button class="like-button" onclick="toggleLike(this)">üëç Like (0)</button>
                    <button class="reply-button" onclick="showReplyBox(this)">üí¨ Reply</button>
                </div>
            `;
            
            chatMessages.insertBefore(newMessage, chatMessages.firstChild);
            input.value = '';
            
            // Animate new message
            newMessage.style.transform = 'translateY(-20px)';
            newMessage.style.opacity = '0';
            setTimeout(() => {
                newMessage.style.transform = 'translateY(0)';
                newMessage.style.opacity = '1';
                newMessage.style.transition = 'all 0.5s ease';
            }, 100);
        }

        // Filter functionality
        function initializeFilters() {
            // Thread category filters
            const categoryFilters = document.querySelectorAll('.filter-category');
            categoryFilters.forEach(filter => {
                filter.addEventListener('click', function() {
                    // Update active state
                    categoryFilters.forEach(f => f.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter threads
                    const category = this.getAttribute('data-category');
                    const threads = document.querySelectorAll('.thread-item');
                    
                    threads.forEach(thread => {
                        if (category === 'all' || thread.getAttribute('data-category') === category) {
                            thread.style.display = 'block';
                        } else {
                            thread.style.display = 'none';
                        }
                    });
                });
            });

            // Search functionality
            const threadSearch = document.getElementById('threadSearch');
            if (threadSearch) {
                threadSearch.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const threads = document.querySelectorAll('.thread-item');
                    
                    threads.forEach(thread => {
                        const title = thread.querySelector('.thread-title').textContent.toLowerCase();
                        const content = thread.querySelector('.thread-preview').textContent.toLowerCase();
                        
                        if (title.includes(searchTerm) || content.includes(searchTerm)) {
                            thread.style.display = 'block';
                        } else {
                            thread.style.display = 'none';
                        }
                    });
                });
            }

            // User directory filters
            const userFilters = document.querySelectorAll('[data-filter]');
            userFilters.forEach(filter => {
                filter.addEventListener('click', function() {
                    userFilters.forEach(f => f.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filterType = this.getAttribute('data-filter');
                    const userCards = document.querySelectorAll('.user-card');
                    
                    userCards.forEach(card => {
                        const userType = card.getAttribute('data-type');
                        if (filterType === 'all' || userType.includes(filterType)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });

            // User search
            const userSearch = document.getElementById('userSearch');
            if (userSearch) {
                userSearch.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const userCards = document.querySelectorAll('.user-card');
                    
                    userCards.forEach(card => {
                        const name = card.querySelector('.user-name').textContent.toLowerCase();
                        const title = card.querySelector('.user-title').textContent.toLowerCase();
                        const location = card.querySelector('.user-location').textContent.toLowerCase();
                        
                        if (name.includes(searchTerm) || title.includes(searchTerm) || location.includes(searchTerm)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            }
        }

        function showReplyBox(button) {
            // Check if reply box already exists
            const existingReplyBox = button.parentNode.querySelector('.reply-input-box');
            if (existingReplyBox) {
                existingReplyBox.remove();
                return;
            }
            
            const replyBox = document.createElement('div');
            replyBox.className = 'reply-input-box';
            replyBox.style.cssText = 'margin-top: 1rem; display: flex; gap: 0.5rem;';
            replyBox.innerHTML = `
                <input type="text" placeholder="Write a reply..." style="flex: 1; padding: 8px; border: 1px solid rgba(255,255,255,0.2); border-radius: 5px; background: rgba(255,255,255,0.1); color: white;">
                <button onclick="postReply(this)" style="padding: 8px 15px; background: #27ae60; border: none; border-radius: 5px; color: white; cursor: pointer;">Reply</button>
                <button onclick="this.parentNode.remove()" style="padding: 8px 12px; background: #e74c3c; border: none; border-radius: 5px; color: white; cursor: pointer;">Cancel</button>
            `;
            
            button.parentNode.appendChild(replyBox);
            replyBox.querySelector('input').focus();
        }

        function postReply(button) {
            const input = button.previousElementSibling;
            const message = button.closest('.chat-message');
            
            if (!input.value.trim()) {
                alert('Please enter a reply before posting.');
                return;
            }
            
            const newReply = document.createElement('div');
            newReply.className = 'reply';
            newReply.innerHTML = `
                <div class="message-header">
                    <span class="message-author">You (Visitor)</span>
                    <span class="message-time">just now</span>
                </div>
                <div class="message-content">${input.value}</div>
            `;
            
            message.appendChild(newReply);
            button.parentNode.remove();
        }
    </script>
</body>
</html>
